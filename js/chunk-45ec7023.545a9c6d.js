(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45ec7023"],{"0d20":function(t,e,n){},1744:function(t,e,n){"use strict";n("c9a4")},"5a0c":function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t="millisecond",e="second",n="minute",s="hour",a="day",r="week",i="month",o="quarter",l="year",u=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,d=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,e,n){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(n)+t},m={s:c,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),s=Math.floor(n/60),a=n%60;return(e<=0?"+":"-")+c(s,2,"0")+":"+c(a,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(n,i),a=e-s<0,r=t.clone().add(n+(a?-1:1),i);return Number(-(n+(e-s)/(a?s-r:r-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(u){return{M:i,y:l,w:r,d:a,D:"date",h:s,m:n,s:e,ms:t,Q:o}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f="en",h={};h[f]=_;var v=function(t){return t instanceof g},p=function(t,e,n){var s;if(!t)return f;if("string"==typeof t)h[t]&&(s=t),e&&(h[t]=e,s=t);else{var a=t.name;h[a]=t,s=a}return!n&&s&&(f=s),s||!n&&f},y=function(t,e,n){if(v(t))return t.clone();var s=e?"string"==typeof e?{format:e,pl:n}:e:{};return s.date=t,new g(s)},b=m;b.l=p,b.i=v,b.w=function(t,e){return y(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var g=function(){function c(t){this.$L=this.$L||p(t.locale,null,!0),this.parse(t)}var m=c.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(u);if(s)return n?new Date(Date.UTC(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)):new Date(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!("Invalid Date"===this.$d.toString())},m.isSame=function(t,e){var n=y(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return y(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<y(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.year=function(t){return this.$g(t,"$y",l)},m.month=function(t){return this.$g(t,"$M",i)},m.day=function(t){return this.$g(t,"$W",a)},m.date=function(t){return this.$g(t,"$D","date")},m.hour=function(t){return this.$g(t,"$H",s)},m.minute=function(t){return this.$g(t,"$m",n)},m.second=function(t){return this.$g(t,"$s",e)},m.millisecond=function(e){return this.$g(e,"$ms",t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,o){var u=this,d=!!b.u(o)||o,c=b.p(t),m=function(t,e){var n=b.w(u.$u?Date.UTC(u.$y,e,t):new Date(u.$y,e,t),u);return d?n:n.endOf(a)},_=function(t,e){return b.w(u.toDate()[t].apply(u.toDate(),(d?[0,0,0,0]:[23,59,59,999]).slice(e)),u)},f=this.$W,h=this.$M,v=this.$D,p="set"+(this.$u?"UTC":"");switch(c){case l:return d?m(1,0):m(31,11);case i:return d?m(1,h):m(0,h+1);case r:var y=this.$locale().weekStart||0,g=(f<y?f+7:f)-y;return m(d?v-g:v+(6-g),h);case a:case"date":return _(p+"Hours",0);case s:return _(p+"Minutes",1);case n:return _(p+"Seconds",2);case e:return _(p+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(r,o){var u,d=b.p(r),c="set"+(this.$u?"UTC":""),m=(u={},u[a]=c+"Date",u.date=c+"Date",u[i]=c+"Month",u[l]=c+"FullYear",u[s]=c+"Hours",u[n]=c+"Minutes",u[e]=c+"Seconds",u[t]=c+"Milliseconds",u)[d],_=d===a?this.$D+(o-this.$W):o;if(d===i||d===l){var f=this.clone().set("date",1);f.$d[m](_),f.init(),this.$d=f.set("date",Math.min(this.$D,f.daysInMonth())).toDate()}else m&&this.$d[m](_);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(t,o){var u,d=this;t=Number(t);var c=b.p(o),m=function(e){var n=y(d);return b.w(n.date(n.date()+Math.round(e*t)),d)};if(c===i)return this.set(i,this.$M+t);if(c===l)return this.set(l,this.$y+t);if(c===a)return m(1);if(c===r)return m(7);var _=(u={},u[n]=6e4,u[s]=36e5,u[e]=1e3,u)[c]||1,f=this.$d.getTime()+t*_;return b.w(f,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",s=b.z(this),a=this.$locale(),r=this.$H,i=this.$m,o=this.$M,l=a.weekdays,u=a.months,c=function(t,s,a,r){return t&&(t[s]||t(e,n))||a[s].substr(0,r)},m=function(t){return b.s(r%12||12,t,"0")},_=a.meridiem||function(t,e,n){var s=t<12?"AM":"PM";return n?s.toLowerCase():s},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:b.s(o+1,2,"0"),MMM:c(a.monthsShort,o,u,3),MMMM:u[o]||u(this,n),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:c(a.weekdaysMin,this.$W,l,2),ddd:c(a.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(r),HH:b.s(r,2,"0"),h:m(1),hh:m(2),a:_(r,i,!0),A:_(r,i,!1),m:String(i),mm:b.s(i,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:s};return n.replace(d,(function(t,e){return e||f[t]||s.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(t,u,d){var c,m=b.p(u),_=y(t),f=6e4*(_.utcOffset()-this.utcOffset()),h=this-_,v=b.m(this,_);return v=(c={},c[l]=v/12,c[i]=v,c[o]=v/3,c[r]=(h-f)/6048e5,c[a]=(h-f)/864e5,c[s]=h/36e5,c[n]=h/6e4,c[e]=h/1e3,c)[m]||h,d?v:b.a(v)},m.daysInMonth=function(){return this.endOf(i).$D},m.$locale=function(){return h[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),s=p(t,e,!0);return s&&(n.$L=s),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},c}();return y.prototype=g.prototype,y.extend=function(t,e){return t(e,g,y),y},y.locale=p,y.isDayjs=v,y.unix=function(t){return y(1e3*t)},y.en=h[f],y.Ls=h,y}))},6529:function(t,e,n){"use strict";n("ad6f")},ad6f:function(t,e,n){},af83:function(t,e,n){"use strict";n("0d20")},b73e:function(t,e,n){"use strict";n("f36c")},c5f3:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"StatisticalAnalysis"},[n("v-card",[n("v-card-title",[t._v(" 住民分析 "),n("v-btn",{staticClass:"success mx-2",on:{click:function(e){return e.stopPropagation(),t.exportExcel(e)}}},[t._v("轉出住民資料 "),n("v-icon",{staticClass:"ml-1"},[t._v("mdi-microsoft-excel")])],1),n("v-spacer"),n("v-text-field",{staticClass:"mx-1",attrs:{label:"月份設定",type:"month"},model:{value:t.thisMonth,callback:function(e){t.thisMonth=e},expression:"thisMonth"}}),n("v-text-field",{staticClass:"mx-1",attrs:{label:"年齡設定(起)",type:"number"},model:{value:t.start_age,callback:function(e){t.start_age=e},expression:"start_age"}}),n("v-text-field",{staticClass:"mx-1",attrs:{label:"年齡設定(迄)",type:"number"},model:{value:t.end_age,callback:function(e){t.end_age=e},expression:"end_age"}}),n("v-btn",{staticClass:"primary mx-1",attrs:{loading:t.loading},on:{click:t.analysisData}},[n("v-icon",[t._v("mdi-google-analytics")]),t._v("執行分析結果 ")],1)],1),n("v-card-text",[n("v-simple-table",{staticClass:"text-no-wrap",scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",[t._v("日")]),t._l(t.analysisItems,(function(e,s){return n("th",{key:s},[t._v(" "+t._s(e.date)+" ")])})),n("th",[t._v("總計")])],2)]),n("tbody",[n("tr",[n("td",[t._v("總人日數")]),t._l(t.analysisItems,(function(e,s){return n("td",{key:s},[t._v(" "+t._s(e.count)+" ")])})),n("td",[t._v(t._s(t.total_counts("count")))])],2),n("tr",[n("td",[t._v("新住民數")]),t._l(t.analysisItems,(function(e,s){return n("td",{key:s},[t._v(" "+t._s(e.new)+" ")])})),n("td",[t._v(t._s(t.total_counts("new")))])],2),n("tr",[n("td",[t._v("退住民數")]),t._l(t.analysisItems,(function(e,s){return n("td",{key:s},[t._v(" "+t._s(e.liveOut)+" ")])})),n("td",[t._v(t._s(t.total_counts("liveOut")))])],2),n("tr",[n("td",[t._v("男."+t._s(t.start_age)+"~"+t._s(t.end_age)+".有殘冊")]),t._l(t.analysisItems,(function(e,s){return n("td",{key:s},[t._v(" "+t._s(e.man65upHandicapYes)+" ")])})),n("td",[t._v(t._s(t.total_counts("man65upHandicapYes")))])],2),n("tr",[n("td",[t._v("男."+t._s(t.start_age)+"~"+t._s(t.end_age)+".無殘冊")]),t._l(t.analysisItems,(function(e,s){return n("td",{key:s},[t._v(" "+t._s(e.man65upHandicapNo)+" ")])})),n("td",[t._v(t._s(t.total_counts("man65upHandicapNo")))])],2),n("tr",[n("td",[t._v("女."+t._s(t.start_age)+"~"+t._s(t.end_age)+".有殘冊")]),t._l(t.analysisItems,(function(e,s){return n("td",{key:s},[t._v(" "+t._s(e.women65upHandicapYes)+" ")])})),n("td",[t._v(t._s(t.total_counts("women65upHandicapYes")))])],2),n("tr",[n("td",[t._v("女."+t._s(t.start_age)+"~"+t._s(t.end_age)+".無殘冊")]),t._l(t.analysisItems,(function(e,s){return n("td",{key:s},[t._v(" "+t._s(e.women65upHandicapNo)+" ")])})),n("td",[t._v(t._s(t.total_counts("women65upHandicapNo")))])],2),n("tr",[n("td",[t._v(t._s(t.start_age)+"~"+t._s(t.end_age)+".鼻胃管人數")]),t._l(t.analysisItems,(function(e,s){return n("td",{key:s},[t._v(" "+t._s(e.pipelineNasogastricCounts)+" ")])})),n("td",[t._v(t._s(t.total_counts("pipelineNasogastricCounts")))])],2),n("tr",[n("td",[t._v(t._s(t.start_age)+"~"+t._s(t.end_age)+".尿管人數")]),t._l(t.analysisItems,(function(e,s){return n("td",{key:s},[t._v(" "+t._s(e.pipelineUrinaryCounts)+" ")])})),n("td",[t._v(t._s(t.total_counts("pipelineUrinaryCounts")))])],2)])]},proxy:!0}])})],1)],1),n("v-divider",{staticClass:"my-2"}),n("Demography",{staticClass:"mb-6"}),n("table",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"outputtable",border:"2px solid #00"}},[t._m(0),n("tbody",t._l(t.filterUserInLive,(function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(e.bed_name))]),n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.id_num))])])})),0)])],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"font-weight-bold"},[n("tr",[n("td",[t._v("房號")]),n("td",[t._v("姓名")]),n("td",[t._v("身分證")])])])}],r=(n("4de4"),n("7db0"),n("caad"),n("d81d"),n("4e827"),n("b0c0"),n("e25e"),n("2532"),n("1146")),i=n.n(r),o=n("5a0c"),l=n.n(o),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{color:"blue lighten-5"}},[n("v-card-title",{staticClass:"text-center"},[n("v-row",[n("v-col",{attrs:{cols:"4"}}),n("v-col",{staticClass:"font-weight-bold display-1",attrs:{cols:"4"}},[t._v("人口學分析")]),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{staticClass:"float-right",attrs:{label:"年度",type:"number"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1)],1)],1),n("v-tabs",{attrs:{"background-color":"transparent",color:"indigo",grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(e){return n("v-tab",{key:e},[n("h2",[t._v(t._s(e))])])})),1),n("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("v-tab-item",[n("Sex",{staticClass:"pa-3",attrs:{year:t.year}})],1),n("v-tab-item",[n("Bed",{staticClass:"pa-3",attrs:{year:t.year}})],1),n("v-tab-item",[n("Age",{staticClass:"pa-3",attrs:{year:t.year}})],1)],1)],1)},d=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"sex"},[n("v-card-text",[n("v-simple-table",{staticClass:"text-no-wrap",scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",[t._v("月")]),t._l(12,(function(e){return n("th",{key:e},[t._v(t._s(e)+" 月")])})),n("th",[t._v("合計")]),n("th",[t._v("年度平均")])],2)]),n("tbody",[n("tr",[n("td",[t._v("男性")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(e.mans)+" ")])})),n("td",[t._v(" "+t._s(t.total("mans"))+" ")]),n("td",[t._v(" "+t._s((t.total("mans")/12).toFixed(0))+" ")])],2),n("tr",[n("td",[t._v("女性")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(e.womens)+" ")])})),n("td",[t._v(" "+t._s(t.total("womens"))+" ")]),n("td",[t._v(" "+t._s((t.total("womens")/12).toFixed(0))+" ")])],2),n("tr",[n("td",[t._v("合計")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(e.mans+e.womens)+" ")])})),n("td",[t._v(" "+t._s(t.total("mans")+t.total("womens"))+" ")]),n("td",[t._v(" "+t._s(((t.total("mans")+t.total("womens"))/12).toFixed(0))+" ")])],2),n("tr",[n("td",[t._v("男生百分比")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(t._f("filterEmpty")((e.mans/(e.mans+e.womens)*100).toFixed(2)))+" % ")])})),n("td",[t._v(" "+t._s(t._f("filterEmpty")((t.total("mans")/(t.total("mans")+t.total("womens"))*100).toFixed(2)))+" % ")]),n("td")],2),n("tr",[n("td",[t._v("女生百分比")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(t._f("filterEmpty")((e.womens/(e.mans+e.womens)*100).toFixed(2)))+" % ")])})),n("td",[t._v(" "+t._s(t._f("filterEmpty")((t.total("womens")/(t.total("mans")+t.total("womens"))*100).toFixed(2)))+" % ")]),n("td")],2)])]},proxy:!0}])})],1)],1)},m=[],_={props:["year"],inject:["userItemsParents","bed_usedItemsParents"],data:function(){return{tableData:[]}},watch:{year:function(){this.createTableData()},bed_usedItems:function(){this.createTableData()}},computed:{userItems:function(){return this.userItemsParents()},bed_usedItems:function(){return this.bed_usedItemsParents()}},filters:{filterEmpty:function(t){return"NaN"==t?"":t}},mounted:function(){this.createTableData()},methods:{createTableData:function(){for(var t=[],e=1;e<=12;e++)t.push({month:e,mans:this.getSex(e,"男").length,womens:this.getSex(e,"女").length});this.tableData=t},getSex:function(t,e){var n=l()(this.year+"-"+t).format("YYYY-MM-01"),s=l()(this.year+"-"+t).endOf("month").format("YYYY-MM-DD");return this.bed_usedItems.filter((function(t){if(t.start_day<=s&&t.end_day<=s&&(t.end_day>=n||"0000-00-00"==t.end_day)&&t.userData.sex==e)return t}))},total:function(t){return this.tableData.reduce((function(e,n){return e+parseInt(n[t])}),0)}}},f=_,h=(n("1744"),n("2877")),v=n("6544"),p=n.n(v),y=n("b0af"),b=n("99d9"),g=n("1f4f"),w=Object(h["a"])(f,c,m,!1,null,"58670e5a",null),Y=w.exports;p()(w,{VCard:y["a"],VCardText:b["d"],VSimpleTable:g["a"]});var D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"bed"},[n("v-card-text",[n("v-simple-table",{staticClass:"text-no-wrap",scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",[t._v("月")]),t._l(12,(function(e){return n("th",{key:e},[t._v(t._s(e)+" 月")])})),n("th",[t._v("合計")]),n("th",[t._v("年度平均")])],2)]),n("tbody",[n("tr",[n("td",[t._v("人數")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(e.mans+e.womens)+" ")])})),n("td",[t._v(" "+t._s(t.total("mans")+t.total("womens"))+" ")]),n("td",[t._v(" "+t._s(((t.total("mans")+t.total("womens"))/12).toFixed(0))+" ")])],2),n("tr",[n("td",[t._v("床數")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(t.bedItems.length)+" ")])})),n("td",[t._v(" "+t._s(12*t.bedItems.length)+" ")]),n("td",[t._v(" "+t._s(12*t.bedItems.length/12)+" ")])],2),n("tr",[n("td",[t._v("占床率")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(((e.mans+e.womens)/t.bedItems.length*100).toFixed(2))+"% ")])})),n("td"),n("td",[t._v(" "+t._s((((t.total("mans")+t.total("womens"))/12).toFixed(0)/(12*t.bedItems.length/12)*100).toFixed(2))+"% ")])],2)])]},proxy:!0}])})],1)],1)},x=[],$={props:["year"],inject:["userItemsParents","bed_usedItemsParents"],data:function(){return{tableData:[],bedItems:[]}},watch:{year:function(){this.createTableData()},bed_usedItems:function(){this.createTableData()}},computed:{userItems:function(){return this.userItemsParents()},bed_usedItems:function(){return this.bed_usedItemsParents()}},filters:{filterEmpty:function(t){return"NaN"==t?"":t}},mounted:function(){this.getData("bed"),this.createTableData()},methods:{getData:function(t){var e=this;this.$api.options("bed/getAll/"+this.$store.state.databaseName+"/"+t).then((function(n){e[t+"Items"]=n}))},createTableData:function(){for(var t=[],e=1;e<=12;e++)t.push({month:e,mans:this.getSex(e,"男").length,womens:this.getSex(e,"女").length});this.tableData=t},getSex:function(t,e){var n=l()(this.year+"-"+t).format("YYYY-MM-01"),s=l()(this.year+"-"+t).endOf("month").format("YYYY-MM-DD");return this.bed_usedItems.filter((function(t){if(t.start_day<=s&&t.end_day<=s&&(t.end_day>=n||"0000-00-00"==t.end_day)&&t.userData.sex==e)return t}))},total:function(t){return this.tableData.reduce((function(e,n){return e+parseInt(n[t])}),0)}}},M=$,I=(n("af83"),Object(h["a"])(M,D,x,!1,null,"26f4d321",null)),k=I.exports;p()(I,{VCard:y["a"],VCardText:b["d"],VSimpleTable:g["a"]});var C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"age"},[n("v-card-text",[n("v-simple-table",{staticClass:"text-no-wrap",scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",[t._v("月")]),t._l(12,(function(e){return n("th",{key:e},[t._v(t._s(e)+" 月")])})),n("th",[t._v("合計")]),n("th",[t._v("年度平均")])],2)]),n("tbody",[n("tr",[n("td",[t._v("總個案數")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(e.mansAll+e.womensAll)+" ")])})),n("td",[t._v(" "+t._s(t.total("mansAll")+t.total("womensAll"))+" ")]),n("td",[t._v(" "+t._s(((t.total("mansAll")+t.total("womensAll"))/12).toFixed(0))+" ")])],2),n("tr",[n("td",[t._v("59以下")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(e.mans59+e.womens59)+" ")])})),n("td",[t._v(" "+t._s(t.total("mans59")+t.total("womens59"))+" ")]),n("td",[t._v(" "+t._s(((t.total("mans59")+t.total("womens59"))/12).toFixed(0))+" ")])],2),n("tr",[n("td",[t._v("百分比")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(((e.mans59+e.womens59)/(e.mansAll+e.womensAll)*100).toFixed(2))+"% ")])})),n("td",[t._v(" "+t._s(((t.total("mans59")+t.total("womens59"))/(t.total("mansAll")+t.total("womensAll"))*100).toFixed(2))+"% ")]),n("td",[t._v(" "+t._s((((t.total("mans59")+t.total("womens59"))/12).toFixed(0)/((t.total("mansAll")+t.total("womensAll"))/12).toFixed(0)*100).toFixed(2))+"% ")])],2),n("tr",[n("td",[t._v("61~69")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(e.mans60+e.womens60)+" ")])})),n("td",[t._v(" "+t._s(t.total("mans60")+t.total("womens60"))+" ")]),n("td",[t._v(" "+t._s(((t.total("mans60")+t.total("womens60"))/12).toFixed(0))+" ")])],2),n("tr",[n("td",[t._v("百分比")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(((e.mans60+e.womens60)/(e.mansAll+e.womensAll)*100).toFixed(2))+"% ")])})),n("td",[t._v(" "+t._s(((t.total("mans60")+t.total("womens60"))/(t.total("mansAll")+t.total("womensAll"))*100).toFixed(2))+"% ")]),n("td",[t._v(" "+t._s((((t.total("mans60")+t.total("womens60"))/12).toFixed(0)/((t.total("mansAll")+t.total("womensAll"))/12).toFixed(0)*100).toFixed(2))+"% ")])],2),n("tr",[n("td",[t._v("70~79")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(e.mans70+e.womens70)+" ")])})),n("td",[t._v(" "+t._s(t.total("mans70")+t.total("womens70"))+" ")]),n("td",[t._v(" "+t._s(((t.total("mans70")+t.total("womens70"))/12).toFixed(0))+" ")])],2),n("tr",[n("td",[t._v("百分比")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(((e.mans70+e.womens70)/(e.mansAll+e.womensAll)*100).toFixed(2))+"% ")])})),n("td",[t._v(" "+t._s(((t.total("mans70")+t.total("womens70"))/(t.total("mansAll")+t.total("womensAll"))*100).toFixed(2))+"% ")]),n("td",[t._v(" "+t._s((((t.total("mans70")+t.total("womens70"))/12).toFixed(0)/((t.total("mansAll")+t.total("womensAll"))/12).toFixed(0)*100).toFixed(2))+"% ")])],2),n("tr",[n("td",[t._v("80~89")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(e.mans80+e.womens80)+" ")])})),n("td",[t._v(" "+t._s(t.total("mans80")+t.total("womens80"))+" ")]),n("td",[t._v(" "+t._s(((t.total("mans80")+t.total("womens80"))/12).toFixed(0))+" ")])],2),n("tr",[n("td",[t._v("百分比")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(((e.mans80+e.womens80)/(e.mansAll+e.womensAll)*100).toFixed(2))+"% ")])})),n("td",[t._v(" "+t._s(((t.total("mans80")+t.total("womens80"))/(t.total("mansAll")+t.total("womensAll"))*100).toFixed(2))+"% ")]),n("td",[t._v(" "+t._s((((t.total("mans80")+t.total("womens80"))/12).toFixed(0)/((t.total("mansAll")+t.total("womensAll"))/12).toFixed(0)*100).toFixed(2))+"% ")])],2),n("tr",[n("td",[t._v("90以上")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(e.mans90+e.womens90)+" ")])})),n("td",[t._v(" "+t._s(t.total("mans90")+t.total("womens90"))+" ")]),n("td",[t._v(" "+t._s(((t.total("mans90")+t.total("womens90"))/12).toFixed(0))+" ")])],2),n("tr",[n("td",[t._v("百分比")]),t._l(t.tableData,(function(e){return n("td",{key:e.month},[t._v(" "+t._s(((e.mans90+e.womens90)/(e.mansAll+e.womensAll)*100).toFixed(2))+"% ")])})),n("td",[t._v(" "+t._s(((t.total("mans90")+t.total("womens90"))/(t.total("mansAll")+t.total("womensAll"))*100).toFixed(2))+"% ")]),n("td",[t._v(" "+t._s((((t.total("mans90")+t.total("womens90"))/12).toFixed(0)/((t.total("mansAll")+t.total("womensAll"))/12).toFixed(0)*100).toFixed(2))+"% ")])],2)])]},proxy:!0}])})],1)],1)},A=[],S={props:["year"],inject:["userItemsParents","bed_usedItemsParents"],data:function(){return{tableData:[]}},watch:{year:function(){this.createTableData()},bed_usedItems:function(){this.createTableData()}},computed:{userItems:function(){return this.userItemsParents()},bed_usedItems:function(){return this.bed_usedItemsParents()}},filters:{filterEmpty:function(t){return"NaN"==t?"":t}},mounted:function(){this.createTableData()},methods:{createTableData:function(){for(var t=[],e=1;e<=12;e++)t.push({month:e,mansAll:this.getClass(e,"男",0,300).length,womensAll:this.getClass(e,"女",0,300).length,mans59:this.getClass(e,"男",0,59).length,womens59:this.getClass(e,"女",0,59).length,mans60:this.getClass(e,"男",60,69).length,womens60:this.getClass(e,"女",60,69).length,mans70:this.getClass(e,"男",70,79).length,womens70:this.getClass(e,"女",70,79).length,mans80:this.getClass(e,"男",80,89).length,womens80:this.getClass(e,"女",80,89).length,mans90:this.getClass(e,"男",90,300).length,womens90:this.getClass(e,"女",90,300).length});this.tableData=t},getClass:function(t,e,n,s){var a=l()(this.year+"-"+t).format("YYYY-MM-01"),r=l()(this.year+"-"+t).endOf("month").format("YYYY-MM-DD");return this.bed_usedItems.filter((function(t){var i=l()().format("YYYY")-l()(t.userData.birthday).format("YYYY");if(t.start_day<=r&&t.end_day<=r&&(t.end_day>=a||"0000-00-00"==t.end_day)&&t.userData.sex==e&&parseInt(i)>=parseInt(n)&&parseInt(i)<=parseInt(s))return t}))},total:function(t){return this.tableData.reduce((function(e,n){return e+parseInt(n[t])}),0)}}},F=S,T=(n("b73e"),Object(h["a"])(F,C,A,!1,null,"3f88ce85",null)),O=T.exports;p()(T,{VCard:y["a"],VCardText:b["d"],VSimpleTable:g["a"]});var N={components:{Sex:Y,Bed:k,Age:O},data:function(){return{tab:null,items:["一、性別分布","二、占床率","三、住民年齡","四、住民來源","五、異動原因","六、疾病史","七、巴氏量表"],year:l()().format("YYYY")}}},V=N,H=n("62ad"),P=n("0fd9"),U=n("71a3"),E=n("c671"),B=n("fe57"),L=n("aac8"),j=n("8654"),z=Object(h["a"])(V,u,d,!1,null,null,null),W=z.exports;p()(z,{VCard:y["a"],VCardTitle:b["e"],VCol:H["a"],VRow:P["a"],VTab:U["a"],VTabItem:E["a"],VTabs:B["a"],VTabsItems:L["a"],VTextField:j["a"]});var J=n("e418"),Z=n.n(J);l.a.extend(Z.a);var q={components:{Demography:W},provide:function(){var t=this;return{userItemsParents:function(){return t.userItems},bed_usedItemsParents:function(){return t.bed_usedItems}}},data:function(){return{temp:[],thisMonth:"",loading:!1,start_age:0,end_age:65,userItems:[],bed_usedItems:[],behospitalizedItems:[],pipeline_usedItems:[],analysisItems:[]}},created:function(){this.getUser(),this.getBehospitalized();var t="general/getAll/"+this.$store.state.databaseName+"/pipeline_used";this.getItems(t,"pipeline_used")},computed:{filterUserInLive:function(){var t=this.userItems.filter((function(t){return!!t.bed_name}));return t.sort((function(t,e){return t.bed_name>e.bed_name?1:-1}))}},methods:{analysisData:function(){this.loading=!0;for(var t=l()(this.thisMonth).endOf("month").format("DD"),e=[],n=1;n<=t;n++)e.push({date:n,count:this.getbed_used_day(n).length,new:this.getnew(n),liveOut:this.getliveOut(n),man65upHandicapYes:this.getUserClass(n,"男","Yes"),man65upHandicapNo:this.getUserClass(n,"男","No"),women65upHandicapYes:this.getUserClass(n,"女","Yes"),women65upHandicapNo:this.getUserClass(n,"女","No"),pipelineNasogastricCounts:this.getPipelindCounts(n,"鼻胃管").length,pipelineUrinaryCounts:this.getPipelindCounts(n,"尿管").length});if(e.length)this.analysisItems=e;else{var s={msg:"無符合之資料!!請重新確認",type:!0,theme:"warning"};this.$store.commit("snackbar",s)}this.loading=!1},getUserClass:function(t,e,n){var s=this,a=this.getbed_used_day(t);return a=a.filter((function(t){void 0==t.userData.birthday&&console.log(t);var a=l()().format("YYYY")-l()(t.userData.birthday).format("YYYY");if(parseInt(a)>=s.start_age&&parseInt(a)<=s.end_age&&t.userData.sex==e)if("Yes"==n){if(t.userData.obstacle.length>0)return t}else if(0==t.userData.obstacle)return t})),a.length},getnew:function(t){var e=l()(this.thisMonth).format("YYYY-MM-"+t),n=this.bed_usedItems.filter((function(t){return l()(e).format("YYYY-MM-DD")==l()(t.start_day).format("YYYY-MM-DD")}));return n.length},getliveOut:function(t){var e=l()(this.thisMonth).format("YYYY-MM-"+t),n=this.bed_usedItems.filter((function(t){return l()(e).format("YYYY-MM-DD")==l()(t.end_day).format("YYYY-MM-DD")}));return n.length},getbed_used_day:function(t){var e=this,n=l()(this.thisMonth).format("YYYY-MM-"+t),s=this.bed_usedItems.filter((function(t){return l()(n).format("YYYY-MM-DD")>=l()(t.start_day).format("YYYY-MM-DD")&&(l()(n).format("YYYY-MM-DD")<=l()(t.end_day).format("YYYY-MM-DD")||"0000-00-00"==t.end_day)}));return s=s.filter((function(t){var s=e.behospitalizedItems.find((function(e){return t.u_snkey===e.u_snkey}));return s&&l()(n).format("YYYY-MM-DD")>=l()(s.start_day).format("YYYY-MM-DD")&&(l()(n).format("YYYY-MM-DD")<=l()(s.end_day).format("YYYY-MM-DD")||"0000-00-00"==s.end_day)?void 0:t})),s},total_counts:function(t){if(this.analysisItems)return this.analysisItems.reduce((function(e,n){return parseInt(e)+parseInt(n[t])}),0)},getBehospitalized:function(){var t=this;this.axios.post("bed_used/getAll/"+this.$store.state.databaseName+"/behospitalized").then((function(e){t.behospitalizedItems=e.data.map((function(e){var n=e,s=t.userItems.find((function(t){return t.snkey==e.u_snkey}));return s&&(n.userData=s),n}))})).catch((function(t){console.log("no get")}))},getBedUsed:function(){var t=this;this.axios.post("bed_used/getAll/"+this.$store.state.databaseName+"/bed_used").then((function(e){var n=e.data.filter((function(t){return!t.bname.includes("H")}));t.bed_usedItems=n.map((function(e){var n=e,s=t.userItems.find((function(t){return t.snkey==e.u_snkey}));return n.userData=s||"",n}))}))},getUser:function(){var t=this;this.axios.post("user/getAll/"+this.$store.state.databaseName).then((function(e){t.userItems=e.data,t.getBedUsed()}))},getItems:function(t,e){var n=this;this.$api.options(t).then((function(t){n[e+"Items"]=t.map((function(t){var e=JSON.parse(t.datalist);return e.snkey=t.snkey,e.u_snkey=t.u_snkey,e}))}))},getPipelindCounts:function(t,e){var n=l()(this.thisMonth).format("YYYY-MM-"+t);if(this.pipeline_usedItems.length)return this.pipeline_usedItems.filter((function(t){return l()(n).isBetween(t.start_date,l()(t.end_date),null,"[]")&&t.name.includes(e)}));var s={msg:"管路資料讀取失敗,請重新載入頁面",type:!0,theme:"warning"};this.$store.commit("snackbar",s)},exportExcel:function(){this.$confirm("確認轉出住民Excel檔?").then((function(t){if(t){var e=i.a.utils.table_to_book(document.getElementById("outputtable")),n="住民一覽表.xlsx";try{i.a.writeFile(e,n)}catch(s){console.log(s,e)}}}))}}},Q=q,R=(n("6529"),n("8336")),G=n("ce7e"),K=n("132d"),X=n("2fa4"),tt=Object(h["a"])(Q,s,a,!1,null,null,null);e["default"]=tt.exports;p()(tt,{VBtn:R["a"],VCard:y["a"],VCardText:b["d"],VCardTitle:b["e"],VDivider:G["a"],VIcon:K["a"],VSimpleTable:g["a"],VSpacer:X["a"],VTextField:j["a"]})},c9a4:function(t,e,n){},e418:function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";return function(t,e,n){e.prototype.isBetween=function(t,e,s,a){var r=n(t),i=n(e),o="("===(a=a||"()")[0],l=")"===a[1];return(o?this.isAfter(r,s):!this.isBefore(r,s))&&(l?this.isBefore(i,s):!this.isAfter(i,s))||(o?this.isBefore(r,s):!this.isAfter(r,s))&&(l?this.isAfter(i,s):!this.isBefore(i,s))}}}))},f36c:function(t,e,n){}}]);
//# sourceMappingURL=chunk-45ec7023.545a9c6d.js.map