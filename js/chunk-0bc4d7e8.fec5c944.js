(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bc4d7e8"],{"0522":function(t,e,s){},"12f3":function(t,e,s){"use strict";s("ffb1")},"55c4":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"feelist"},[s("v-dialog",{attrs:{width:"90%"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-icon",t._g({attrs:{color:"brown",dark:"",large:""},on:{click:t.enterProcess}},a),[t._v("mdi-cog-box")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),s("v-card-text",[s("v-form",{ref:"form",staticClass:"mt-3"},[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-row",[s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-cash-usd-outline",label:"費用名稱 or 搜尋",rules:t.emptyRules},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1),s("v-col",{attrs:{cols:"3"}},[s("v-combobox",{attrs:{items:t.kindItems,label:"種類",rules:t.emptyRules},model:{value:t.list.kind,callback:function(e){t.$set(t.list,"kind",e)},expression:"list.kind"}})],1),s("v-col",{attrs:{cols:"2"}},[s("v-text-field",{attrs:{label:"單位",rules:t.emptyRules},model:{value:t.list.unit,callback:function(e){t.$set(t.list,"unit",e)},expression:"list.unit"}})],1),s("v-col",{attrs:{cols:"2"}},[s("v-text-field",{attrs:{label:"費用",rules:t.emptyRules},model:{value:t.list.price,callback:function(e){t.$set(t.list,"price",e)},expression:"list.price"}})],1)],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"primary",attrs:{block:""},on:{click:t.addOK}},[t._v("確認新增")]),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"success",attrs:{block:""},on:{click:t.editOK}},[t._v("確認修改")]),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"error mt-1",attrs:{block:""},on:{click:t.cancelEditMode}},[t._v("取消修改")])],1)],1)],1),s("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"my-2"},[s("v-card-text",[s("v-sheet",{staticClass:"text-center pa-2",attrs:{color:"green lighten-3",outlined:""}},[s("h3",{staticClass:"white--text"},[t._v("已建構費用列表(點選可修改)")])]),s("v-list",{staticClass:"success font-weight-black"},[s("v-list-item-group",[s("v-list-item",[s("v-list-item-content",[s("v-row",[s("v-col",{attrs:{cols:"5"}},[s("v-list-item-title",[t._v("名稱")])],1),s("v-col",{attrs:{cols:"3"}},[s("v-list-item-title",[t._v("種類")])],1),s("v-col",{attrs:{cols:"2"}},[s("v-list-item-title",[t._v("單位")])],1),s("v-col",{attrs:{cols:"2"}},[s("v-list-item-title",[t._v("費用")])],1)],1)],1)],1)],1)],1),s("v-list",[s("v-list-item-group",t._l(t.filterItems,(function(e,a){return s("v-list-item",{key:a},[s("v-list-item-content",{on:{click:function(s){return s.stopPropagation(),t.enterEditMode(e)}}},[s("v-row",[s("v-col",{attrs:{cols:"5"}},[s("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1),s("v-col",{attrs:{cols:"3"}},[s("v-list-item-title",[t._v(t._s(e.kind))])],1),s("v-col",{attrs:{cols:"2"}},[s("v-list-item-title",[t._v(t._s(e.unit))])],1),s("v-col",{attrs:{cols:"2"}},[s("v-list-item-title",[t._v("$"+t._s(e.price))])],1)],1)],1),s("v-icon",{attrs:{color:"red"},on:{click:function(s){return s.stopPropagation(),t.del(e)}}},[t._v("mdi-close")])],1)})),1)],1)],1)],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer")],1)],1)],1)],1)},i=[],n=(s("4de4"),s("caad"),s("4e827"),s("b0c0"),s("2532"),s("4328")),r=s.n(n),o=s("5a0c"),c=s.n(o),l={data:function(){return{items:[],list:{name:""},dialog:!1,title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],editMode:!1,kindItems:["固定費類","車資類","其他類","耗材類-牛奶","耗材類-技術","特別約定事項-1","特別約定事項-2","耗材類-醫療","耗材類","耗材類-約束","耗材類-管路","健檢類","醫療類","耗材類-藥品"]}},computed:{filterItems:function(){var t=this,e="";return this.items.filter((function(s){if(e=JSON.stringify(s).toUpperCase(),e.includes(t.list.name.toUpperCase()))return s}))}},mounted:function(){this.getAllData()},methods:{getAllData:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/fee").then((function(e){t.items=e.data,t.sortBy()}))},sortBy:function(){this.items=this.items.sort((function(t,e){return t.kind<e.kind?1:-1}))},enterEdit:function(t){this.$refs.enterEdit.$emit("childFn",t)},enterProcess:function(){this.title="相關費用資料管理",this.titleStyle="font-weight-black primary lighten-2"},addOK:function(){var t=this;this.$refs.form.validate()&&(this.$store.commit("getTime"),this.list["create_man"]=this.$store.state.pData.username+"("+this.$store.state.time+")",this.axios.post("general/add/"+this.$store.state.databaseName+"/fee",r.a.stringify(this.list)).then((function(e){if(1==e.data.state){var s={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",s),t.getAllData(),t.$emit("getFeeData"),t.list.name="",t.$refs.form.resetValidation()}})))},del:function(t){var e=this;this.$confirm("確認刪除?").then((function(s){t.delman=e.$store.state.pData.username+"("+c()().format("YYYY-MM-DD HH:mm:ss")+")";var a={snkey:t.snkey,tablename:"fee",info:JSON.stringify(t)};s&&e.axios.post("general/delv3/"+e.$store.state.databaseName+"/fee",r.a.stringify(a)).then((function(t){if(console.log(t.data),1==t.data.state){var s={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",s),e.getAllData(),e.$emit("getFeeData")}}))}))},enterEditMode:function(t){this.list=t,this.editMode=!0},editOK:function(){var t=this;this.axios.post("general/edit/"+this.$store.state.databaseName+"/fee",r.a.stringify(this.list)).then((function(e){if(1==e.data.state){var s={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",s),t.getAllData(),t.$emit("getFeeData"),t.list={name:""},t.$refs.form.resetValidation(),t.editMode=!1}}))},cancelEditMode:function(){this.editMode=!1,this.list={name:""},this.$refs.form.resetValidation()}}},d=l,u=(s("12f3"),s("2877")),m=s("6544"),f=s.n(m),h=s("8336"),v=s("b0af"),p=s("99d9"),_=s("62ad"),y=s("2b5d"),g=s("169a"),b=s("ce7e"),k=s("4bd4"),$=s("132d"),x=s("8860"),D=s("da13"),w=s("5d23"),C=s("1baa"),Y=s("0fd9"),M=s("8dd9"),O=s("2fa4"),V=s("8654"),P=Object(u["a"])(d,a,i,!1,null,null,null);e["a"]=P.exports;f()(P,{VBtn:h["a"],VCard:v["a"],VCardActions:p["b"],VCardText:p["d"],VCardTitle:p["e"],VCol:_["a"],VCombobox:y["a"],VDialog:g["a"],VDivider:b["a"],VForm:k["a"],VIcon:$["a"],VList:x["a"],VListItem:D["a"],VListItemContent:w["g"],VListItemGroup:C["a"],VListItemTitle:w["k"],VRow:Y["a"],VSheet:M["a"],VSpacer:O["a"],VTextField:V["a"]})},"56ba":function(t,e,s){"use strict";s("acbe")},"5a0c":function(t,e,s){!function(e,s){t.exports=s()}(0,(function(){"use strict";var t="millisecond",e="second",s="minute",a="hour",i="day",n="week",r="month",o="quarter",c="year",l=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,d=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=function(t,e,s){var a=String(t);return!a||a.length>=e?t:""+Array(e+1-a.length).join(s)+t},m={s:u,z:function(t){var e=-t.utcOffset(),s=Math.abs(e),a=Math.floor(s/60),i=s%60;return(e<=0?"+":"-")+u(a,2,"0")+":"+u(i,2,"0")},m:function(t,e){var s=12*(e.year()-t.year())+(e.month()-t.month()),a=t.clone().add(s,r),i=e-a<0,n=t.clone().add(s+(i?-1:1),r);return Number(-(s+(e-a)/(i?a-n:n-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:r,y:c,w:n,d:i,D:"date",h:a,m:s,s:e,ms:t,Q:o}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h="en",v={};v[h]=f;var p=function(t){return t instanceof b},_=function(t,e,s){var a;if(!t)return h;if("string"==typeof t)v[t]&&(a=t),e&&(v[t]=e,a=t);else{var i=t.name;v[i]=t,a=i}return!s&&a&&(h=a),a||!s&&h},y=function(t,e,s){if(p(t))return t.clone();var a=e?"string"==typeof e?{format:e,pl:s}:e:{};return a.date=t,new b(a)},g=m;g.l=_,g.i=p,g.w=function(t,e){return y(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var b=function(){function u(t){this.$L=this.$L||_(t.locale,null,!0),this.parse(t)}var m=u.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,s=t.utc;if(null===e)return new Date(NaN);if(g.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var a=e.match(l);if(a)return s?new Date(Date.UTC(a[1],a[2]-1,a[3]||1,a[4]||0,a[5]||0,a[6]||0,a[7]||0)):new Date(a[1],a[2]-1,a[3]||1,a[4]||0,a[5]||0,a[6]||0,a[7]||0)}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return g},m.isValid=function(){return!("Invalid Date"===this.$d.toString())},m.isSame=function(t,e){var s=y(t);return this.startOf(e)<=s&&s<=this.endOf(e)},m.isAfter=function(t,e){return y(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<y(t)},m.$g=function(t,e,s){return g.u(t)?this[e]:this.set(s,t)},m.year=function(t){return this.$g(t,"$y",c)},m.month=function(t){return this.$g(t,"$M",r)},m.day=function(t){return this.$g(t,"$W",i)},m.date=function(t){return this.$g(t,"$D","date")},m.hour=function(t){return this.$g(t,"$H",a)},m.minute=function(t){return this.$g(t,"$m",s)},m.second=function(t){return this.$g(t,"$s",e)},m.millisecond=function(e){return this.$g(e,"$ms",t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,o){var l=this,d=!!g.u(o)||o,u=g.p(t),m=function(t,e){var s=g.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return d?s:s.endOf(i)},f=function(t,e){return g.w(l.toDate()[t].apply(l.toDate(),(d?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},h=this.$W,v=this.$M,p=this.$D,_="set"+(this.$u?"UTC":"");switch(u){case c:return d?m(1,0):m(31,11);case r:return d?m(1,v):m(0,v+1);case n:var y=this.$locale().weekStart||0,b=(h<y?h+7:h)-y;return m(d?p-b:p+(6-b),v);case i:case"date":return f(_+"Hours",0);case a:return f(_+"Minutes",1);case s:return f(_+"Seconds",2);case e:return f(_+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(n,o){var l,d=g.p(n),u="set"+(this.$u?"UTC":""),m=(l={},l[i]=u+"Date",l.date=u+"Date",l[r]=u+"Month",l[c]=u+"FullYear",l[a]=u+"Hours",l[s]=u+"Minutes",l[e]=u+"Seconds",l[t]=u+"Milliseconds",l)[d],f=d===i?this.$D+(o-this.$W):o;if(d===r||d===c){var h=this.clone().set("date",1);h.$d[m](f),h.init(),this.$d=h.set("date",Math.min(this.$D,h.daysInMonth())).toDate()}else m&&this.$d[m](f);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[g.p(t)]()},m.add=function(t,o){var l,d=this;t=Number(t);var u=g.p(o),m=function(e){var s=y(d);return g.w(s.date(s.date()+Math.round(e*t)),d)};if(u===r)return this.set(r,this.$M+t);if(u===c)return this.set(c,this.$y+t);if(u===i)return m(1);if(u===n)return m(7);var f=(l={},l[s]=6e4,l[a]=36e5,l[e]=1e3,l)[u]||1,h=this.$d.getTime()+t*f;return g.w(h,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var s=t||"YYYY-MM-DDTHH:mm:ssZ",a=g.z(this),i=this.$locale(),n=this.$H,r=this.$m,o=this.$M,c=i.weekdays,l=i.months,u=function(t,a,i,n){return t&&(t[a]||t(e,s))||i[a].substr(0,n)},m=function(t){return g.s(n%12||12,t,"0")},f=i.meridiem||function(t,e,s){var a=t<12?"AM":"PM";return s?a.toLowerCase():a},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:g.s(o+1,2,"0"),MMM:u(i.monthsShort,o,l,3),MMMM:l[o]||l(this,s),D:this.$D,DD:g.s(this.$D,2,"0"),d:String(this.$W),dd:u(i.weekdaysMin,this.$W,c,2),ddd:u(i.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(n),HH:g.s(n,2,"0"),h:m(1),hh:m(2),a:f(n,r,!0),A:f(n,r,!1),m:String(r),mm:g.s(r,2,"0"),s:String(this.$s),ss:g.s(this.$s,2,"0"),SSS:g.s(this.$ms,3,"0"),Z:a};return s.replace(d,(function(t,e){return e||h[t]||a.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(t,l,d){var u,m=g.p(l),f=y(t),h=6e4*(f.utcOffset()-this.utcOffset()),v=this-f,p=g.m(this,f);return p=(u={},u[c]=p/12,u[r]=p,u[o]=p/3,u[n]=(v-h)/6048e5,u[i]=(v-h)/864e5,u[a]=v/36e5,u[s]=v/6e4,u[e]=v/1e3,u)[m]||v,d?p:g.a(p)},m.daysInMonth=function(){return this.endOf(r).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var s=this.clone(),a=_(t,e,!0);return a&&(s.$L=a),s},m.clone=function(){return g.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},u}();return y.prototype=b.prototype,y.extend=function(t,e){return t(e,b,y),y},y.locale=_,y.isDayjs=p,y.unix=function(t){return y(1e3*t)},y.en=v[h],y.Ls=v,y}))},"5f1f":function(t,e,s){"use strict";s("d07b")},6818:function(t,e,s){"use strict";s("0522")},"9ddc":function(t,e,s){},a6a7:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"accountinglist"},[s("v-btn",{staticClass:"slideBtn",attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.changecolset(e)}}},[s("v-icon",[t._v("mdi-badge-account-horizontal")])],1),s("accountingsearch",{ref:"enterSearch",attrs:{useritems:t.items}}),s("paymentsearch",{ref:"enterPaymentSearch",attrs:{useritems:t.items}}),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("h2",{staticClass:"subheading grey--text"},[s("v-icon",{staticClass:"mx-1"},[t._v("mdi-cash-usd-outline")]),s("span",[t._v("會計管理")])],1)]),s("v-col",{staticClass:"text-right d-flex align-center",attrs:{cols:"12",md:"6"}},[s("v-row",[s("v-col",{attrs:{cols:"8"}}),s("v-col",{attrs:{cols:"4"}},[s("v-text-field",{staticClass:"mx-1 my-0 py-0",attrs:{label:"選擇顯示月份",type:"month","hide-details":""},model:{value:t.nowmonth,callback:function(e){t.nowmonth=e},expression:"nowmonth"}})],1)],1),s("v-menu",{attrs:{transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{color:"primary",dark:""}},a),[t._v("功能")])]}}])},[s("v-list",[s("v-list-item",[s("v-list-item-title",[s("v-btn",{staticClass:"warning",on:{click:function(e){return e.stopPropagation(),t.$refs.enterPaymentSearch.$emit("childFn")}}},[t._v(" 應收帳款查詢功能 "),s("v-icon",{staticClass:"mx-2"},[t._v("mdi-text-box-search")])],1)],1)],1),s("v-list-item",[s("v-list-item-title",[s("v-btn",{staticClass:"warning",on:{click:function(e){return e.stopPropagation(),t.$refs.enterSearch.$emit("childFn")}}},[t._v(" 費用查詢功能 "),s("v-icon",{staticClass:"mx-2"},[t._v("mdi-text-box-search")])],1)],1)],1),s("v-list-item",[s("v-list-item-title",[s("v-btn",{staticClass:"primary",on:{click:function(e){return e.stopPropagation(),t.goPrint(e)}}},[t._v(" 前往列印頁面 "),s("v-icon",{staticClass:"mx-2"},[t._v("mdi-printer")])],1)],1)],1),s("v-list-item",[s("v-list-item-title",[s("v-btn",{staticClass:"success",on:{click:function(e){return e.stopPropagation(),t.printList(e)}}},[t._v(" "+t._s(t.nowmonth)+" 收費一覽表 "),s("v-icon",{staticClass:"mx-2",attrs:{small:""}},[t._v("mdi-format-list-bulleted-square")])],1)],1)],1),s("v-list-item",[s("v-list-item-title",[s("v-btn",{staticClass:"success",on:{click:function(e){return e.stopPropagation(),t.cloneFee(e)}}},[t._v(" 複製"+t._s(t.nowmonth)+" 固定費 "),s("v-icon",{staticClass:"mx-2"},[t._v("mdi-content-copy")])],1)],1)],1)],1)],1)],1)],1),s("v-card",[s("v-card-title",[s("v-spacer")],1),s("v-card-text",[s("v-row",[s("transition",{attrs:{name:"fadeLeft"}},[t.colset?s("v-col",{staticStyle:{"animation-fadeupbig":"0.1s"},attrs:{cols:"colset"}},[s("v-card",[s("v-card-title",{staticClass:"primary lighten-2 white--text"},[t._v(" 病歷資料列表 "),s("v-spacer")],1),s("v-card-text",{staticClass:"mt-2"},[s("v-toolbar",{attrs:{dense:""}},[s("v-text-field",{attrs:{"hide-details":"","prepend-icon":"mdi-magnify","single-line":"",label:"搜尋"},model:{value:t.serachKey,callback:function(e){t.serachKey=e},expression:"serachKey"}})],1),s("div",{staticStyle:{overflow:"auto"}},[s("v-list",{staticClass:"mt-2",attrs:{height:"60vh"}},[s("v-list-item-group",{attrs:{color:"primary"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.searchfilter,(function(e,a){return s("v-list-item",{key:a,on:{click:function(s){return t.getUserAccounting(e)}}},[s("v-list-item-icon",{staticClass:"mr-2"},[s("v-icon",[t._v("mdi-account")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(e.name)+" 床號:"+t._s(e.bed_name))]),s("v-list-item-subtitle",[t._v("病歷號:"+t._s(e.p_code))])],1)],1)})),1)],1)],1)],1)],1)],1):t._e()],1),s("v-col",{attrs:{cols:12-t.colset}},[s("v-card",[s("v-card-title",{staticClass:"primary lighten-2 white--text"},[t._v(" "+t._s(t.selectUser.name)+" 病歷號:"+t._s(t.selectUser.p_code)+" 床號:"+t._s(t.selectUser.bed_name)+" "),s("v-spacer"),Object.keys(t.selectUser).length?s("v-alert",{staticClass:"my-0 mx-2"},[s("v-row",[s("v-text-field",{staticClass:"mx-1",attrs:{label:"退住日期",type:"date","hide-details":""},model:{value:t.selectUser.out_date,callback:function(e){t.$set(t.selectUser,"out_date",e)},expression:"selectUser.out_date"}}),s("v-btn",{staticClass:"error align-self-center",on:{click:function(e){return e.stopPropagation(),t.leaveOut(e)}}},[t._v("退住")])],1)],1):t._e(),Object.keys(t.selectUser).length?s("v-alert",{staticClass:"ma-0"},[s("v-row",[s("v-text-field",{staticClass:"mx-1",attrs:{label:"保證金收款日期",type:"date","hide-details":""},model:{value:t.selectUser.margin_date,callback:function(e){t.$set(t.selectUser,"margin_date",e)},expression:"selectUser.margin_date"}}),s("v-text-field",{attrs:{label:"金額","hide-details":""},model:{value:t.selectUser.margin,callback:function(e){t.$set(t.selectUser,"margin",e)},expression:"selectUser.margin"}}),s("v-btn",{staticClass:"primary align-self-center",on:{click:function(e){return e.stopPropagation(),t.updateUser(e)}}},[t._v("更新")])],1)],1):t._e()],1),s("v-card-text",[s("div",{staticClass:"d-flex"},[t._v(" 每月應收帳款 "),s("v-spacer"),t._v(" 當前未付款總額:"+t._s(t.nopaid)+" ")],1),s("v-simple-table",{staticClass:"text-no-wrap",attrs:{"fixed-header":"",height:"200px"},scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",{staticClass:"text-left"}),s("th",{staticClass:"text-left"},[t._v("月份")]),s("th",{staticClass:"text-left"},[t._v("應收帳款")]),s("th",{staticClass:"text-left"},[t._v("已付款金額")]),s("th",{staticClass:"text-left"},[t._v("當月結餘")]),s("th",{staticClass:"text-left"},[t._v("備註")])])]),t._l(t.paymentItems,(function(e,a){return s("tbody",{key:a},[s("tr",{on:{click:function(s){s.stopPropagation(),t.nowmonth=e.month}}},[s("td",[s("v-icon",{attrs:{color:"success"},on:{click:function(s){return s.stopPropagation(),t.$refs.enterEditPayment.$emit("childFn",e)}}},[t._v("mdi-pencil")])],1),s("td",[t._v(t._s(e.month))]),s("td",[t._v(t._s(t._f("filtermoney")(e.total_price)))]),s("td",[t._v(t._s(t._f("filtermoney")(e.paid_price)))]),s("td",[t._v(" "+t._s(t._f("filtermoney")(e.paid_price-e.total_price))+" ")]),s("td",[t._v(t._s(e.note))])])])}))]},proxy:!0}])}),s("PaymentAdd",{ref:"enterEditPayment",on:{finishEditPayment:t.finishEditPayment}})],1)],1),s("v-card",{staticClass:"mt-2"},[s("v-card-title",{staticClass:"primary lighten-2 white--text"},[t._v(" "+t._s(t.nowmonth)+"月 - 筆數: "+t._s(t.monthfilter.length)+" "),Object.keys(t.selectUser).length?s("AccountingAdd",{ref:"enterEdit",staticClass:"ml-3",on:{finishAdd:t.finishAdd,finishEdit:t.finishEdit}}):t._e(),s("v-spacer"),Object.keys(t.selectUser).length?s("v-alert",{staticClass:"my-0"},[s("v-row",[s("v-select",{attrs:{label:"類別選擇",items:t.namefilter,"hide-details":""},model:{value:t.selectedName,callback:function(e){t.selectedName=e},expression:"selectedName"}}),s("v-text-field",{staticClass:"mx-1",attrs:{label:"單價設定","hide-details":""},model:{value:t.setPrice,callback:function(e){t.setPrice=e},expression:"setPrice"}}),s("v-btn",{staticClass:"primary align-self-center",on:{click:function(e){return e.stopPropagation(),t.setSameKindPrice(e)}}},[t._v("設定同類單價")]),Object.keys(t.selectUser).length?s("v-checkbox",{staticClass:"my-0 ml-2 pa-2 primary alertzone align-self-center",staticStyle:{"border-radius":"4px"},attrs:{label:"約定費不提醒",color:"white",value:"true","hide-details":""},on:{change:t.updateUser},model:{value:t.selectUser.promise_fee,callback:function(e){t.$set(t.selectUser,"promise_fee",e)},expression:"selectUser.promise_fee"}}):t._e()],1)],1):t._e()],1),s("v-card-text",[s("v-simple-table",{staticClass:"text-no-wrap",attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",{staticClass:"text-left"}),s("th",{staticClass:"text-left"},[t._v("建檔日期")]),s("th",{staticClass:"text-left"},[t._v("起算日")]),s("th",{staticClass:"text-left"},[t._v("截止日")]),s("th",{staticClass:"text-left"},[t._v("收費項目")]),s("th",{staticClass:"text-left"},[t._v("單價")]),s("th",{staticClass:"text-left"},[t._v("數量")]),s("th",{staticClass:"text-left"},[t._v("小計")]),s("th",{staticClass:"text-left"},[t._v("類別")]),s("th",{staticClass:"text-left"},[t._v("備註")]),s("th",{staticClass:"text-left"},[t._v("紀錄人")]),s("th",{staticClass:"text-left"},[t._v("修改紀錄")])])]),s("tbody",t._l(t.monthfilter,(function(e,a){return s("tr",{key:e.snkey},[s("td",[s("v-icon",{attrs:{color:"green"},on:{click:function(s){return s.stopPropagation(),t.enterEdit(e)}}},[t._v("mdi-pencil")]),s("v-icon",{attrs:{color:"red"},on:{click:function(s){return s.stopPropagation(),t.finishDel(e)}}},[t._v("mdi-close")]),t._v(" "+t._s(a+1)+". ")],1),s("td",[t._v(t._s(e.date))]),s("td",[t._v(t._s(e.start_day))]),s("td",[t._v(t._s(e.end_day))]),s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(t._f("filtermoney")(e.price)))]),s("td",[t._v(t._s(e.quantity))]),s("td",[t._v(" "+t._s(t._f("filtermoney")(e.price*e.quantity))+" ")]),s("td",[t._v(t._s(e.kind))]),s("td",[t._v(t._s(e.note))]),s("td",[t._v(t._s(e.create_man))]),s("td",[t._v(t._s(e.edit_man))])])})),0)]},proxy:!0}])})],1)],1)],1)],1)],1)],1)],1)},i=[],n=(s("a4d3"),s("99af"),s("4de4"),s("7db0"),s("caad"),s("d81d"),s("4e827"),s("b0c0"),s("a9e3"),s("b680"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("e25e"),s("6062"),s("2532"),s("3ca3"),s("5319"),s("1276"),s("159b"),s("ddb0"),s("ade3")),r=s("2909"),o=s("4328"),c=s.n(o),l=s("55c4"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pop"},[s("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-icon",t._g({attrs:{color:"red lighten-1",large:"",dark:""},on:{click:t.enterAdd}},a),[t._v("mdi-plus-circle")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{class:t.titleClass,attrs:{"primary-title":""}},[t._v(" "+t._s(t.title)+" ")]),s("v-card-text",[s("v-form",{ref:"form"},[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"建檔日期",type:"date",rules:t.emptyRules},model:{value:t.list.date,callback:function(e){t.$set(t.list,"date",e)},expression:"list.date"}})],1),"edit"==t.process?s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"起算日",type:"date",rules:t.emptyRules},model:{value:t.list.start_day,callback:function(e){t.$set(t.list,"start_day",e)},expression:"list.start_day"}})],1):t._e(),"edit"==t.process?s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"截止日",type:"date",rules:t.emptyRules},model:{value:t.list.end_day,callback:function(e){t.$set(t.list,"end_day",e)},expression:"list.end_day"}})],1):t._e(),"edit"==t.process?s("v-col",{attrs:{cols:"12",sm:"3"}}):t._e(),"edit"==t.process?s("v-col",{attrs:{cols:"3"}},[s("v-text-field",{attrs:{label:"收費項目",outlined:"",readonly:""},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1):t._e(),"edit"==t.process?s("v-col",{attrs:{cols:"3"}},[s("v-text-field",{attrs:{label:"種類",outlined:"",readonly:""},model:{value:t.list.kind,callback:function(e){t.$set(t.list,"kind",e)},expression:"list.kind"}})],1):t._e(),"edit"==t.process?s("v-col",{attrs:{cols:"3"}},[s("v-text-field",{attrs:{label:"單價",rules:t.emptyRules},model:{value:t.list.price,callback:function(e){t.$set(t.list,"price",e)},expression:"list.price"}})],1):t._e(),s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"數量",rules:t.emptyRules},model:{value:t.list.quantity,callback:function(e){t.$set(t.list,"quantity",e)},expression:"list.quantity"}})],1),"add"==t.process?s("v-col",{staticClass:"d-flex align-center",attrs:{cols:"10"}},[s("v-autocomplete",{attrs:{label:"收費項目選擇(可複選)","prepend-icon":"mdi-cash-usd-outline",items:t.feeItems,multiple:"","return-object":""},model:{value:t.list.feeArray,callback:function(e){t.$set(t.list,"feeArray",e)},expression:"list.feeArray"}}),s("FeeList",{on:{getFeeData:t.getFeeData}})],1):t._e(),s("v-col",{attrs:{cols:"2"}},["add"==t.process?s("v-checkbox",{attrs:{label:"新住民",value:"true","hide-details":""},model:{value:t.newUser,callback:function(e){t.newUser=e},expression:"newUser"}}):t._e()],1),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"備註"},model:{value:t.list.note,callback:function(e){t.$set(t.list,"note",e)},expression:"list.note"}})],1)],1)],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer"),"add"==t.process?s("v-btn",{staticClass:"error",on:{click:t.addOK}},[t._v("確認新增")]):t._e(),"edit"==t.process?s("v-btn",{staticClass:"success",on:{click:t.editOK}},[t._v("確認修改")]):t._e()],1)],1)],1)],1)},u=[],m=s("5a0c"),f=s.n(m);function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function v(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(Object(s),!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p={components:{FeeList:l["a"]},data:function(){return{dialog:!1,list:{},oldList:{},emptyRules:[function(t){return!!t||"不可空白"}],title:"",titleClass:"",process:"",nowDay:f()().format("YYYY-MM-DD"),firstDay:f()().startOf("month").format("YYYY-MM-DD"),lastDay:f()().endOf("month").format("YYYY-MM-DD"),feeItems:[],newUser:!1}},updated:function(){this.nowDay=f()().format("YYYY-MM-DD")},mounted:function(){this.$on("childFn",(function(t){this.dialog=!0,this.enterEdit(t)})),this.getFeeData()},methods:{enterAdd:function(){this.process="add",this.title="新增費用",this.titleClass="font-weight-black error lighten-2",this.list={date:f()().format("YYYY-MM-DD"),start_day:f()().startOf("month").format("YYYY-MM-DD"),end_day:f()().endOf("month").format("YYYY-MM-DD"),quantity:1,feeArray:[]}},enterEdit:function(t){this.process="edit",this.title="修改費用",this.titleClass="font-weight-black success lighten-2",this.oldList=t,this.list=v({},t)},addOK:function(){if(0==this.list.feeArray.length){var t={msg:"未選擇任何費用!!",type:!0,theme:"warning"};return this.$store.commit("snackbar",t),!1}var e={data:this.list,newUser:this.newUser};this.$refs.form.validate()&&(this.$emit("finishAdd",e),this.dialog=!1)},editOK:function(){if(this.$refs.form.validate()){for(var t in this.list)this.oldList[t]=this.list[t];this.$emit("finishEdit",this.list),this.dialog=!1}},getFeeData:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/fee").then((function(e){var s=e.data.map((function(t){return{snkey:t.snkey,text:"[".concat(t.name,":").concat(t.kind,":$").concat(t.price,"]"),name:t.name,kind:t.kind,price:t.price}}));s=s.sort((function(t,e){return t.kind<e.kind?1:-1})),t.feeItems=s.sort((function(t,e){if(t.kind==e.kind)return parseInt(t.price)<parseInt(e.price)?1:-1}))}))}}},_=p,y=s("2877"),g=s("6544"),b=s.n(g),k=s("c6a6"),$=s("8336"),x=s("b0af"),D=s("99d9"),w=s("ac7c"),C=s("62ad"),Y=s("169a"),M=s("ce7e"),O=s("4bd4"),V=s("132d"),P=s("0fd9"),S=s("2fa4"),I=s("8654"),U=Object(y["a"])(_,d,u,!1,null,null,null),A=U.exports;b()(U,{VAutocomplete:k["a"],VBtn:$["a"],VCard:x["a"],VCardActions:D["b"],VCardText:D["d"],VCardTitle:D["e"],VCheckbox:w["a"],VCol:C["a"],VDialog:Y["a"],VDivider:M["a"],VForm:O["a"],VIcon:V["a"],VRow:P["a"],VSpacer:S["a"],VTextField:I["a"]});var N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pop"},[s("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{class:t.titleClass,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),s("v-card-text",[s("v-form",{ref:"form"},[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"月份",outlined:"",readonly:""},model:{value:t.list.month,callback:function(e){t.$set(t.list,"month",e)},expression:"list.month"}})],1),s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"應收帳款",outlined:"",readonly:""},model:{value:t.list.total_price,callback:function(e){t.$set(t.list,"total_price",e)},expression:"list.total_price"}})],1),s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"付款金額",outlined:"",readonly:""},model:{value:t.total_pay,callback:function(e){t.total_pay=e},expression:"total_pay"}})],1),s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"當月結餘",value:t.total_pay-t.list.total_price,outlined:"",readonly:""}})],1),s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"付款日期",type:"date","append-outer-icon":"mdi-calendar-star"},on:{"click:append-outer":function(e){t.list.paid_date=t.nowDay}},model:{value:t.list.paid_date,callback:function(e){t.$set(t.list,"paid_date",e)},expression:"list.paid_date"}})],1),s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"現金支付(金額)"},model:{value:t.list.paid_price_cash,callback:function(e){t.$set(t.list,"paid_price_cash",e)},expression:"list.paid_price_cash"}})],1),s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"支票支付(金額)"},model:{value:t.list.paid_price_check,callback:function(e){t.$set(t.list,"paid_price_check",e)},expression:"list.paid_price_check"}})],1),s("v-col",{attrs:{cols:"12",sm:"3"}},[s("v-text-field",{attrs:{label:"匯款支付(金額)"},model:{value:t.list.paid_price_remit,callback:function(e){t.$set(t.list,"paid_price_remit",e)},expression:"list.paid_price_remit"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"備註"},model:{value:t.list.note,callback:function(e){t.$set(t.list,"note",e)},expression:"list.note"}})],1)],1)],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer"),"add"==t.process?s("v-btn",{staticClass:"error",on:{click:t.addOK}},[t._v("確認新增")]):t._e(),"edit"==t.process?s("v-btn",{staticClass:"success",on:{click:t.editOK}},[t._v("確認修改")]):t._e()],1)],1)],1)],1)},E=[];function j(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function T(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?j(Object(s),!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var K={components:{FeeList:l["a"]},data:function(){return{dialog:!1,list:{},oldList:{},emptyRules:[function(t){return!!t||"不可空白"}],title:"",titleClass:"",process:"",nowDay:f()().format("YYYY-MM-DD"),firstDay:f()().startOf("month").format("YYYY-MM-DD"),lastDay:f()().endOf("month").format("YYYY-MM-DD"),feeItems:[]}},computed:{total_pay:function(){var t=parseInt(this.list.paid_price_cash)+parseInt(this.list.paid_price_check)+parseInt(this.list.paid_price_remit);return this.list.paid_price=t}},updated:function(){this.nowDay=f()().format("YYYY-MM-DD")},mounted:function(){this.$on("childFn",(function(t){this.dialog=!0,this.enterEdit(t)}))},methods:{enterEdit:function(t){this.process="edit",this.title="修改應收帳款資料",this.titleClass="font-weight-black success lighten-2",this.oldList=t,this.list=T({},t)},editOK:function(){if(this.$refs.form.validate()){for(var t in this.list)this.oldList[t]=this.list[t];this.$emit("finishEditPayment",this.list),this.dialog=!1}}}},F=K,L=Object(y["a"])(F,N,E,!1,null,null,null),q=L.exports;b()(L,{VBtn:$["a"],VCard:x["a"],VCardActions:D["b"],VCardText:D["d"],VCardTitle:D["e"],VCol:C["a"],VDialog:Y["a"],VDivider:M["a"],VForm:O["a"],VRow:P["a"],VSpacer:S["a"],VTextField:I["a"]});var H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"accountingsearch"},[s("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("accountingadd",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"enterEdit",on:{finishEdit:t.finishEdit}}),s("v-form",{ref:"form",staticClass:"mt-3"},[s("v-card",[s("v-card-title",{class:t.titleClass,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"8"}},[s("v-toolbar",{staticClass:"mt-2",attrs:{dense:""}},[s("v-text-field",{attrs:{"hide-details":"","prepend-icon":"mdi-magnify","single-line":"",label:"搜尋"},model:{value:t.serachKey,callback:function(e){t.serachKey=e},expression:"serachKey"}})],1)],1),s("v-col",{attrs:{cols:"4"}},[s("v-toolbar",{staticClass:"mt-2",attrs:{dense:""}},[s("v-text-field",{attrs:{"hide-details":"","prepend-icon":"mdi-table-eye-off","single-line":"",label:"不顯示條件設定"},model:{value:t.disViewKey,callback:function(e){t.disViewKey=e},expression:"disViewKey"}})],1)],1)],1),s("v-card",{staticClass:"mt-2"},[s("v-card-text",[s("v-data-iterator",{attrs:{items:t.searchfilter,"items-per-page":t.itemsPerPage,"footer-props":{itemsPerPageOptions:t.itemsPerPageOptions}},on:{"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[s("v-simple-table",{staticClass:"mt-2 text-no-wrap",attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",{staticClass:"title"},[s("tr",[s("th"),s("th",[t._v("病歷號")]),s("th",[t._v("姓名")]),s("th",[t._v("床號")]),s("th",[t._v("建檔日期")]),s("th",[t._v("起算日")]),s("th",[t._v("截止日")]),s("th",[t._v("收費項目")]),s("th",[t._v("單價")]),s("th",[t._v("數量")]),s("th",[t._v("小計")]),s("th",[t._v("類別")]),s("th",[t._v("備註")]),s("th",[t._v("紀錄人")]),s("th",[t._v("修改紀錄")])])]),s("tbody",t._l(e.items,(function(e,a){return s("tr",{key:a},[s("td",[s("v-menu",{attrs:{transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{color:"primary",dark:""}},a),[t._v("功能")])]}}],null,!0)},[s("v-list",[s("v-list-item",{on:{click:function(s){return t.enterEdit(e)}}},[s("v-list-item-title",[t._v("修改")])],1),s("v-list-item",{on:{click:function(s){return t.finishDel(e)}}},[s("v-list-item-title",[t._v("刪除")])],1)],1)],1)],1),s("td",[t._v(t._s(e.user_p_code))]),s("td",[t._v(t._s(e.user_name))]),s("td",[t._v(t._s(e.bed_name))]),s("td",[t._v(t._s(e.date))]),s("td",[t._v(t._s(e.start_day))]),s("td",[t._v(t._s(e.end_day))]),s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(e.price))]),s("td",[t._v(t._s(e.quantity))]),s("td",[t._v(t._s(e.price*e.quantity))]),s("td",[t._v(t._s(e.kind))]),s("td",[t._v(t._s(e.note))]),s("td",[t._v(t._s(e.create_man))]),s("td",[t._v(t._s(e.edit_man))])])})),0)]},proxy:!0}],null,!0)})]}}])})],1)],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer")],1)],1)],1)],1)],1)},R=[],J={components:{accountingadd:A},props:["useritems"],data:function(){return{dialog:!1,list:{},emptyRules:[function(t){return!!t||"不可空白"}],title:"",titleClass:"",items:[],serachKey:"",disViewKey:"",itemsPerPageOptions:[10,20,30],itemsPerPage:10}},computed:{searchfilter:function(){if(this.items.length>0){var t=this.serachKey.split(" "),e="",s=t.reduce((function(t,s){return t.filter((function(t){return e=JSON.stringify(t).toUpperCase(),e.includes(s.toUpperCase())}))}),this.items);if(this.disViewKey.length>0){var a=this.disViewKey.split(" ");s=a.reduce((function(t,s){return t.filter((function(t){return e=JSON.stringify(t).toUpperCase(),!e.includes(s.toUpperCase())}))}),s)}return s=s.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1})),s}}},mounted:function(){this.$on("childFn",(function(t){this.dialog=!0,this.enterProcess(t)}))},methods:{enterProcess:function(){this.title="費用查詢功能",this.titleClass="font-weight-black warning lighten-2",this.list={},this.getAllData()},getAllData:function(){var t=this;this.axios.post("accounting/getall/"+this.$store.state.databaseName).then((function(e){t.items=e.data.map((function(e){var s=t.useritems.filter((function(t){return e.user_snkey==t.snkey}));return s.length>0&&(e.user_p_code=s[0].p_code,e.user_name=s[0].name,e.bed_name=s[0].bed_name),e}))}))},enterEdit:function(t){this.$refs.enterEdit.$emit("childFn",t)},finishEdit:function(t){var e=this;this.$store.commit("getTime");var s={date:t.date,snkey:t.snkey,start_day:t.start_day,end_day:t.end_day,quantity:t.quantity,price:t.price,note:t.note,edit_man:this.$store.state.pData.username+"("+this.$store.state.time+")"};this.axios.post("general/edit/"+this.$store.state.databaseName+"/accounting",c.a.stringify(s)).then((function(t){if(1==t.data.state){var s={msg:"已修改",type:!0,theme:"success"};e.$store.commit("snackbar",s)}}))},finishDel:function(t){var e=this;this.$confirm("確認刪除?").then((function(s){if(s){t.delman=e.$store.state.pData.username+"("+f()().format("YYYY-MM-DD HH:mm:ss")+")";var a={snkey:t.snkey,tablename:"accounting",info:JSON.stringify(t)};e.axios.post("general/delv3/"+e.$store.state.databaseName+"/accounting",c.a.stringify(a)).then((function(t){if(1==t.data.state){var s={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",s),e.getAllData()}}))}}))}}},B=J,W=(s("5f1f"),s("c377")),z=s("8860"),Z=s("da13"),G=s("5d23"),Q=s("e449"),X=s("1f4f"),tt=s("71d9"),et=Object(y["a"])(B,H,R,!1,null,"8a20e2a6",null),st=et.exports;b()(et,{VBtn:$["a"],VCard:x["a"],VCardActions:D["b"],VCardText:D["d"],VCardTitle:D["e"],VCol:C["a"],VDataIterator:W["a"],VDialog:Y["a"],VDivider:M["a"],VForm:O["a"],VList:z["a"],VListItem:Z["a"],VListItemTitle:G["k"],VMenu:Q["a"],VRow:P["a"],VSimpleTable:X["a"],VSpacer:S["a"],VTextField:I["a"],VToolbar:tt["a"]});var at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"paymentsearch"},[s("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("accountingadd",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"enterEdit",on:{finishEdit:t.finishEdit}}),s("v-form",{ref:"form",staticClass:"mt-3"},[s("v-card",[s("v-card-title",{class:t.titleClass,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"3"}},[s("v-toolbar",{staticClass:"mt-2",attrs:{dense:""}},[s("v-text-field",{attrs:{"hide-details":"","prepend-icon":"mdi-magnify","single-line":"",label:"搜尋"},model:{value:t.serachKey,callback:function(e){t.serachKey=e},expression:"serachKey"}})],1)],1),s("v-col",{attrs:{cols:"3"}},[s("v-toolbar",{staticClass:"mt-2",attrs:{dense:""}},[s("v-text-field",{attrs:{"hide-details":"","prepend-icon":"mdi-table-eye-off","single-line":"",label:"不顯示條件設定"},model:{value:t.disViewKey,callback:function(e){t.disViewKey=e},expression:"disViewKey"}})],1)],1),s("v-col",{attrs:{cols:"3"}},[s("v-toolbar",{staticClass:"mt-2",attrs:{dense:""}},[s("v-text-field",{attrs:{type:"date","hide-details":"",label:"付款日期-開始日期"},model:{value:t.start_day,callback:function(e){t.start_day=e},expression:"start_day"}})],1)],1),s("v-col",{attrs:{cols:"3"}},[s("v-toolbar",{staticClass:"mt-2",attrs:{dense:""}},[s("v-text-field",{attrs:{type:"date","hide-details":"",label:"付款日期-結束日期"},model:{value:t.end_day,callback:function(e){t.end_day=e},expression:"end_day"}})],1)],1)],1),s("v-card",{staticClass:"mt-2"},[s("v-card-text",[t._v(" 目前顯示應收帳款總額:"+t._s(t.filterTotal)+" "),s("v-data-iterator",{attrs:{items:t.searchfilter,"items-per-page":t.itemsPerPage,"footer-props":{itemsPerPageOptions:t.itemsPerPageOptions}},on:{"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[s("v-simple-table",{staticClass:"mt-2 text-no-wrap",attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",{staticClass:"title"},[s("tr",[s("th",[s("v-combobox",{attrs:{label:"排序依據",items:t.sortItems},model:{value:t.sortKey,callback:function(e){t.sortKey=e},expression:"sortKey"}})],1),s("th",[t._v("病歷號")]),s("th",[t._v("姓名")]),s("th",[t._v("床號")]),s("th",[t._v("月份")]),s("th",[t._v("付款日期")]),s("th",[t._v("應收帳款")]),s("th",[t._v("已付款金額")]),s("th",[t._v("當月結餘")]),s("th",[t._v("備註")])])]),s("tbody",t._l(e.items,(function(e,a){return s("tr",{key:a},[s("td",[s("v-menu",{attrs:{transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{color:"primary",dark:""}},a),[t._v("功能")])]}}],null,!0)},[s("v-list",[s("v-list-item",{on:{click:function(s){return t.enterEdit(e)}}},[s("v-list-item-title",[t._v("修改")])],1),s("v-list-item",{on:{click:function(s){return t.finishDel(e)}}},[s("v-list-item-title",[t._v("刪除")])],1)],1)],1)],1),s("td",[t._v(t._s(e.user_p_code))]),s("td",[t._v(t._s(e.user_name))]),s("td",[t._v(t._s(e.bed_name))]),s("td",[t._v(t._s(e.month))]),s("td",[t._v(t._s(e.paid_date))]),s("td",[t._v(t._s(e.total_price))]),s("td",[t._v(t._s(e.paid_price))]),s("td",[t._v(t._s(e.paid_price-e.total_price))]),s("td",[t._v(t._s(e.note))])])})),0)]},proxy:!0}],null,!0)})]}}])})],1)],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer")],1)],1)],1)],1)],1)},it=[],nt={components:{accountingadd:A},props:["useritems"],data:function(){return{dialog:!1,list:{},emptyRules:[function(t){return!!t||"不可空白"}],title:"",titleClass:"",items:[],serachKey:"",disViewKey:"",itemsPerPageOptions:[10,20,30],itemsPerPage:10,start_day:"",end_day:"",sortItems:[{key:"snkey",text:"建檔順序"},{key:"paid_date",text:"付款日期"}],sortKey:{key:"snkey",text:"建檔順序"}}},computed:{filterTotal:function(){if(this.items.length>0)return this.searchfilter.reduce((function(t,e){return parseInt(t)+parseInt(e.total_price)}),0)},searchfilter:function(){var t=this;if(this.items.length>0){var e=this.serachKey.split(" "),s="",a=e.reduce((function(t,e){return t.filter((function(t){return s=JSON.stringify(t).toUpperCase(),s.includes(e.toUpperCase())}))}),this.items);if(this.disViewKey.length>0){var i=this.disViewKey.split(" ");a=i.reduce((function(t,e){return t.filter((function(t){return s=JSON.stringify(t).toUpperCase(),!s.includes(e.toUpperCase())}))}),a)}return""!=this.start_day&&""!=this.end_day&&""!=this.start_time&&""!=this.end_time&&(a=a.filter((function(e){return f()("".concat(t.start_day," ")).unix()<=f()("".concat(e.paid_date," ")).unix()&&f()("".concat(t.end_day," ")).unix()>=f()("".concat(e.paid_date," ")).unix()}))),"snkey"==this.sortKey.key&&(a=a.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1}))),"paid_date"==this.sortKey.key&&(a=a.sort((function(t,e){return t.paid_date<e.paid_date?1:-1}))),a}}},mounted:function(){this.$on("childFn",(function(t){this.dialog=!0,this.enterProcess(t)}))},methods:{enterProcess:function(){this.title="應收帳款查詢功能",this.titleClass="font-weight-black warning lighten-2",this.list={},this.getAllData()},getAllData:function(){var t=this;this.axios.post("payment/getall/"+this.$store.state.databaseName).then((function(e){t.items=e.data.map((function(e){var s=t.useritems.filter((function(t){return e.user_snkey==t.snkey}));return s.length>0&&(e.user_p_code=s[0].p_code,e.user_name=s[0].name,e.bed_name=s[0].bed_name),e}))}))},enterEdit:function(t){this.$refs.enterEdit.$emit("childFn",t)},finishEdit:function(t){var e=this;this.$store.commit("getTime");var s={date:t.date,snkey:t.snkey,start_day:t.start_day,end_day:t.end_day,quantity:t.quantity,price:t.price,note:t.note,edit_man:this.$store.state.pData.username+"("+this.$store.state.time+")"};this.axios.post("general/edit/"+this.$store.state.databaseName+"/accounting",c.a.stringify(s)).then((function(t){if(1==t.data.state){var s={msg:"已修改",type:!0,theme:"success"};e.$store.commit("snackbar",s)}}))},finishDel:function(t){var e=this;this.$confirm("確認刪除?").then((function(s){if(s){t.delman=e.$store.state.pData.username+"("+f()().format("YYYY-MM-DD HH:mm:ss")+")";var a={snkey:t.snkey,tablename:"accounting",info:JSON.stringify(t)};e.axios.post("general/delv3/"+e.$store.state.databaseName+"/accounting",c.a.stringify(a)).then((function(t){if(1==t.data.state){var s={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",s),e.getAllData()}}))}}))}}},rt=nt,ot=(s("6818"),s("2b5d")),ct=Object(y["a"])(rt,at,it,!1,null,"da1fc336",null),lt=ct.exports;function dt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function ut(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(s),!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):dt(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}b()(ct,{VBtn:$["a"],VCard:x["a"],VCardActions:D["b"],VCardText:D["d"],VCardTitle:D["e"],VCol:C["a"],VCombobox:ot["a"],VDataIterator:W["a"],VDialog:Y["a"],VDivider:M["a"],VForm:O["a"],VList:z["a"],VListItem:Z["a"],VListItemTitle:G["k"],VMenu:Q["a"],VRow:P["a"],VSimpleTable:X["a"],VSpacer:S["a"],VTextField:I["a"],VToolbar:tt["a"]}),s("9ddc");var mt={components:{feelist:l["a"],AccountingAdd:A,PaymentAdd:q,accountingsearch:st,paymentsearch:lt},data:function(){return{items:[],serachKey:"",model:"",selectUser:[],nowday:f()().format("YYYY-MM-DD"),nowmonth:f()().format("YYYY-MM"),accountingItems:[],paymentItems:[],colset:3,matchListAccountings:[],matchListPayments:[],selectedName:"",setPrice:0}},filters:{filtermoney:function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,(function(t,e,s){var a=e&&"."!==t&&(s.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return a})))}},computed:{namefilter:function(){this.selectedName="";var t=new Set;return this.monthfilter.forEach((function(e){t.add(e["name"])})),Object(r["a"])(t)},searchfilter:function(){var t=this.serachKey.split(" "),e="";return t.reduce((function(t,s){return t.filter((function(t){if(e=JSON.stringify(t).toUpperCase(),e.includes(s.toUpperCase()))return t}))}),this.items)},monthfilter:function(){var t=this,e=this.accountingItems.filter((function(e){return e.date.includes(t.nowmonth)}));return e=e.sort((function(t,e){return parseInt(t.price)<parseInt(e.price)?1:-1})),e=e.sort((function(t,e){if(t.price==e.price)return t.name<e.name?1:-1})),e.sort((function(t,e){if(t.name==e.name)return t.date>e.date?1:-1}))},nopaid:function(){return this.paymentItems.reduce((function(t,e){return parseInt(t)+(parseInt(e.total_price)-parseInt(e.paid_price))}),0)}},watch:{monthfilter:function(t){var e=this,s=f()(this.nowmonth).format("MM");if(s>=5&&s<=9){var a=t.some((function(t){return"159"==t.fee_snkey}));a||!t.length||this.selectUser.promise_fee||this.$confirm("本月尚未新增特別約定事項-1,需要新增嗎?").then((function(t){if(t){var s={date:f()(e.nowmonth).format("YYYY-MM-01"),quantity:1,feeArray:[{snkey:"159",price:"500",kind:"特別約定事項-1"}]};e.finishAdd(s)}}))}}},mounted:function(){this.auth=this.$store.state.pData,this.getAllData()},methods:{setSameKindPrice:function(){var t=this;if(0==this.selectedName.length){var e={msg:"未選擇任何收費項目",type:!0,theme:"warning"};return this.$store.commit("snackbar",e),!1}this.$confirm("確認將目前顯示會計帳中 ["+this.selectedName+"] 價格全部修改為: $"+this.setPrice).then((function(e){if(e){t.$store.commit("getTime");var s=t.monthfilter.filter((function(e){if(e.name===t.selectedName)return e.price=t.setPrice,e.edit_man=t.$store.state.pData.username+"("+t.$store.state.time+")"+e.edit_man,e})),a=s.map((function(t){var e=ut({},t);return delete e["name"],delete e["kind"],e}));t.axios.post("general/editMulti/"+t.$store.state.databaseName+"/accounting",c.a.stringify(a)).then((function(e){if(console.log(e.data),1==e.data.state){var s={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",s),t.computeMonthTotal()}}))}}))},printList:function(){var t=this;this.$confirm("確認顯示收費一覽表畫面?").then((function(e){if(e){var s={month:t.nowmonth,users:t.items},a=t.$router.resolve({path:"/print/accountinglistprint",query:{data:JSON.stringify(s)}});window.open(a.href,"_blank")}}))},goPrint:function(){this.$router.push("/main/printmanager/accountingprintmanage")},changecolset:function(){3==this.colset?this.colset=0:this.colset=3},cloneFee:function(){var t=this;this.$confirm("確認複製"+this.nowmonth+"月固定費到"+f()(this.nowmonth).add(1,"month").format("YYYY-MM")+"月?").then((function(e){e&&t.axios.post("accounting/getAll/"+t.$store.state.databaseName+"/accounting").then((function(e){var s=e.data.filter((function(e){return f()(e.date).format("YYYY-MM")==t.nowmonth&&e.kind.includes("固定費類")&&parseInt(e.price)>0}));s=s.filter((function(e){var s=t.items.find((function(t){return t.snkey==e.user_snkey&&""!=t.bed_name&&null!=t.bed_name}));if(void 0!=s)return e})),t.$store.commit("getTime");if(s.length){var a=s.map((function(e){return e.date=e.start_day=f()(e.date).add(1,"month").format("YYYY-MM-01"),e.end_day=f()(e.date).endOf("month").format("YYYY-MM-DD"),e.create_man=t.$store.state.pData.username+"("+t.$store.state.time+")",delete e.snkey,delete e.edit_man,delete e.name,delete e.kind,delete e.unit,e}));t.axios.post("general/addMulti/"+t.$store.state.databaseName+"/accounting",c.a.stringify(a)).then((function(e){if(1==e.data.state){var s={msg:"複製已完成",type:!0,theme:"success"};t.$store.commit("snackbar",s)}}))}else{var i={msg:"暫無符合的資料,請再確認!!",type:!0,theme:"warning"};t.$store.commit("snackbar",i)}}))}))},sortBybedname:function(){this.items=this.items.sort((function(t,e){t=t.bed_name,e=e.bed_name;return t===e?0:null===t?1:null===e?-1:t>e?1:-1}))},getAllData:function(){var t=this;this.axios.post("user/getAll/"+this.$store.state.databaseName).then((function(e){t.items=e.data,t.sortBybedname()}))},getAccounting:function(){var t=this;this.axios.post("accounting/getAccountingByUserSnkey/"+this.$store.state.databaseName+"/"+this.selectUser.snkey).then((function(e){e.data.length>0?(t.accountingItems=e.data,t.computeMonthTotal()):t.accountingItems=t.paymentItems=[]}))},computeMonthTotal:function(){var t=this,e=this.accountingItems;if(0==e.length)return!1;var s=e.map((function(t){return f()(t.date).format("YYYY-MM")})),a=new Set(s);s=Object(r["a"])(a);var i=[];s.forEach((function(t){i[t]=e.filter((function(e){return e.date.includes(t)}))}));var n=[];s.forEach((function(e){var s=i[e].reduce((function(t,e){return t+e.price*e.quantity}),0);t.$store.commit("getTime"),n.push({user_snkey:t.selectUser.snkey,month:e,total_price:s,create_man:t.$store.state.pData.username+"("+t.$store.state.time+")"})})),this.axios.post("payment/autoAddEdit/"+this.$store.state.databaseName+"/payment",c.a.stringify(n)).then((function(e){t.getPayment()}))},getPayment:function(){var t=this,e={key:"user_snkey",value:this.selectUser.snkey};this.axios.post("general/getByKey/"+this.$store.state.databaseName+"/payment",c.a.stringify(e)).then((function(e){t.paymentItems=e.data,t.sortBy(),t.paymentItems.length>0&&t.checkPayment()}))},checkPayment:function(){var t=this;this.paymentItems.forEach((function(e){var s=t.accountingItems.filter((function(t){return t.date.includes(e.month)}));0==s.length&&t.axios.post("general/del/"+t.$store.state.databaseName+"/payment",c.a.stringify(e)).then((function(e){t.getPayment()}))}))},sortBy:function(){this.paymentItems=this.paymentItems.sort((function(t,e){return t.month<e.month?1:-1}))},getUserAccounting:function(t){this.selectUser=t,this.getAccounting()},enterEdit:function(t){this.$refs.enterEdit.$emit("childFn",t)},rebuildDay:function(t){var e=this,s=t.data,a=[];return this.$store.commit("getTime"),s.feeArray.forEach((function(i,n){var r=f()(s.date).startOf("month").format("YYYY-MM-DD"),o=f()(s.date).endOf("month").format("YYYY-MM-DD"),c=i["start_day"]=i["end_day"]=s.date;if("固定費類"==i.kind&&(c=f()(s.date).add(-1,"month").endOf("month").format("YYYY-MM-DD"),i["start_day"]=r,i["end_day"]=o),"入住保證金"==i.kind&&(c=f()(s.date).add(-1,"month").startOf("month").format("YYYY-MM-DD")),a.push({user_snkey:e.selectUser.snkey,fee_snkey:i.snkey,date:c,start_day:i.start_day,end_day:i.end_day,quantity:s.quantity,price:i.price,note:s.note,create_man:e.$store.state.pData.username+"("+e.$store.state.time+")"}),t.newUser&&"固定費類"==i.kind){var l=f()(s.date).add(-1,"day").format("DD"),d=parseInt(i.price)/parseInt(f()(o).format("DD"));a.push({user_snkey:e.selectUser.snkey,fee_snkey:i.snkey,date:c,start_day:f()(i.start_day).format("YYYY-MM-DD"),end_day:f()(s.date).add(-1,"day").format("YYYY-MM-DD"),quantity:s.quantity,price:-(l*Math.floor(d)).toFixed(0),note:"(A)新住民未入住前扣除費 ".concat(f()(i.start_day).format("MM/DD"),"~").concat(f()(s.date).add(-1,"day").format("MM/DD")," (").concat(l," 天)"),create_man:e.$store.state.pData.username+"("+e.$store.state.time+")"})}})),a},postAccountingData:function(t){var e=this,s=new Promise((function(t,s){e.axios.post("general/getAll/"+e.$store.state.databaseName+"/fee").then((function(e){t(e.data)})).catch((function(t){s(t)}))})),a=this;s.then((function(e){t=t.filter((function(t){if(f()(t.date).format("DD")>=26){var s=e.find((function(e){return e.snkey==t.fee_snkey}));"固定費類"!=s.kind&&(t.note=t.date+"調整為"+f()(t.date).add(1,"month").format("YYYY-MM-01"),t.date=f()(t.date).add(1,"month").format("YYYY-MM-01"))}return t})),a.axios.post("general/addMulti/"+a.$store.state.databaseName+"/accounting",c.a.stringify(t)).then((function(t){if(1==t.data.state){var e={msg:"已新增",type:!0,theme:"success"};a.$store.commit("snackbar",e),a.getAccounting()}}))}))},finishAdd:function(t){var e=this.rebuildDay(t);this.postAccountingData(e)},finishEdit:function(t){var e=this;this.$store.commit("getTime");var s={date:t.date,snkey:t.snkey,start_day:t.start_day,end_day:t.end_day,quantity:t.quantity,price:t.price,note:t.note,edit_man:this.$store.state.pData.username+"("+this.$store.state.time+")"};this.axios.post("general/edit/"+this.$store.state.databaseName+"/accounting",c.a.stringify(s)).then((function(t){if(1==t.data.state){var s={msg:"已修改",type:!0,theme:"success"};e.$store.commit("snackbar",s),e.computeMonthTotal()}}))},finishDel:function(t){var e=this;this.$confirm("確認刪除?").then((function(s){if(s){t.delman=e.$store.state.pData.username+"("+f()().format("YYYY-MM-DD HH:mm:ss")+")";var a={snkey:t.snkey,tablename:"accounting",info:JSON.stringify(t)};e.axios.post("general/delv3/"+e.$store.state.databaseName+"/accounting",c.a.stringify(a)).then((function(t){if(console.log(t.data),1==t.data.state){var s={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",s),e.getAccounting()}}))}}))},leaveOut:function(){var t=this;if("0000-00-00"==this.selectUser.out_date){var e={msg:"未指定退住日期",type:!0,theme:"warning"};return this.$store.commit("snackbar",e),!1}this.$confirm("確認退住結帳作業?").then((function(e){if(e){var s=f()(t.selectUser.out_date).add(-1,"month").endOf("month").format("YYYY-MM-DD"),a=Object(r["a"])(t.accountingItems);a=a.filter((function(t){return t.date.includes(s)&&"固定費類"==t.kind&&parseInt(t.price)>0}));var i=f()(t.selectUser.out_date).format("MM/DD"),n=f()(t.selectUser.out_date).endOf("month").format("MM/DD"),o=f()(t.selectUser.out_date).endOf("month").format("DD")-f()(t.selectUser.out_date).add(-1,"day").format("DD");console.log(i,n,o);var l=[];a.filter((function(e){var s=parseInt(e.price)/parseInt(f()(n).format("DD"));l.push({user_snkey:e.user_snkey,fee_snkey:e.fee_snkey,date:f()(t.selectUser.out_date).format("YYYY-MM-DD"),start_day:f()(t.selectUser.out_date).format("YYYY-MM-DD"),end_day:f()(t.selectUser.out_date).endOf("month").format("YYYY-MM-DD"),quantity:e.quantity,price:-(o*Math.floor(s)).toFixed(0),note:"(A)退住扣除費 ".concat(i,"~").concat(n," 共").concat(o,"天)"),create_man:t.$store.state.pData.username+"("+t.$store.state.time+")"})})),t.postAccountingData(l),l={snkey:t.selectUser.snkey,out_date:t.selectUser.out_date,edit_man:""},t.axios.post("general/edit/"+t.$store.state.databaseName+"/user",c.a.stringify(l)).then((function(e){if(1==e.data.state){var s={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",s)}}))}}))},updateUser:function(){var t=this,e={snkey:this.selectUser.snkey,promise_fee:this.selectUser.promise_fee,margin_date:this.selectUser.margin_date,margin:this.selectUser.margin,edit_man:""};this.axios.post("general/edit/"+this.$store.state.databaseName+"/user",c.a.stringify(e)).then((function(e){if(1==e.data.state){var s={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",s)}}))},finishEditPayment:function(t){var e=this;this.$store.commit("getTime"),t["edit_man"]=this.$store.state.pData.username+"("+this.$store.state.time+")",this.axios.post("general/edit/"+this.$store.state.databaseName+"/payment",c.a.stringify(t)).then((function(t){if(1==t.data.state){var s={msg:"已修改",type:!0,theme:"success"};e.$store.commit("snackbar",s)}}))}}},ft=mt,ht=(s("56ba"),s("0798")),vt=s("1baa"),pt=s("34c3"),_t=s("b974"),yt=Object(y["a"])(ft,a,i,!1,null,null,null);e["default"]=yt.exports;b()(yt,{VAlert:ht["a"],VBtn:$["a"],VCard:x["a"],VCardText:D["d"],VCardTitle:D["e"],VCheckbox:w["a"],VCol:C["a"],VIcon:V["a"],VList:z["a"],VListItem:Z["a"],VListItemContent:G["g"],VListItemGroup:vt["a"],VListItemIcon:pt["a"],VListItemSubtitle:G["j"],VListItemTitle:G["k"],VMenu:Q["a"],VRow:P["a"],VSelect:_t["a"],VSimpleTable:X["a"],VSpacer:S["a"],VTextField:I["a"],VToolbar:tt["a"]})},acbe:function(t,e,s){},d07b:function(t,e,s){},ffb1:function(t,e,s){}}]);
//# sourceMappingURL=chunk-0bc4d7e8.fec5c944.js.map