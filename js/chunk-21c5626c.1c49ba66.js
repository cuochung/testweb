(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21c5626c"],{"0798c":function(t,e,i){"use strict";i("bc60")},"09fa":function(t,e,i){"use strict";i("269f")},"10c5":function(t,e,i){"use strict";i("f3fc")},1184:function(t,e,i){},"20b5":function(t,e,i){},"236b":function(t,e,i){},"269f":function(t,e,i){},"35b9":function(t,e,i){},"459e":function(t,e,i){"use strict";i("c130")},"48e6":function(t,e,i){},"55a5":function(t,e,i){"use strict";i("e9f9")},"561d":function(t,e,i){},"5a0c":function(t,e,i){!function(e,i){t.exports=i()}(0,(function(){"use strict";var t="millisecond",e="second",i="minute",s="hour",a="day",n="week",r="month",o="quarter",l="year",c=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,d=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m=function(t,e,i){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(i)+t},u={s:m,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),s=Math.floor(i/60),a=i%60;return(e<=0?"+":"-")+m(s,2,"0")+":"+m(a,2,"0")},m:function(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(i,r),a=e-s<0,n=t.clone().add(i+(a?-1:1),r);return Number(-(i+(e-s)/(a?s-n:n-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return{M:r,y:l,w:n,d:a,D:"date",h:s,m:i,s:e,ms:t,Q:o}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h="en",v={};v[h]=f;var p=function(t){return t instanceof b},g=function(t,e,i){var s;if(!t)return h;if("string"==typeof t)v[t]&&(s=t),e&&(v[t]=e,s=t);else{var a=t.name;v[a]=t,s=a}return!i&&s&&(h=s),s||!i&&h},y=function(t,e,i){if(p(t))return t.clone();var s=e?"string"==typeof e?{format:e,pl:i}:e:{};return s.date=t,new b(s)},_=u;_.l=g,_.i=p,_.w=function(t,e){return y(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var b=function(){function m(t){this.$L=this.$L||g(t.locale,null,!0),this.parse(t)}var u=m.prototype;return u.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(_.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(c);if(s)return i?new Date(Date.UTC(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)):new Date(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)}return new Date(e)}(t),this.init()},u.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},u.$utils=function(){return _},u.isValid=function(){return!("Invalid Date"===this.$d.toString())},u.isSame=function(t,e){var i=y(t);return this.startOf(e)<=i&&i<=this.endOf(e)},u.isAfter=function(t,e){return y(t)<this.startOf(e)},u.isBefore=function(t,e){return this.endOf(e)<y(t)},u.$g=function(t,e,i){return _.u(t)?this[e]:this.set(i,t)},u.year=function(t){return this.$g(t,"$y",l)},u.month=function(t){return this.$g(t,"$M",r)},u.day=function(t){return this.$g(t,"$W",a)},u.date=function(t){return this.$g(t,"$D","date")},u.hour=function(t){return this.$g(t,"$H",s)},u.minute=function(t){return this.$g(t,"$m",i)},u.second=function(t){return this.$g(t,"$s",e)},u.millisecond=function(e){return this.$g(e,"$ms",t)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(t,o){var c=this,d=!!_.u(o)||o,m=_.p(t),u=function(t,e){var i=_.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return d?i:i.endOf(a)},f=function(t,e){return _.w(c.toDate()[t].apply(c.toDate(),(d?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},h=this.$W,v=this.$M,p=this.$D,g="set"+(this.$u?"UTC":"");switch(m){case l:return d?u(1,0):u(31,11);case r:return d?u(1,v):u(0,v+1);case n:var y=this.$locale().weekStart||0,b=(h<y?h+7:h)-y;return u(d?p-b:p+(6-b),v);case a:case"date":return f(g+"Hours",0);case s:return f(g+"Minutes",1);case i:return f(g+"Seconds",2);case e:return f(g+"Milliseconds",3);default:return this.clone()}},u.endOf=function(t){return this.startOf(t,!1)},u.$set=function(n,o){var c,d=_.p(n),m="set"+(this.$u?"UTC":""),u=(c={},c[a]=m+"Date",c.date=m+"Date",c[r]=m+"Month",c[l]=m+"FullYear",c[s]=m+"Hours",c[i]=m+"Minutes",c[e]=m+"Seconds",c[t]=m+"Milliseconds",c)[d],f=d===a?this.$D+(o-this.$W):o;if(d===r||d===l){var h=this.clone().set("date",1);h.$d[u](f),h.init(),this.$d=h.set("date",Math.min(this.$D,h.daysInMonth())).toDate()}else u&&this.$d[u](f);return this.init(),this},u.set=function(t,e){return this.clone().$set(t,e)},u.get=function(t){return this[_.p(t)]()},u.add=function(t,o){var c,d=this;t=Number(t);var m=_.p(o),u=function(e){var i=y(d);return _.w(i.date(i.date()+Math.round(e*t)),d)};if(m===r)return this.set(r,this.$M+t);if(m===l)return this.set(l,this.$y+t);if(m===a)return u(1);if(m===n)return u(7);var f=(c={},c[i]=6e4,c[s]=36e5,c[e]=1e3,c)[m]||1,h=this.$d.getTime()+t*f;return _.w(h,this)},u.subtract=function(t,e){return this.add(-1*t,e)},u.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var i=t||"YYYY-MM-DDTHH:mm:ssZ",s=_.z(this),a=this.$locale(),n=this.$H,r=this.$m,o=this.$M,l=a.weekdays,c=a.months,m=function(t,s,a,n){return t&&(t[s]||t(e,i))||a[s].substr(0,n)},u=function(t){return _.s(n%12||12,t,"0")},f=a.meridiem||function(t,e,i){var s=t<12?"AM":"PM";return i?s.toLowerCase():s},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:_.s(o+1,2,"0"),MMM:m(a.monthsShort,o,c,3),MMMM:c[o]||c(this,i),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:m(a.weekdaysMin,this.$W,l,2),ddd:m(a.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(n),HH:_.s(n,2,"0"),h:u(1),hh:u(2),a:f(n,r,!0),A:f(n,r,!1),m:String(r),mm:_.s(r,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:s};return i.replace(d,(function(t,e){return e||h[t]||s.replace(":","")}))},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(t,c,d){var m,u=_.p(c),f=y(t),h=6e4*(f.utcOffset()-this.utcOffset()),v=this-f,p=_.m(this,f);return p=(m={},m[l]=p/12,m[r]=p,m[o]=p/3,m[n]=(v-h)/6048e5,m[a]=(v-h)/864e5,m[s]=v/36e5,m[i]=v/6e4,m[e]=v/1e3,m)[u]||v,d?p:_.a(p)},u.daysInMonth=function(){return this.endOf(r).$D},u.$locale=function(){return v[this.$L]},u.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),s=g(t,e,!0);return s&&(i.$L=s),i},u.clone=function(){return _.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},m}();return y.prototype=b.prototype,y.extend=function(t,e){return t(e,b,y),y},y.locale=g,y.isDayjs=p,y.unix=function(t){return y(1e3*t)},y.en=v[h],y.Ls=v,y}))},"5af7":function(t,e,i){"use strict";i("561d")},"5bb2":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"medicinerecordlist"},[i("medicalPrintOption",{ref:"enterEdit",attrs:{medicalRecordItems:t.medicalRecordItems,eatMedicineTimeItems:t.eatMedicineTimeItems}}),i("v-card",{staticClass:"mt-2"},[i("v-card-title",[i("v-row",[i("v-col",{attrs:{cols:"12",md:"6"}},[i("h2",{staticClass:"subheading grey--text"},[i("v-icon",{staticClass:"mx-1"},[t._v("fas fa-file-alt")]),i("span",[t._v(" "+t._s(this.$store.state.uData.p_code)+" / "+t._s(this.$store.state.uData.name)+" ")]),i("span",[t._v("就醫及藥品紀錄維護")])],1)]),i("v-col",{staticClass:"text-right py-0",attrs:{cols:"12",md:"6"}},[i("v-row",[i("v-col",{attrs:{cols:"6"}}),i("v-col",{staticClass:"d-flex align-center",attrs:{cols:"6"}},[i("v-text-field",{attrs:{label:"列印月份設定",type:"month","hide-details":""},model:{value:t.printMonth,callback:function(e){t.printMonth=e},expression:"printMonth"}}),i("v-menu",{attrs:{transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-btn",t._g({attrs:{color:"primary",dark:""}},s),[t._v("功能")])]}}])},[i("v-list",[i("v-list-item",[i("v-list-item-title",[i("v-btn",{staticClass:"primary",on:{click:function(e){return e.stopPropagation(),t.printConfirm(e)}}},[i("v-icon",{staticClass:"mx-2"},[t._v("mdi-pill")]),t._v(" 列印藥單 每頁 "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.printPerPage,expression:"printPerPage"}],staticStyle:{width:"20px"},attrs:{type:"text",maxlength:"2"},domProps:{value:t.printPerPage},on:{click:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.printPerPage=e.target.value)}}}),t._v("筆 ")],1)],1)],1),i("v-list-item",[i("v-list-item-title",[i("v-btn",{staticClass:"primary",on:{click:function(e){return e.stopPropagation(),t.goPrint(e)}}},[i("v-icon",{staticClass:"mx-2"},[t._v("mdi-printer")]),t._v(" 前往多筆列印頁面 ")],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),i("v-card-text",[i("v-card",[i("v-card-title",[i("h3",[t._v("醫院就診紀錄")]),i("v-spacer"),i("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",label:"搜尋"},model:{value:t.serachKey,callback:function(e){t.serachKey=e},expression:"serachKey"}}),i("popupadd",{ref:"editProcess",attrs:{medicalRecordItems:t.medicalRecordItems},on:{getMedicalData:t.getMedicalData}})],1),i("v-card-text",[i("v-data-iterator",{attrs:{items:t.filterItems,"items-per-page":t.itemsPerPage,"footer-props":{itemsPerPageOptions:t.itemsPerPageOptions}},on:{"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[i("v-simple-table",{staticClass:"mt-2 text-no-wrap",attrs:{"fixed-header":"",height:"50vh"},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("th",[i("v-combobox",{attrs:{items:t.sortItems,label:"排序依據"},model:{value:t.sortKey,callback:function(e){t.sortKey=e},expression:"sortKey"}})],1),i("th",[t._v("就診日")]),i("th",[t._v("醫院/科別")]),i("th",[t._v("科別")]),i("th",[t._v("回診日期")]),i("th",[t._v("就診主因")]),i("th",[t._v("紀錄人")]),i("th",[t._v("修改紀錄")])]),i("tbody",t._l(e.items,(function(e,s){return i("tr",{key:s,on:{click:function(i){t.medicalRecordList=e,t.getMedicineRecord()}}},[i("td",[i("v-menu",{attrs:{transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-btn",t._g({attrs:{color:"primary",dark:""},on:{click:function(t){t.stopPropagation()}}},s),[t._v("功能")])]}}],null,!0)},[i("v-list",[i("v-list-item",{on:{click:function(i){return i.stopPropagation(),t.edit(e)}}},[i("v-list-item-title",[t._v("修改")])],1),i("v-list-item",{attrs:{loading:t.loading,disabled:t.loading},on:{click:function(i){return i.stopPropagation(),t.del(e)}}},[i("v-list-item-title",[t._v("刪除")])],1),i("v-list-item",{on:{click:function(i){return i.stopPropagation(),t.print(e)}}},[i("v-list-item-title",[t._v("列印")])],1),i("v-list-item",{on:{click:function(i){return i.stopPropagation(),t.medicalCopy(e)}}},[i("v-list-item-title",[t._v("延續用藥")])],1)],1)],1)],1),i("td",[t._v(t._s(e.date))]),i("td",[t._v(t._s(e.hospital_name))]),i("td",[t._v(t._s(e.branch_name))]),i("td",[t._v(t._s(e.back_date))]),i("td",[t._v(t._s(e.main_cause_of_treatment_name))]),i("td",[t._v(t._s(e.create_man))]),i("td",[t._v(t._s(e.edit_man))])])})),0)]},proxy:!0}],null,!0)})]}}])})],1)],1),i("v-form",{ref:"form"},[i("v-card",{staticClass:"mt-2"},[i("v-card-title",[i("h3",[t._v("用藥內容")]),t.medicalRecordList.date?i("div",[t._v("("+t._s(t.medicalRecordList.date)+" / "+t._s(t.medicalRecordList.hospital_name)+" / "+t._s(t.medicalRecordList.branch_name)+")")]):t._e(),i("v-spacer"),t.medicalRecordList.date?i("MedicineRecordAdd",{ref:"editMedicineProcess",attrs:{medicineRecordItems:t.medicineRecordItems,medicalRecordList:t.medicalRecordList,medicalRecordItems:t.medicalRecordItems},on:{getMedicineRecord:t.getMedicineRecord}}):t._e()],1),i("v-card-text",[i("v-simple-table",{staticClass:"mt-2 text-no-wrap",attrs:{"fixed-header":""}},[i("thead",[i("th"),i("th",[t._v("藥品")]),i("th",[t._v("單位")]),i("th",[t._v("劑量")]),i("th",[t._v("用量")]),i("th",[t._v("給藥次數")]),i("th",[t._v("開始日期")]),i("th",[t._v("藥物用完資訊")]),i("th",[t._v("停藥")]),i("th",[t._v("紀錄人")]),i("th",[t._v("修改紀錄")])]),i("tbody",t._l(t.medicineRecordItems,(function(e,s){return i("tr",{key:s},[i("td",[i("v-icon",{attrs:{color:"green"},on:{click:function(i){return i.stopPropagation(),t.editMedicineRecord(e)}}},[t._v("mdi-pencil")]),i("v-icon",{attrs:{color:"red"},on:{click:function(i){return i.stopPropagation(),t.delMedicineRecord(e)}}},[t._v("mdi-close")])],1),i("td",[t._v(t._s(e.name))]),i("td",[t._v(t._s(e.unit_name))]),i("td",[t._v(t._s(e.dosage))]),i("td",[t._v(t._s(e.quantity))]),i("td",[t._v(t._s(e.medicine_counts))]),i("td",[t._v(t._s(e.start_date))]),i("td",[t._v(t._s(e.medicineEndInfo))]),i("td",{on:{click:function(i){return i.stopPropagation(),t.stopMedicine(e)}}},[i("v-checkbox",{attrs:{value:"true"},model:{value:e.stop,callback:function(i){t.$set(e,"stop",i)},expression:"item.stop"}})],1),i("td",[t._v(t._s(e.create_man))]),i("td",[t._v(t._s(e.edit_man))])])})),0)])],1)],1)],1)],1)],1)],1)},a=[],n=(i("a4d3"),i("e01a"),i("4de4"),i("7db0"),i("caad"),i("c975"),i("d81d"),i("4e827"),i("b0c0"),i("e439"),i("dbb4"),i("b64b"),i("e25e"),i("2532"),i("1276"),i("159b"),i("ade3")),r=i("4328"),o=i.n(r),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"MedicalRecordAdd"},[i("v-dialog",{attrs:{width:"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"red lighten-2",dark:""},on:{click:t.addProcess}},s),[t._v("mdi-plus-circle")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(" "+t._s(t.title)+" "),i("v-spacer"),i("v-btn",{staticClass:"primary",on:{click:function(e){return e.stopPropagation(),t.insertLast(e)}}},[t._v("載入最近一次就診資料")])],1),i("v-card-text",[i("v-alert",{staticClass:"mt-2",attrs:{text:"",color:"primary",outlined:""}},[t._v(" 住民資料 "),i("v-row",[i("v-col",{attrs:{cols:"12",md:"2"}},[i("v-text-field",{attrs:{label:"床位",outlined:"",readonly:"","hide-details":"",value:this.$store.state.uData.bed_name}})],1),i("v-col",{attrs:{cols:"12",md:"2"}},[i("v-text-field",{attrs:{label:"姓名",outlined:"",readonly:"","hide-details":"",value:this.$store.state.uData.name}})],1),i("v-col",{attrs:{cols:"12",md:"2"}},[i("v-text-field",{attrs:{label:"住民證號",outlined:"",readonly:"","hide-details":"",value:this.$store.state.uData.p_code}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{label:"疾病史",outlined:"",readonly:"","hide-details":"",value:t.diagnosis}})],1)],1)],1),i("v-form",{ref:"form",staticClass:"mt-3"},[i("v-row",[i("v-col",{attrs:{cols:"12",md:"2"}},[i("v-text-field",{attrs:{label:"就診日期",type:"date",rules:t.emptyRules},model:{value:t.list.date,callback:function(e){t.$set(t.list,"date",e)},expression:"list.date"}})],1),i("v-col",{attrs:{cols:"12",md:"2"}},[i("v-select",{attrs:{items:t.outpatientItems,label:"診別"},model:{value:t.list.outpatient,callback:function(e){t.$set(t.list,"outpatient",e)},expression:"list.outpatient"}})],1),i("v-col",{attrs:{cols:"12",md:"2"}},[i("v-select",{attrs:{items:t.timeItems,label:"時段"},model:{value:t.list.time,callback:function(e){t.$set(t.list,"time",e)},expression:"list.time"}})],1),i("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",md:"3"}},[i("v-autocomplete",{attrs:{label:"醫院",items:t.hospitalItems,rules:t.emptyRules,"return-object":""},model:{value:t.list.hospitaldata,callback:function(e){t.$set(t.list,"hospitaldata",e)},expression:"list.hospitaldata"}}),i("HospitalList",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.pData.option_set_key,expression:"this.$store.state.pData.option_set_key"}],on:{getSelect:t.getSelect}})],1),i("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",md:"3"}},[i("v-autocomplete",{attrs:{label:"科別",items:t.branchItems,rules:t.emptyRules,"return-object":""},model:{value:t.list.branchdata,callback:function(e){t.$set(t.list,"branchdata",e)},expression:"list.branchdata"}}),i("BranchList",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.pData.option_set_key,expression:"this.$store.state.pData.option_set_key"}],on:{getSelect:t.getSelect}})],1),i("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",md:"2"}},[i("v-autocomplete",{attrs:{label:"醫生",items:t.doctorItems,rules:t.emptyRules,"return-object":""},model:{value:t.list.doctordata,callback:function(e){t.$set(t.list,"doctordata",e)},expression:"list.doctordata"}}),i("DoctorList",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.pData.option_set_key,expression:"this.$store.state.pData.option_set_key"}],on:{getSelect:t.getSelect}})],1),i("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",md:"7"}},[i("v-autocomplete",{attrs:{label:"就診主因",items:t.main_cause_of_treatmentItems,rules:t.emptyRules,"return-object":""},model:{value:t.list.main_cause_of_treatmentdata,callback:function(e){t.$set(t.list,"main_cause_of_treatmentdata",e)},expression:"list.main_cause_of_treatmentdata"}}),i("MainCauseOfTreatmentList",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.pData.option_set_key,expression:"this.$store.state.pData.option_set_key"}],on:{getSelect:t.getSelect}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"回診日期",type:"date"},model:{value:t.list.back_date,callback:function(e){t.$set(t.list,"back_date",e)},expression:"list.back_date"}})],1),i("v-col",{attrs:{cols:"12",md:"2"}},[i("v-select",{attrs:{items:t.carItems,label:"使用車輛"},model:{value:t.list.car,callback:function(e){t.$set(t.list,"car",e)},expression:"list.car"}})],1),i("v-col",{attrs:{cols:"12",md:"2"}},[i("v-select",{attrs:{items:t.accompanyItems,label:"陪診人員"},model:{value:t.list.accompany,callback:function(e){t.$set(t.list,"accompany",e)},expression:"list.accompany"}})],1),i("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"3"}},[i("v-combobox",{attrs:{items:t.carryitemsItems,multiple:"",label:"攜帶物品"},model:{value:t.list.carryArray,callback:function(e){t.$set(t.list,"carryArray",e)},expression:"list.carryArray"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-alert",{attrs:{color:"primary",outlined:""}},[i("h4",[t._v("使用中管路(名稱-到期日)")]),t._l(t.matchPipelineItems,(function(e,s){return i("v-chip",{key:s,staticClass:"ma-2",attrs:{color:"primary"}},[t._v(" "+t._s(e.name)+" - "+t._s(e.end_date)+" ")])}))],2)],1),i("v-col",{attrs:{cols:"12"}},[i("v-textarea",{attrs:{label:"原因狀況描述"},model:{value:t.list.description,callback:function(e){t.$set(t.list,"description",e)},expression:"list.description"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-textarea",{attrs:{label:"就醫情形回覆"},model:{value:t.list.response,callback:function(e){t.$set(t.list,"response",e)},expression:"list.response"}})],1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer"),"edit"==t.processType?i("v-checkbox",{staticClass:"mb-3 mr-2 pa-2 error white-font",attrs:{label:"會計項目判斷",color:"white",value:"true","hide-details":""},model:{value:t.accountingCheck,callback:function(e){t.accountingCheck=e},expression:"accountingCheck"}}):t._e(),"add"==t.processType?i("v-btn",{staticClass:"primary",attrs:{loading:t.loading,disabled:t.loading},on:{click:t.addOK}},[t._v("確認新增")]):t._e(),"edit"==t.processType?i("v-btn",{staticClass:"success",attrs:{loading:t.loading,disabled:t.loading},on:{click:t.editOK}},[t._v("確認修改")]):t._e()],1)],1)],1)],1)},c=[],d=(i("a434"),i("d3b7"),i("07ac"),i("25f0"),i("e94a")),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hospitallist"},[i("v-dialog",{attrs:{width:"70%"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"brown",dark:"",large:""},on:{click:t.enterProcess}},s),[t._v("mdi-cog-box")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),i("v-card-text",[i("v-form",{ref:"form",staticClass:"mt-3"},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-hospital",label:"醫院名 or 搜尋",rules:t.emptyRules},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"primary",attrs:{block:""},on:{click:t.addOK}},[t._v("確認新增")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"success",attrs:{block:""},on:{click:t.editOK}},[t._v("確認修改")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"error mt-1",attrs:{block:""},on:{click:t.cancelEditMode}},[t._v("取消修改")])],1)],1)],1),i("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"my-2",staticStyle:{overflow:"auto"}},[i("v-card-text",[i("v-sheet",{staticClass:"text-center pa-2",attrs:{color:"green lighten-3",outlined:""}},[i("h3",{staticClass:"white--text"},[t._v("已建構醫院列表(點選可修改)")])]),i("v-list",{attrs:{height:"50vh"}},[i("v-list-item-group",t._l(t.filterItems,(function(e,s){return i("v-list-item",{key:s},[i("v-list-item-content",{on:{click:function(i){return i.stopPropagation(),t.enterEditMode(e)}}},[i("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1),i("v-icon",{attrs:{color:"red"},on:{click:function(i){return i.stopPropagation(),t.del(e)}}},[t._v("mdi-close")])],1)})),1)],1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer")],1)],1)],1)],1)},u=[],f=i("5a0c"),h=i.n(f),v={data:function(){return{items:[],list:{name:""},dialog:!1,title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],editMode:!1}},mounted:function(){this.getAllData()},computed:{filterItems:function(){var t=this;if(this.items.length>0){var e="";return this.items.filter((function(i){if(e=JSON.stringify(i).toUpperCase(),e.includes(t.list.name.toUpperCase()))return i}))}}},methods:{getAllData:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/hospital").then((function(e){var i=e.data.map((function(t){return{snkey:t.snkey,name:t.name,text:t.name}}));t.items=i.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1}))}))},enterProcess:function(){this.title="醫院資料管理",this.titleStyle="font-weight-black primary lighten-2"},addOK:function(){var t=this;if(this.$refs.form.validate()){var e=this.items.find((function(e){return t.list.name==e.name}));if(void 0!=e){var i={msg:"不可重覆!!",type:!0,theme:"warning"};return void this.$store.commit("snackbar",i)}this.$store.commit("getTime"),this.list["create_man"]=this.$store.state.pData.username+"("+this.$store.state.time+")",this.axios.post("general/add/"+this.$store.state.databaseName+"/hospital",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.$emit(""),t.getAllData(),t.list.name="",t.$refs.form.resetValidation(),t.$emit("getSelect")}}))}},del:function(t){var e=this;this.$confirm("確認刪除?").then((function(i){t.delman=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var s={snkey:t.snkey,tablename:"hospital",info:JSON.stringify(t)};i&&e.axios.post("general/delv3/"+e.$store.state.databaseName+"/hospital",o.a.stringify(s)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getAllData(),e.$emit("getSelect")}}))}))},enterEditMode:function(t){this.list.snkey=t.snkey,this.list.name=t.text,this.list.edit_man="",this.editMode=!0},editOK:function(){var t=this;this.axios.post("general/edit/"+this.$store.state.databaseName+"/hospital",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.getAllData(),t.$emit("getSelect"),t.list={name:""},t.$refs.form.resetValidation(),t.editMode=!1}}))},cancelEditMode:function(){this.editMode=!1,this.list={name:""},this.$refs.form.resetValidation()}}},p=v,g=(i("d9a2"),i("2877")),y=i("6544"),_=i.n(y),b=i("8336"),k=i("b0af"),$=i("99d9"),x=i("62ad"),M=i("169a"),w=i("ce7e"),D=i("4bd4"),V=i("132d"),I=i("8860"),C=i("da13"),S=i("5d23"),O=i("1baa"),P=i("0fd9"),Y=i("8dd9"),N=i("2fa4"),R=i("8654"),T=Object(g["a"])(p,m,u,!1,null,null,null),A=T.exports;_()(T,{VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCol:x["a"],VDialog:M["a"],VDivider:w["a"],VForm:D["a"],VIcon:V["a"],VList:I["a"],VListItem:C["a"],VListItemContent:S["g"],VListItemGroup:O["a"],VListItemTitle:S["k"],VRow:P["a"],VSheet:Y["a"],VSpacer:N["a"],VTextField:R["a"]});var E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"branchlist"},[i("v-dialog",{attrs:{width:"70%"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"brown",dark:"",large:""},on:{click:t.enterProcess}},s),[t._v("mdi-cog-box")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),i("v-card-text",[i("v-form",{ref:"form",staticClass:"mt-3"},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-door",label:"科別名 or 搜尋",rules:t.emptyRules},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"primary",attrs:{block:""},on:{click:t.addOK}},[t._v("確認新增")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"success",attrs:{block:""},on:{click:t.editOK}},[t._v("確認修改")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"error mt-1",attrs:{block:""},on:{click:t.cancelEditMode}},[t._v("取消修改")])],1)],1)],1),i("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"my-2",staticStyle:{overflow:"auto"}},[i("v-card-text",[i("v-sheet",{staticClass:"text-center pa-2",attrs:{color:"green lighten-3",outlined:""}},[i("h3",{staticClass:"white--text"},[t._v("已建構科別列表(點選可修改)")])]),i("v-list",{attrs:{height:"50vh"}},[i("v-list-item-group",t._l(t.filterItems,(function(e,s){return i("v-list-item",{key:s},[i("v-list-item-content",{on:{click:function(i){return i.stopPropagation(),t.enterEditMode(e)}}},[i("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1),i("v-icon",{attrs:{color:"red"},on:{click:function(i){return i.stopPropagation(),t.del(e)}}},[t._v("mdi-close")])],1)})),1)],1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer")],1)],1)],1)],1)},L=[],K={data:function(){return{items:[],list:{name:""},dialog:!1,title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],editMode:!1}},computed:{filterItems:function(){var t=this;if(this.items.length>0){var e="";return this.items.filter((function(i){if(e=JSON.stringify(i).toUpperCase(),e.includes(t.list.name.toUpperCase()))return i}))}}},mounted:function(){this.getAllData()},methods:{getAllData:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/branch").then((function(e){var i=e.data.map((function(t){return{snkey:t.snkey,name:t.name,text:t.name}}));t.items=i.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1}))}))},enterProcess:function(){this.title="科別資料管理",this.titleStyle="font-weight-black primary lighten-2"},addOK:function(){var t=this;if(this.$refs.form.validate()){var e=this.items.find((function(e){return t.list.name==e.name}));if(void 0!=e){var i={msg:"不可重覆!!",type:!0,theme:"warning"};return void this.$store.commit("snackbar",i)}this.$store.commit("getTime"),this.list["create_man"]=this.$store.state.pData.username+"("+this.$store.state.time+")",this.axios.post("general/add/"+this.$store.state.databaseName+"/branch",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.getAllData(),t.list.name="",t.$refs.form.resetValidation(),t.$emit("getSelect")}}))}},del:function(t){var e=this;this.$confirm("確認刪除?").then((function(i){t.delman=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var s={snkey:t.snkey,tablename:"branch",info:JSON.stringify(t)};i&&e.axios.post("general/delv3/"+e.$store.state.databaseName+"/branch",o.a.stringify(s)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getAllData(),e.$emit("getSelect")}}))}))},enterEditMode:function(t){this.list.snkey=t.snkey,this.list.name=t.text,this.list.edit_man="",this.editMode=!0},editOK:function(){var t=this;this.axios.post("general/edit/"+this.$store.state.databaseName+"/branch",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.getAllData(),t.$emit("getSelect"),t.list={name:""},t.$refs.form.resetValidation(),t.editMode=!1}}))},cancelEditMode:function(){this.editMode=!1,this.list={name:""},this.$refs.form.resetValidation()}}},j=K,H=(i("55a5"),Object(g["a"])(j,E,L,!1,null,null,null)),F=H.exports;_()(H,{VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCol:x["a"],VDialog:M["a"],VDivider:w["a"],VForm:D["a"],VIcon:V["a"],VList:I["a"],VListItem:C["a"],VListItemContent:S["g"],VListItemGroup:O["a"],VListItemTitle:S["k"],VRow:P["a"],VSheet:Y["a"],VSpacer:N["a"],VTextField:R["a"]});var J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"doctorlist"},[i("v-dialog",{attrs:{width:"70%"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"brown",dark:"",large:""},on:{click:t.enterProcess}},s),[t._v("mdi-cog-box")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),i("v-card-text",[i("v-form",{ref:"form",staticClass:"mt-3"},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-doctor",label:"醫生名 or 搜尋",rules:t.emptyRules},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"primary",attrs:{block:""},on:{click:t.addOK}},[t._v("確認新增")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"success",attrs:{block:""},on:{click:t.editOK}},[t._v("確認修改")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"error mt-1",attrs:{block:""},on:{click:t.cancelEditMode}},[t._v("取消修改")])],1)],1)],1),i("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"my-2",staticStyle:{overflow:"auto"}},[i("v-card-text",[i("v-sheet",{staticClass:"text-center pa-2",attrs:{color:"green lighten-3",outlined:""}},[i("h3",{staticClass:"white--text"},[t._v("已建構醫生列表(點選可修改)")])]),i("v-list",{attrs:{height:"50vh"}},[i("v-list-item-group",t._l(t.filterItems,(function(e,s){return i("v-list-item",{key:s},[i("v-list-item-content",{on:{click:function(i){return i.stopPropagation(),t.enterEditMode(e)}}},[i("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1),i("v-icon",{attrs:{color:"red"},on:{click:function(i){return i.stopPropagation(),t.del(e)}}},[t._v("mdi-close")])],1)})),1)],1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer")],1)],1)],1)],1)},U=[],B={data:function(){return{items:[],list:{name:""},dialog:!1,title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],editMode:!1}},computed:{filterItems:function(){var t=this;if(this.items.length>0){var e="";return this.items.filter((function(i){if(e=JSON.stringify(i).toUpperCase(),e.includes(t.list.name.toUpperCase()))return i}))}}},mounted:function(){this.getAllData()},methods:{getAllData:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/doctor").then((function(e){var i=e.data.map((function(t){return{snkey:t.snkey,name:t.name,text:t.name}}));t.items=i.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1}))}))},enterProcess:function(){this.title="醫生資料管理",this.titleStyle="font-weight-black primary lighten-2"},addOK:function(){var t=this;if(this.$refs.form.validate()){var e=this.items.find((function(e){return t.list.name==e.name}));if(void 0!=e){var i={msg:"不可重覆!!",type:!0,theme:"warning"};return void this.$store.commit("snackbar",i)}this.$store.commit("getTime"),this.list["create_man"]=this.$store.state.pData.username+"("+this.$store.state.time+")",this.axios.post("general/add/"+this.$store.state.databaseName+"/doctor",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.$emit(""),t.getAllData(),t.list.name="",t.$refs.form.resetValidation(),t.$emit("getSelect")}}))}},del:function(t){var e=this;this.$confirm("確認刪除?").then((function(i){t.delman=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var s={snkey:t.snkey,tablename:"doctor",info:JSON.stringify(t)};i&&e.axios.post("general/delv3/"+e.$store.state.databaseName+"/doctor",o.a.stringify(s)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getAllData(),e.$emit("getSelect")}}))}))},enterEditMode:function(t){this.list.snkey=t.snkey,this.list.name=t.text,this.list.edit_man="",this.editMode=!0},editOK:function(){var t=this;this.axios.post("general/edit/"+this.$store.state.databaseName+"/doctor",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.getAllData(),t.$emit("getSelect"),t.list={name:""},t.$refs.form.resetValidation(),t.editMode=!1}}))},cancelEditMode:function(){this.editMode=!1,this.list={name:""},this.$refs.form.resetValidation()}}},G=B,q=(i("e408"),Object(g["a"])(G,J,U,!1,null,null,null)),W=q.exports;_()(q,{VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCol:x["a"],VDialog:M["a"],VDivider:w["a"],VForm:D["a"],VIcon:V["a"],VList:I["a"],VListItem:C["a"],VListItemContent:S["g"],VListItemGroup:O["a"],VListItemTitle:S["k"],VRow:P["a"],VSheet:Y["a"],VSpacer:N["a"],VTextField:R["a"]});var z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"maincauseoftreatmentlist"},[i("v-dialog",{attrs:{width:"70%"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"brown",dark:"",large:""},on:{click:t.enterProcess}},s),[t._v("mdi-cog-box")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),i("v-card-text",[i("v-form",{ref:"form",staticClass:"mt-3"},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-doctor",label:"就診主因 or 搜尋",rules:t.emptyRules},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"primary",attrs:{block:""},on:{click:t.addOK}},[t._v("確認新增")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"success",attrs:{block:""},on:{click:t.editOK}},[t._v("確認修改")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"error mt-1",attrs:{block:""},on:{click:t.cancelEditMode}},[t._v("取消修改")])],1)],1)],1),i("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"my-2",staticStyle:{overflow:"auto"}},[i("v-card-text",[i("v-sheet",{staticClass:"text-center pa-2",attrs:{color:"green lighten-3",outlined:""}},[i("h3",{staticClass:"white--text"},[t._v("已建構就診主因列表(點選可修改)")])]),i("v-list",{attrs:{height:"50vh"}},[i("v-list-item-group",t._l(t.filterItems,(function(e,s){return i("v-list-item",{key:s},[i("v-list-item-content",{on:{click:function(i){return i.stopPropagation(),t.enterEditMode(e)}}},[i("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1),i("v-icon",{attrs:{color:"red"},on:{click:function(i){return i.stopPropagation(),t.del(e)}}},[t._v("mdi-close")])],1)})),1)],1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer")],1)],1)],1)],1)},Z=[],Q={data:function(){return{items:[],dialog:!1,list:{name:""},processType:"",title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],editMode:!1}},computed:{filterItems:function(){var t=this;if(this.items.length>0){var e="";return this.items.filter((function(i){if(e=JSON.stringify(i).toUpperCase(),e.includes(t.list.name.toUpperCase()))return i}))}}},mounted:function(){this.getAllData()},methods:{getAllData:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/main_cause_of_treatment").then((function(e){var i=e.data.map((function(t){return{snkey:t.snkey,name:t.name,text:t.name}}));t.items=i.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1}))}))},enterProcess:function(){this.title="就診主因管理",this.titleStyle="font-weight-black primary lighten-2"},addOK:function(){var t=this;if(this.$refs.form.validate()){var e=this.items.find((function(e){return t.list.name==e.name}));if(void 0!=e){var i={msg:"不可重覆!!",type:!0,theme:"warning"};return void this.$store.commit("snackbar",i)}this.$store.commit("getTime"),this.list["create_man"]=this.$store.state.pData.username+"("+this.$store.state.time+")",this.axios.post("general/add/"+this.$store.state.databaseName+"/main_cause_of_treatment",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.$emit(""),t.getAllData(),t.list.name="",t.$refs.form.resetValidation(),t.$emit("getSelect")}}))}},del:function(t){var e=this;this.$confirm("確認刪除?").then((function(i){t.delman=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var s={snkey:t.snkey,tablename:"main_cause_of_treatment",info:JSON.stringify(t)};i&&e.axios.post("general/delv3/"+e.$store.state.databaseName+"/main_cause_of_treatment",o.a.stringify(s)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getAllData(),e.$emit("getSelect")}}))}))},enterEditMode:function(t){this.list.snkey=t.snkey,this.list.name=t.text,this.list.edit_man="",this.editMode=!0},editOK:function(){var t=this;this.axios.post("general/edit/"+this.$store.state.databaseName+"/main_cause_of_treatment",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.getAllData(),t.$emit("getSelect"),t.list={name:""},t.$refs.form.resetValidation(),t.editMode=!1}}))},cancelEditMode:function(){this.editMode=!1,this.list={name:""},this.$refs.form.resetValidation()}}},X=Q,tt=(i("09fa"),Object(g["a"])(X,z,Z,!1,null,null,null)),et=tt.exports;function it(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function st(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?it(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):it(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}_()(tt,{VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCol:x["a"],VDialog:M["a"],VDivider:w["a"],VForm:D["a"],VIcon:V["a"],VList:I["a"],VListItem:C["a"],VListItemContent:S["g"],VListItemGroup:O["a"],VListItemTitle:S["k"],VRow:P["a"],VSheet:Y["a"],VSpacer:N["a"],VTextField:R["a"]});var at={components:{datepicker:d["a"],HospitalList:A,BranchList:F,DoctorList:W,MainCauseOfTreatmentList:et},props:["medicalRecordItems"],data:function(){return{dialog:!1,list:{},oldList:{},processType:"",title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],accountingCheck:"",timeItems:["上午","下午","夜間"],outpatientItems:["門診","急診","拿藥","巡診","駐診"],carItems:["","復康巴士(私人)","復康巴士(公立)","計程車","救護車","慈愛復健車","家屬自載","代拿藥","家屬自取藥"],accompanyItems:["","機構安排","家屬自陪","看護","不需陪診"],pipelineItems:["一般鼻胃管","矽質鼻胃管","一般尿管","矽質尿管","氣切","其他"],carryitemsItems:["健保卡","殘障手冊","重大傷病卡","TB手冊"],pipelineArray:{name:"",date:""},loading:!1,hospitalItems:[],branchItems:[],doctorItems:[],main_cause_of_treatmentItems:[],matchPipelineItems:[]}},computed:{diagnosis:function(){if(void 0!=this.$store.state.uData.diagnosis)return Object.values(this.$store.state.uData.diagnosis)}},mounted:function(){this.$on("fromParent",(function(t){this.dialog=!0,this.editProcess(t)})),this.getSelect()},methods:{getSelect:function(){this.getSelectItems("hospital"),this.getSelectItems("branch"),this.getSelectItems("doctor"),this.getSelectItems("main_cause_of_treatment")},insertLast:function(){var t=this,e=this.medicalRecordItems.sort((function(t,e){return t["date"]<e["date"]?1:-1}));this.list=st({},e[0]);var i=["hospital","branch","doctor","main_cause_of_treatment"];i.forEach((function(e){t[e+"Items"].find((function(i){i.snkey==t.list[e+"_snkey"]&&t.$set(t.list,e+"data",i)}))})),this.list.date=h()().format("YYYY-MM-DD")},mapData:function(t,e){this[t+"Items"]=e.map((function(t){return{snkey:t.snkey,text:t.name}}))},getSelectItems:function(t){var e=this;this.axios.post("general/getall/"+this.$store.state.databaseName+"/"+t).then((function(i){e.mapData(t,i.data)}))},getPipeline:function(){var t=this,e={key:"u_snkey",value:this.$store.state.uData.snkey};this.axios.post("general/getByKey/"+this.$store.state.databaseName+"/pipeline_used",o.a.stringify(e)).then((function(e){var i=e.data.map((function(t){var e=JSON.parse(t.datalist);return e["snkey"]=t.snkey,e["create_man"]=t.create_man,e["edit_man"]=t.edit_man,e}));t.matchPipelineItems=i.filter((function(t){return h()(t.end_date).format("YYYY-MM-DD")>h()().format("YYYY-MM-DD")}))}))},delPipeline:function(t){this.list.pipeline.splice(t,1)},addPipeline:function(){this.pipelineArray.name.length>0&&this.pipelineArray.date.length&&this.list.pipeline.push(st({},this.pipelineArray))},addProcess:function(){var t=this;this.processType="add",this.title="新增醫院就診紀錄",this.titleStyle="font-weight-black error lighten-2",this.list={date:h()().format("YYYY-MM-DD"),pipeline:[],car:"",accompany:""},this.$nextTick((function(){t.$refs.form.resetValidation()})),this.getPipeline()},editProcess:function(t){var e=this;console.log(t),this.processType="edit",this.title="修改醫院就診紀錄",this.titleStyle="font-weight-black success lighten-2",this.oldList=t,this.list=st({},t);var i=["hospital","branch","doctor","main_cause_of_treatment"];i.forEach((function(t){e[t+"Items"].find((function(i){i.snkey==e.list[t+"_snkey"]&&e.$set(e.list,t+"data",i)}))})),this.$set(this.list,"carryArray",this.list.carryitems.split(",")),this.getPipeline()},addOK:function(){var t=this;if(this.list.car.includes("復康巴士")&&""==this.list.accompany){var e={msg:"使用復康巴需選擇陪診人員,請再確認",type:!0,theme:"warning"};return this.$store.commit("snackbar",e),!1}if(this.$refs.form.validate()){var i=["hospital","branch","doctor","main_cause_of_treatment"],s=i.filter((function(e){return void 0==t.list[e+"data"]?e:void 0==t.list[e+"data"].snkey?e:void 0}));if(s.length>0){e={msg:"資料輸入不完整或不符合規定,請再確認!!",type:!0,theme:"warning"};return this.$store.commit("snackbar",e),!1}this.$store.commit("getTime");var a={date:this.list.date,user_snkey:this.$store.state.uData.snkey,hospital_snkey:this.list.hospitaldata.snkey,branch_snkey:this.list.branchdata.snkey,doctor_snkey:this.list.doctordata.snkey,main_cause_of_treatment_snkey:this.list.main_cause_of_treatmentdata.snkey,time:this.list.time,outpatient:this.list.outpatient,description:this.list.description,response:this.list.response,back_date:this.list.back_date,car:this.list.car,accompany:this.list.accompany,create_man:this.$store.state.pData.username+"("+this.$store.state.time+")"};void 0!=this.list.pipeline&&(a["pipeline"]=JSON.stringify(this.list.pipeline)),void 0!=this.list.carryArray&&(a["carryitems"]=this.list.carryArray.toString()),this.loading=!0,this.axios.post("general/add/"+this.$store.state.databaseName+"/medical_record",o.a.stringify(a)).then((function(e){if(console.log(e.data),1==e.data.state){var i={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.dialog=!1,t.$emit("getMedicalData"),t.loading=!1}})),this.accountingFeesCheck()}else{e={msg:"資料輸入不完整,請再確認",type:!0,theme:"warning"};this.$store.commit("snackbar",e)}},editOK:function(){var t=this;if(this.list.car.includes("復康巴士")&&""==this.list.accompany){var e={msg:"使用復康巴需選擇陪診人員,請再確認",type:!0,theme:"warning"};return this.$store.commit("snackbar",e),!1}if(this.$refs.form.validate()){var i=["hospital","branch","doctor","main_cause_of_treatment"],s=i.filter((function(e){return void 0==t.list[e+"data"]?e:void 0==t.list[e+"data"].snkey?e:void 0}));if(s.length>0){e={msg:"資料輸入不完整或不符合規定,請再確認!!",type:!0,theme:"warning"};return this.$store.commit("snackbar",e),!1}this.$store.commit("getTime");var a={snkey:this.list.snkey,date:this.list.date,user_snkey:this.$store.state.uData.snkey,hospital_snkey:this.list.hospitaldata.snkey,branch_snkey:this.list.branchdata.snkey,doctor_snkey:this.list.doctordata.snkey,main_cause_of_treatment_snkey:this.list.main_cause_of_treatmentdata.snkey,time:this.list.time,outpatient:this.list.outpatient,description:this.list.description,response:this.list.response,back_date:this.list.back_date,car:this.list.car,accompany:this.list.accompany,edit_man:this.$store.state.pData.username+"("+this.$store.state.time+")"};void 0!=this.list.pipeline&&(a["pipeline"]=JSON.stringify(this.list.pipeline)),void 0!=this.list.carryArray&&(a["carryitems"]=this.list.carryArray.toString()),this.loading=!0,this.axios.post("general/edit/"+this.$store.state.databaseName+"/medical_record",o.a.stringify(a)).then((function(e){if(console.log(e.data),1==e.data.state){var i={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.dialog=!1,t.$emit("getMedicalData"),t.loading=!1}})),this.accountingCheck&&this.accountingFeesCheck()}else{e={msg:"資料輸入不完全!!請重新確認!!",type:!0,theme:"warning"};this.$store.commit("snackbar",e)}},accountingFeesCheck:function(){var t=this,e=st({},this.list);void 0!=e.car&&void 0!=e.hospitaldata&&(console.log("run car"),this.axios.post("general/getAll/"+this.$store.state.databaseName+"/fee").then((function(i){var s=[];if(e.car.includes("復康巴士(私人)")&&(console.log("私人"),s="急診就醫"==t.list.main_cause_of_treatmentdata.text||"出院帶藥"==t.list.main_cause_of_treatmentdata.text?i.data.filter((function(t){return t.name.includes(e.hospitaldata.text+"(出、入院)")})):i.data.filter((function(t){return t.name.includes(e.hospitaldata.text+"(來回)")})),console.log(s)),(e.car.includes("計程車")||e.car.includes("救護車"))&&(console.log(e.car),s=i.data.filter((function(t){return t.name.includes(e.car)})),console.log(s)),e.car.includes("代拿藥")&&(s=i.data.filter((function(t){return t.name.includes(e.car)})),console.log("代拿藥",s)),e.accompany.includes("機構安排")){var a=i.data.find((function(t){return t.name.includes("陪診費")}));s.push(a),console.log("陪診費-機構安排",s)}if(s.length){var n=[];s.forEach((function(i){var s={user_snkey:t.$store.state.uData.snkey,fee_snkey:i.snkey,date:e.date,start_day:e.date,end_day:e.date,quantity:1,price:i.price,note:"(A)",create_man:t.$store.state.pData.username+"("+t.$store.state.time+")"};h()(s.date).format("DD")>=26&&(s.date=h()(s.date).add(1,"month").format("YYYY-MM-01")),n.push(s)})),t.axios.post("general/addMulti/"+t.$store.state.databaseName+"/accounting",o.a.stringify(n)).then((function(e){if(1==e.data.state){var i={msg:"就診紀錄已新增;[相關費用已新增]",type:!0,theme:"success"};t.$store.commit("snackbar",i)}}))}})))}}},nt=at,rt=(i("5af7"),i("0798")),ot=i("c6a6"),lt=i("ac7c"),ct=i("cc20"),dt=i("2b5d"),mt=i("b974"),ut=i("a844"),ft=Object(g["a"])(nt,l,c,!1,null,null,null),ht=ft.exports;_()(ft,{VAlert:rt["a"],VAutocomplete:ot["a"],VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCheckbox:lt["a"],VChip:ct["a"],VCol:x["a"],VCombobox:dt["a"],VDialog:M["a"],VDivider:w["a"],VForm:D["a"],VIcon:V["a"],VRow:P["a"],VSelect:mt["a"],VSpacer:N["a"],VTextField:R["a"],VTextarea:ut["a"]});var vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"medicinerecordadd"},[i("v-dialog",{attrs:{width:"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"red lighten-2",dark:""},on:{click:t.addProcess}},s),[t._v("mdi-plus-circle")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),i("v-card-text",[i("v-form",{ref:"form"},[i("v-row",[i("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",md:"6"}},[i("v-combobox",{attrs:{label:"藥品",items:t.medicineItems,rules:t.emptyRules},on:{change:t.getMedicine},model:{value:t.list.medicinedata,callback:function(e){t.$set(t.list,"medicinedata",e)},expression:"list.medicinedata"}}),i("MedicineList",{on:{getSelect:t.getSelect}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[void 0!=t.list.medicinedata?i("v-text-field",{attrs:{label:"作用",outlined:"",readonly:""},model:{value:t.list.medicinedata.effect,callback:function(e){t.$set(t.list.medicinedata,"effect",e)},expression:"list.medicinedata.effect"}}):t._e()],1),i("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",md:"3"}},[i("v-combobox",{attrs:{label:"單位",items:t.unitItems,rules:t.emptyRules},model:{value:t.list.unitdata,callback:function(e){t.$set(t.list,"unitdata",e)},expression:"list.unitdata"}}),i("UnitList",{on:{getSelect:t.getSelect}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"劑量"},model:{value:t.list.dosage,callback:function(e){t.$set(t.list,"dosage",e)},expression:"list.dosage"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"注意事項"},model:{value:t.list.attention,callback:function(e){t.$set(t.list,"attention",e)},expression:"list.attention"}})],1),i("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",md:"3"}},[i("v-combobox",{attrs:{label:"用法",items:t.methodItems,rules:t.emptyRules},model:{value:t.list.methoddata,callback:function(e){t.$set(t.list,"methoddata",e)},expression:"list.methoddata"}}),i("MethodList",{on:{getSelect:t.getSelect}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"用量",rules:t.emptyRules},model:{value:t.list.quantity,callback:function(e){t.$set(t.list,"quantity",e)},expression:"list.quantity"}})],1),i("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",md:"3"}},[i("v-combobox",{attrs:{label:"給藥時間",items:t.eat_medicine_timeItems,rules:t.emptyRules},on:{change:t.getEatMedicineTime},model:{value:t.list.eat_medicine_timedata,callback:function(e){t.$set(t.list,"eat_medicine_timedata",e)},expression:"list.eat_medicine_timedata"}}),i("EatMedicineTimeList",{on:{getSelect:t.getSelect}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"給藥起始日期",type:"date",rules:t.emptyRules},model:{value:t.list.start_date,callback:function(e){t.$set(t.list,"start_date",e)},expression:"list.start_date"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-select",{attrs:{label:"給藥起始時間",items:t.start_timeItems,rules:t.emptyRules},model:{value:t.list.start_time,callback:function(e){t.$set(t.list,"start_time",e)},expression:"list.start_time"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"給藥次數",rules:t.emptyRules},model:{value:t.list.medicine_counts,callback:function(e){t.$set(t.list,"medicine_counts",e)},expression:"list.medicine_counts"}})],1),i("v-col",{attrs:{cols:"12",md:"9"}},[i("v-text-field",{attrs:{label:"藥物用完資訊",readonly:"",outlined:"",value:t.medicineEndInfo}})],1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer"),"add"==t.processType?i("v-btn",{staticClass:"primary",attrs:{loading:t.loading,disabled:t.loading},on:{click:t.addOK}},[t._v("確認新增")]):t._e(),"edit"==t.processType?i("v-btn",{staticClass:"success",attrs:{loading:t.loading,disabled:t.loading},on:{click:t.editOK}},[t._v("確認修改")]):t._e()],1)],1)],1)],1)},pt=[],gt=(i("99af"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-combobox",{attrs:{label:t.label,items:this.$store.getters[t.dataSource],rules:t.emptyRules},on:{change:t.choice},model:{value:t.choiceItem,callback:function(e){t.choiceItem=e},expression:"choiceItem"}})}),yt=[],_t={props:["dataSource","label","defaultData"],data:function(){return{emptyRules:[function(t){return!!t||"不可空白"}],choiceItem:""}},watch:{defaultData:function(){this.choiceItem=this.defaultData}},mounted:function(){this.$store.dispatch("getItems",this.dataSource),this.choiceItem=this.defaultData},methods:{choice:function(){null!=this.choiceItem&&this.$emit("returnFn",this.choiceItem)}}},bt=_t,kt=Object(g["a"])(bt,gt,yt,!1,null,null,null),$t=kt.exports;_()(kt,{VCombobox:dt["a"]});var xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"medicinelist"},[i("v-dialog",{attrs:{width:"70%"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"brown",dark:"",large:""},on:{click:t.enterProcess}},s),[t._v("mdi-cog-box")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),i("v-card-text",[i("v-form",{ref:"form",staticClass:"mt-3"},[i("v-row",[i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-pill",label:"藥物名 or 搜尋",rules:t.emptyRules},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-codepen",label:"作用"},model:{value:t.list.effect,callback:function(e){t.$set(t.list,"effect",e)},expression:"list.effect"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"primary",attrs:{block:""},on:{click:t.addOK}},[t._v("確認新增")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"success",attrs:{block:""},on:{click:t.editOK}},[t._v("確認修改")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"error mt-1",attrs:{block:""},on:{click:t.cancelEditMode}},[t._v("取消修改")])],1)],1)],1),i("v-card",{staticClass:"my-2"},[i("v-card-text",[i("v-sheet",{staticClass:"text-center pa-2",attrs:{color:"green lighten-3",outlined:""}},[i("h3",{staticClass:"white--text"},[t._v("已建構藥物列表(點選可修改)")])]),i("v-data-iterator",{attrs:{items:t.filterItems,"items-per-page":t.itemsPerPage,"footer-props":{itemsPerPageOptions:t.itemsPerPageOptions}},on:{"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[i("v-list",[i("v-list-item-group",t._l(e.items,(function(e,s){return i("v-list-item",{key:s},[i("v-list-item-content",{on:{click:function(i){return i.stopPropagation(),t.enterEditMode(e)}}},[i("v-list-item-title",{domProps:{textContent:t._s(e.text)}}),t._v(" 作用:"+t._s(e.effect)+" ")],1),i("v-icon",{attrs:{color:"red"},on:{click:function(i){return i.stopPropagation(),t.del(e)}}},[t._v("mdi-close")])],1)})),1)],1)]}}])})],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer")],1)],1)],1)],1)},Mt=[],wt={data:function(){return{items:[],dialog:!1,list:{name:""},processType:"",title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],itemsPerPage:10,itemsPerPageOptions:[10,20,30],editMode:!1}},mounted:function(){this.getAllData()},computed:{filterItems:function(){var t=this;if(this.items.length>0){var e="";return this.items.filter((function(i){if(e=JSON.stringify(i).toUpperCase(),e.includes(t.list.name.toUpperCase()))return i}))}}},methods:{getAllData:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/medicine").then((function(e){var i=e.data.map((function(t){return{snkey:t.snkey,name:t.name,text:t.name,effect:t.effect}}));t.items=i.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1}))}))},enterProcess:function(){this.title="藥物資料管理",this.titleStyle="font-weight-black primary lighten-2"},addOK:function(){var t=this;if(this.$refs.form.validate()){var e=this.items.find((function(e){return t.list.name==e.name}));if(void 0!=e){var i={msg:"不可重覆!!",type:!0,theme:"warning"};return void this.$store.commit("snackbar",i)}this.$store.commit("getTime"),this.list["create_man"]=this.$store.state.pData.username+"("+this.$store.state.time+")",this.axios.post("general/add/"+this.$store.state.databaseName+"/medicine",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.$emit(""),t.getAllData(),t.list.name="",t.$refs.form.resetValidation(),t.$emit("getSelect")}}))}},del:function(t){var e=this;this.$confirm("確認刪除?").then((function(i){t.delman=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var s={snkey:t.snkey,tablename:"medicine",info:JSON.stringify(t)};i&&e.axios.post("general/delv3/"+e.$store.state.databaseName+"/medicine",o.a.stringify(s)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getAllData(),e.$emit("getSelect")}}))}))},enterEditMode:function(t){this.list.snkey=t.snkey,this.list.name=t.text,this.list.edit_man="",this.editMode=!0},editOK:function(){var t=this;this.axios.post("general/edit/"+this.$store.state.databaseName+"/medicine",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.getAllData(),t.$emit("getSelect"),t.list={name:""},t.$refs.form.resetValidation(),t.editMode=!1}}))},cancelEditMode:function(){this.editMode=!1,this.list={name:""},this.$refs.form.resetValidation()}}},Dt=wt,Vt=(i("d6e6"),i("c377")),It=Object(g["a"])(Dt,xt,Mt,!1,null,null,null),Ct=It.exports;_()(It,{VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCol:x["a"],VDataIterator:Vt["a"],VDialog:M["a"],VDivider:w["a"],VForm:D["a"],VIcon:V["a"],VList:I["a"],VListItem:C["a"],VListItemContent:S["g"],VListItemGroup:O["a"],VListItemTitle:S["k"],VRow:P["a"],VSheet:Y["a"],VSpacer:N["a"],VTextField:R["a"]});var St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"unitlist"},[i("v-dialog",{attrs:{width:"70%"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"brown",dark:"",large:""},on:{click:t.enterProcess}},s),[t._v("mdi-cog-box")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),i("v-card-text",[i("v-form",{ref:"form",staticClass:"mt-3"},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-codepen",label:"單位名 or 搜尋",rules:t.emptyRules},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"primary",attrs:{block:""},on:{click:t.addOK}},[t._v("確認新增")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"success",attrs:{block:""},on:{click:t.editOK}},[t._v("確認修改")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"error mt-1",attrs:{block:""},on:{click:t.cancelEditMode}},[t._v("取消修改")])],1)],1)],1),i("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"my-2",staticStyle:{overflow:"auto"}},[i("v-card-text",[i("v-sheet",{staticClass:"text-center pa-2",attrs:{color:"green lighten-3",outlined:""}},[i("h3",{staticClass:"white--text"},[t._v("已建構醫院列表(點選可修改)")])]),i("v-list",{attrs:{height:"50vh"}},[i("v-list-item-group",t._l(t.filterItems,(function(e,s){return i("v-list-item",{key:s},[i("v-list-item-content",{on:{click:function(i){return i.stopPropagation(),t.enterEditMode(e)}}},[i("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1),i("v-icon",{attrs:{color:"red"},on:{click:function(i){return i.stopPropagation(),t.del(e)}}},[t._v("mdi-close")])],1)})),1)],1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer")],1)],1)],1)],1)},Ot=[],Pt={data:function(){return{items:[],list:{name:""},dialog:!1,title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],editMode:!1}},mounted:function(){this.getAllData()},computed:{filterItems:function(){var t=this;if(this.items.length>0){var e="";return this.items.filter((function(i){if(e=JSON.stringify(i).toUpperCase(),e.includes(t.list.name.toUpperCase()))return i}))}}},methods:{getAllData:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/unit").then((function(e){var i=e.data.map((function(t){return{snkey:t.snkey,name:t.name,text:t.name}}));t.items=i.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1}))}))},enterProcess:function(){this.title="單位資料管理",this.titleStyle="font-weight-black primary lighten-2"},addOK:function(){var t=this;if(this.$refs.form.validate()){var e=this.items.find((function(e){return t.list.name==e.name}));if(void 0!=e){var i={msg:"不可重覆!!",type:!0,theme:"warning"};return void this.$store.commit("snackbar",i)}this.$store.commit("getTime"),this.list["create_man"]=this.$store.state.pData.username+"("+this.$store.state.time+")",this.axios.post("general/add/"+this.$store.state.databaseName+"/unit",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.$emit(""),t.getAllData(),t.list.name="",t.$refs.form.resetValidation(),t.$emit("getSelect")}}))}},del:function(t){var e=this;this.$confirm("確認刪除?").then((function(i){t.delman=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var s={snkey:t.snkey,tablename:"unit",info:JSON.stringify(t)};i&&e.axios.post("general/delv3/"+e.$store.state.databaseName+"/unit",o.a.stringify(s)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getAllData(),e.$emit("getSelect")}}))}))},enterEditMode:function(t){this.list.snkey=t.snkey,this.list.name=t.text,this.list.edit_man="",this.editMode=!0},editOK:function(){var t=this;this.axios.post("general/edit/"+this.$store.state.databaseName+"/unit",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.getAllData(),t.$emit("getSelect"),t.list={name:""},t.$refs.form.resetValidation(),t.editMode=!1}}))},cancelEditMode:function(){this.editMode=!1,this.list={name:""},this.$refs.form.resetValidation()}}},Yt=Pt,Nt=(i("0798c"),Object(g["a"])(Yt,St,Ot,!1,null,null,null)),Rt=Nt.exports;_()(Nt,{VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCol:x["a"],VDialog:M["a"],VDivider:w["a"],VForm:D["a"],VIcon:V["a"],VList:I["a"],VListItem:C["a"],VListItemContent:S["g"],VListItemGroup:O["a"],VListItemTitle:S["k"],VRow:P["a"],VSheet:Y["a"],VSpacer:N["a"],VTextField:R["a"]});var Tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"methodlist"},[i("v-dialog",{attrs:{width:"70%"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"brown",dark:"",large:""},on:{click:t.enterProcess}},s),[t._v("mdi-cog-box")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),i("v-card-text",[i("v-form",{ref:"form",staticClass:"mt-3"},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-codepen",label:"方法名 or 搜尋",rules:t.emptyRules},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"primary",attrs:{block:""},on:{click:t.addOK}},[t._v("確認新增")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"success",attrs:{block:""},on:{click:t.editOK}},[t._v("確認修改")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"error mt-1",attrs:{block:""},on:{click:t.cancelEditMode}},[t._v("取消修改")])],1)],1)],1),i("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"my-2",staticStyle:{overflow:"auto"}},[i("v-card-text",[i("v-sheet",{staticClass:"text-center pa-2",attrs:{color:"green lighten-3",outlined:""}},[i("h3",{staticClass:"white--text"},[t._v("已建構方法列表(點選可修改)")])]),i("v-list",{attrs:{height:"50vh"}},[i("v-list-item-group",t._l(t.filterItems,(function(e,s){return i("v-list-item",{key:s},[i("v-list-item-content",{on:{click:function(i){return i.stopPropagation(),t.enterEditMode(e)}}},[i("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1),i("v-icon",{attrs:{color:"red"},on:{click:function(i){return i.stopPropagation(),t.del(e)}}},[t._v("mdi-close")])],1)})),1)],1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer")],1)],1)],1)],1)},At=[],Et={data:function(){return{items:[],list:{name:""},dialog:!1,title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],editMode:!1}},mounted:function(){this.getAllData()},computed:{filterItems:function(){var t=this;if(this.items.length>0){var e="";return this.items.filter((function(i){if(e=JSON.stringify(i).toUpperCase(),e.includes(t.list.name.toUpperCase()))return i}))}}},methods:{getAllData:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/method").then((function(e){var i=e.data.map((function(t){return{snkey:t.snkey,name:t.name,text:t.name}}));t.items=i.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1}))}))},enterProcess:function(){this.title="方法資料管理",this.titleStyle="font-weight-black primary lighten-2"},addOK:function(){var t=this;if(this.$refs.form.validate()){var e=this.items.find((function(e){return t.list.name==e.name}));if(void 0!=e){var i={msg:"不可重覆!!",type:!0,theme:"warning"};return void this.$store.commit("snackbar",i)}this.$store.commit("getTime"),this.list["create_man"]=this.$store.state.pData.username+"("+this.$store.state.time+")",this.axios.post("general/add/"+this.$store.state.databaseName+"/method",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.$emit(""),t.getAllData(),t.list.name="",t.$refs.form.resetValidation(),t.$emit("getSelect")}}))}},del:function(t){var e=this;this.$confirm("確認刪除?").then((function(i){t.delman=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var s={snkey:t.snkey,tablename:"method",info:JSON.stringify(t)};i&&e.axios.post("general/delv3/"+e.$store.state.databaseName+"/method",o.a.stringify(s)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getAllData(),e.$emit("getSelect")}}))}))},enterEditMode:function(t){this.list.snkey=t.snkey,this.list.name=t.text,this.list.edit_man="",this.editMode=!0},editOK:function(){var t=this;this.axios.post("general/edit/"+this.$store.state.databaseName+"/method",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.getAllData(),t.$emit("getSelect"),t.list={name:""},t.$refs.form.resetValidation(),t.editMode=!1}}))},cancelEditMode:function(){this.editMode=!1,this.list={name:""},this.$refs.form.resetValidation()}}},Lt=Et,Kt=(i("10c5"),Object(g["a"])(Lt,Tt,At,!1,null,null,null)),jt=Kt.exports;_()(Kt,{VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCol:x["a"],VDialog:M["a"],VDivider:w["a"],VForm:D["a"],VIcon:V["a"],VList:I["a"],VListItem:C["a"],VListItemContent:S["g"],VListItemGroup:O["a"],VListItemTitle:S["k"],VRow:P["a"],VSheet:Y["a"],VSpacer:N["a"],VTextField:R["a"]});var Ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"eatmedicinetimelist"},[i("v-dialog",{attrs:{width:"70%"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-icon",t._g({attrs:{color:"brown",dark:"",large:""},on:{click:t.enterProcess}},s),[t._v("mdi-cog-box")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),i("v-card-text",[i("v-form",{ref:"form",staticClass:"mt-3"},[i("v-row",[i("v-col",{attrs:{cols:"12",md:"4"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-timetable",label:"用藥時間名稱 or 搜尋",rules:t.emptyRules},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-av-timer",label:"時間設定(請用,隔開)"},model:{value:t.list.time,callback:function(e){t.$set(t.list,"time",e)},expression:"list.time"}})],1),i("v-col",{attrs:{cols:"12",md:"2"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-calendar-range",label:"間隔天數"},model:{value:t.list.day,callback:function(e){t.$set(t.list,"day",e)},expression:"list.day"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"primary",attrs:{block:""},on:{click:t.addOK}},[t._v("確認新增")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"success",attrs:{block:""},on:{click:t.editOK}},[t._v("確認修改")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"error mt-1",attrs:{block:""},on:{click:t.cancelEditMode}},[t._v("取消修改")])],1)],1)],1),i("v-card",{staticClass:"my-2"},[i("v-card-text",[i("v-sheet",{staticClass:"text-center pa-2",attrs:{color:"green lighten-3",outlined:""}},[i("h3",{staticClass:"white--text"},[t._v("已建構用藥時間列表")])]),i("v-data-iterator",{attrs:{items:t.filterItems,"items-per-page":t.itemsPerPage,"footer-props":{itemsPerPageOptions:t.itemsPerPageOptions}},on:{"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[i("v-list",[i("v-list-item-group",t._l(e.items,(function(e,s){return i("v-list-item",{key:s},[i("v-list-item-content",{on:{click:function(i){return i.stopPropagation(),t.enterEditMode(e)}}},[i("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1),i("v-icon",{attrs:{color:"red"},on:{click:function(i){return i.stopPropagation(),t.del(e)}}},[t._v("mdi-close")])],1)})),1)],1)]}}])})],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer")],1)],1)],1)],1)},Ft=[],Jt={data:function(){return{items:[],dialog:!1,list:{name:"",day:1},processType:"",title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],itemsPerPage:10,itemsPerPageOptions:[10,20,30],editMode:!1}},mounted:function(){this.getAllData()},computed:{filterItems:function(){var t=this;if(this.items.length>0){var e="";return this.items.filter((function(i){if(e=JSON.stringify(i).toUpperCase(),e.includes(t.list.name.toUpperCase()))return i}))}}},methods:{getAllData:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/eat_medicine_time").then((function(e){var i=e.data.map((function(t){return{snkey:t.snkey,text:t.name+" ["+t.time+"] / 間隔 "+t.day+"天",time:t.time,day:t.day}}));t.items=i.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1}))}))},enterProcess:function(){this.title="用藥時間資料管理",this.titleStyle="font-weight-black primary lighten-2"},addOK:function(){var t=this;if(this.$refs.form.validate()){var e=this.items.find((function(e){return t.list.name==e.name}));if(void 0!=e){var i={msg:"不可重覆!!",type:!0,theme:"warning"};return void this.$store.commit("snackbar",i)}this.$store.commit("getTime"),this.list["create_man"]=this.$store.state.pData.username+"("+this.$store.state.time+")",this.axios.post("general/add/"+this.$store.state.databaseName+"/eat_medicine_time",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.$emit(""),t.getAllData(),t.list.name="",t.$refs.form.resetValidation(),t.$emit("getSelect")}}))}},del:function(t){var e=this;this.$confirm("確認刪除?").then((function(i){t.delman=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var s={snkey:t.snkey,tablename:"eat_medicine_time",info:JSON.stringify(t)};i&&e.axios.post("general/delv3/"+e.$store.state.databaseName+"/eat_medicine_time",o.a.stringify(s)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getAllData(),e.$emit("getSelect")}}))}))},enterEditMode:function(t){this.list.snkey=t.snkey,this.list.name=t.text,this.list.edit_man="",this.editMode=!0},editOK:function(){var t=this;this.axios.post("general/edit/"+this.$store.state.databaseName+"/eat_medicine_time",o.a.stringify(this.list)).then((function(e){if(1==e.data.state){var i={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.getAllData(),t.$emit("getSelect"),t.list={name:""},t.$refs.form.resetValidation(),t.editMode=!1}}))},cancelEditMode:function(){this.editMode=!1,this.list={name:""},this.$refs.form.resetValidation()}}},Ut=Jt,Bt=(i("fce8"),Object(g["a"])(Ut,Ht,Ft,!1,null,null,null)),Gt=Bt.exports;function qt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Wt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}_()(Bt,{VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCol:x["a"],VDataIterator:Vt["a"],VDialog:M["a"],VDivider:w["a"],VForm:D["a"],VIcon:V["a"],VList:I["a"],VListItem:C["a"],VListItemContent:S["g"],VListItemGroup:O["a"],VListItemTitle:S["k"],VRow:P["a"],VSheet:Y["a"],VSpacer:N["a"],VTextField:R["a"]});var zt={components:{datepicker:d["a"],Selecter:$t,MedicineList:Ct,UnitList:Rt,MethodList:jt,EatMedicineTimeList:Gt},props:["medicalRecordList","medicalRecordItems","medicineRecordItems"],data:function(){return{dialog:!1,list:{medicinedata:{},unitdata:{},methoddata:{},eat_medicine_timedata:{},start_date:"",start_time:"",medicine_counts:""},oldList:{},processType:"",title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],start_timeItems:[],intervalDay:1,EatMedicineTime:"",allUsedMedicineItems:[],loading:!1,medicineItems:[],unitItems:[],methodItems:[],eat_medicine_timeItems:[]}},created:function(){this.getSelect(),this.getAllUsedMedicine()},mounted:function(){this.$on("fromParent",(function(t){this.dialog=!0,this.editProcess(t)}))},watch:{list:function(t){if(void 0!=t.name&&void 0!=t.start_date&&t.name.length>0&&t.start_date.length>0){var e=this.allUsedMedicineItems.filter((function(e){return e.medicine_snkey==t.medicine_snkey&&t.start_date>=e.start_date&&t.start_date<=e.end_date}));if(e.length>0&&"add"==this.processType){var i=this.medicalRecordItems.find((function(t){return t.snkey==e[0].medical_snkey})),s="與 [".concat(i.date,"] [").concat(i.hospital_name,"-").concat(i.branch_name,"]"),a={msg:s+",藥品使用重覆!!,請注意!!",type:!0,theme:"warning"};this.$store.commit("snackbar",a)}}}},computed:{medicineEndInfo:function(){if(void 0!=this.list.eat_medicine_timedata&&""!=this.list.start_date&&""!=this.list.start_time&&""!=this.list.medicine_counts){var t=Math.ceil(this.list.medicine_counts/this.start_timeItems.length),e=Math.floor((this.list.medicine_counts-1)/this.start_timeItems.length),i=(this.list.medicine_counts-1)%this.start_timeItems.length,s=this.start_timeItems.indexOf(this.list.start_time),a=0;s+i>=this.start_timeItems.length&&(a=1);var n=(s+i)%this.start_timeItems.length;return h()().format(),this.intervalDay>1?this.list.medicineEndInfo="日期:"+h()(this.list.start_date).add(t-1+e*(this.intervalDay-1)+a,"day").format("YYYY-MM-DD")+" 時段:"+this.start_timeItems[n]:this.list.medicineEndInfo="日期:"+h()(this.list.start_date).add(t-1+a,"day").format("YYYY-MM-DD")+" 時段:"+this.start_timeItems[n],this.list.medicineEndInfo}}},methods:{getSelect:function(){this.getSelectItems("medicine"),this.getSelectItems("unit"),this.getSelectItems("method"),this.getSelectItems("eat_medicine_time")},mapData:function(t,e){this[t+"Items"]=e.map((function(e){return"medicine"==t?{snkey:e.snkey,text:e.name,effect:e.effect}:"eat_medicine_time"==t?{snkey:e.snkey,text:e.name+" ["+e.time+"] / 間隔 "+e.day+"天",time:e.time,day:e.day}:{snkey:e.snkey,text:e.name}}))},getMedicine:function(){var t=this.list.medicinedata,e=this.medicineRecordItems.find((function(e){return e.medicine_snkey==t.snkey}));if(void 0!=e){var i={msg:"本次就診藥品輸入重覆,請確認!!",type:!0,theme:"warning"};this.$store.commit("snackbar",i)}},getEatMedicineTime:function(){if(null==this.list.eat_medicine_timedata){var t={msg:"未正確選擇給藥時間或給藥時間不正確,請重新確認!!",type:!0,theme:"warning"};return this.$store.commit("snackbar",t),!1}if(void 0==this.list.eat_medicine_timedata.snkey){t={msg:"未正確選擇給藥時間或給藥時間不正確,請重新確認!!",type:!0,theme:"warning"};return this.$store.commit("snackbar",t),!1}this.list.start_time="",this.start_timeItems=this.list.eat_medicine_timedata.time.split(","),this.intervalDay=this.list.eat_medicine_timedata.day},getSelectItems:function(t){var e=this;this.axios.post("general/getall/"+this.$store.state.databaseName+"/"+t).then((function(i){e.mapData(t,i.data)}))},getAllUsedMedicine:function(){var t=this,e={key:"user_snkey",value:this.$store.state.uData.snkey};this.axios.post("general/getByKey/"+this.$store.state.databaseName+"/medicine_record",o.a.stringify(e)).then((function(e){t.allUsedMedicineItems=e.data.map((function(t){var e=t;return e.end_date=e.medicineEndInfo.substr(3,10),e}))}))},addProcess:function(){var t=this;this.processType="add",this.title="新增用藥",this.titleStyle="font-weight-black error lighten-2",this.list={start_date:"",start_time:"",medicine_counts:""},this.$nextTick((function(){t.$refs.form.resetValidation()}))},editProcess:function(t){var e=this;this.processType="edit",this.title="修改用藥",this.titleStyle="font-weight-black success lighten-2",this.oldList=t,this.list=Wt({},t);var i=["medicine","unit","method","eat_medicine_time"];i.forEach((function(t){e[t+"Items"].find((function(i){i.snkey==e.list[t+"_snkey"]&&e.$set(e.list,t+"data",i)}))})),this.getEatMedicineTime(),this.list.start_time=t.start_time},addOK:function(){var t=this;if(this.$refs.form.validate()){this.$store.commit("getTime");var e={user_snkey:this.$store.state.uData.snkey,medical_snkey:this.medicalRecordList.snkey,medicine_snkey:this.list.medicinedata.snkey,unit_snkey:this.list.unitdata.snkey,method_snkey:this.list.methoddata.snkey,eat_medicine_time_snkey:this.list.eat_medicine_timedata.snkey,dosage:this.list.dosage,attention:this.list.attention,quantity:this.list.quantity,start_date:this.list.start_date,start_time:this.list.start_time,medicine_counts:this.list.medicine_counts,medicineEndInfo:this.list.medicineEndInfo,create_man:this.$store.state.pData.username+"("+this.$store.state.time+")"};this.loading=!0,this.axios.post("general/add/"+this.$store.state.databaseName+"/medicine_record",o.a.stringify(e)).then((function(e){if(1==e.data.state){var i={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.dialog=!1,t.$emit("getMedicineRecord"),t.loading=!1}}))}else{var i={msg:"資料輸入不完全!!請重新確認!!",type:!0,theme:"warning"};this.$store.commit("snackbar",i)}},editOK:function(){var t=this;if(this.$refs.form.validate()){this.$store.commit("getTime");var e={snkey:this.list.snkey,user_snkey:this.$store.state.uData.snkey,medical_snkey:this.medicalRecordList.snkey,medicine_snkey:this.list.medicinedata.snkey,unit_snkey:this.list.unitdata.snkey,method_snkey:this.list.methoddata.snkey,eat_medicine_time_snkey:this.list.eat_medicine_timedata.snkey,dosage:this.list.dosage,attention:this.list.attention,quantity:this.list.quantity,start_date:this.list.start_date,start_time:this.list.start_time,medicine_counts:this.list.medicine_counts,medicineEndInfo:this.list.medicineEndInfo,edit_man:this.$store.state.pData.username+"("+this.$store.state.time+")"};this.axios.post("general/edit/"+this.$store.state.databaseName+"/medicine_record",o.a.stringify(e)).then((function(e){if(1==e.data.state){var i={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",i),t.dialog=!1,t.$emit("getMedicineRecord")}}))}else{var i={msg:"資料輸入不完全!!請重新確認!!",type:!0,theme:"warning"};this.$store.commit("snackbar",i)}}}},Zt=zt,Qt=(i("8e0a"),Object(g["a"])(Zt,vt,pt,!1,null,null,null)),Xt=Qt.exports;_()(Qt,{VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCol:x["a"],VCombobox:dt["a"],VDialog:M["a"],VDivider:w["a"],VForm:D["a"],VIcon:V["a"],VRow:P["a"],VSelect:mt["a"],VSpacer:N["a"],VTextField:R["a"]});var te=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"medicalPrintOption"},[i("v-dialog",{attrs:{width:"50vw"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{class:t.titleClass,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),i("v-card-text",[i("v-alert",{staticClass:"mt-2",attrs:{color:"primary",outlined:""}},[i("div",{staticClass:"d-flex justify-space-between"},[i("h3",[t._v("生命徵象指定列印內容設定")]),i("div",[i("v-btn",{staticClass:"primary mr-1",on:{click:t.selectAll}},[t._v("全選")]),i("v-btn",{attrs:{color:"primary",outlined:""},on:{click:t.noAll}},[t._v("全不選")])],1)]),i("v-row",{staticClass:"mx-1",attrs:{justify:"space-between"}},[i("v-checkbox",{attrs:{label:"評估日期",value:"true"},model:{value:t.list.signlife.date,callback:function(e){t.$set(t.list.signlife,"date",e)},expression:"list.signlife.date"}}),i("v-checkbox",{attrs:{label:"評估時間",value:"true"},model:{value:t.list.signlife.time,callback:function(e){t.$set(t.list.signlife,"time",e)},expression:"list.signlife.time"}}),i("v-checkbox",{attrs:{label:"檢查結果",value:"true"},model:{value:t.list.signlife.result,callback:function(e){t.$set(t.list.signlife,"result",e)},expression:"list.signlife.result"}}),i("v-checkbox",{attrs:{label:"體重",value:"true"},model:{value:t.list.signlife.weight,callback:function(e){t.$set(t.list.signlife,"weight",e)},expression:"list.signlife.weight"}}),i("v-checkbox",{attrs:{label:"血壓(H)",value:"true"},model:{value:t.list.signlife.bp_h,callback:function(e){t.$set(t.list.signlife,"bp_h",e)},expression:"list.signlife.bp_h"}}),i("v-checkbox",{attrs:{label:"血壓(L)",value:"true"},model:{value:t.list.signlife.bp_l,callback:function(e){t.$set(t.list.signlife,"bp_l",e)},expression:"list.signlife.bp_l"}}),i("v-checkbox",{attrs:{label:"脈搏",value:"true"},model:{value:t.list.signlife.pulse,callback:function(e){t.$set(t.list.signlife,"pulse",e)},expression:"list.signlife.pulse"}}),i("v-checkbox",{attrs:{label:"體溫",value:"true"},model:{value:t.list.signlife.temperature,callback:function(e){t.$set(t.list.signlife,"temperature",e)},expression:"list.signlife.temperature"}}),i("v-checkbox",{attrs:{label:"呼吸",value:"true"},model:{value:t.list.signlife.breath,callback:function(e){t.$set(t.list.signlife,"breath",e)},expression:"list.signlife.breath"}}),i("v-checkbox",{attrs:{label:"血糖",value:"true"},model:{value:t.list.signlife.blood_sugar,callback:function(e){t.$set(t.list.signlife,"blood_sugar",e)},expression:"list.signlife.blood_sugar"}}),i("v-checkbox",{attrs:{label:"血氧濃度",value:"true"},model:{value:t.list.signlife.blood_oxygen,callback:function(e){t.$set(t.list.signlife,"blood_oxygen",e)},expression:"list.signlife.blood_oxygen"}}),i("v-checkbox",{attrs:{label:"疼痛指數",value:"true"},model:{value:t.list.signlife.pain,callback:function(e){t.$set(t.list.signlife,"pain",e)},expression:"list.signlife.pain"}}),i("v-checkbox",{attrs:{label:"GCS-E",value:"true"},model:{value:t.list.signlife.gcs_e,callback:function(e){t.$set(t.list.signlife,"gcs_e",e)},expression:"list.signlife.gcs_e"}}),i("v-checkbox",{attrs:{label:"GCS-V",value:"true"},model:{value:t.list.signlife.gcs_v,callback:function(e){t.$set(t.list.signlife,"gcs_v",e)},expression:"list.signlife.gcs_v"}}),i("v-checkbox",{attrs:{label:"GCS-M",value:"true"},model:{value:t.list.signlife.gcs_m,callback:function(e){t.$set(t.list.signlife,"gcs_m",e)},expression:"list.signlife.gcs_m"}}),i("v-checkbox",{attrs:{label:"大便次數",value:"true"},model:{value:t.list.signlife.stool,callback:function(e){t.$set(t.list.signlife,"stool",e)},expression:"list.signlife.stool"}}),i("v-checkbox",{attrs:{label:"備註",value:"true"},model:{value:t.list.signlife.note,callback:function(e){t.$set(t.list.signlife,"note",e)},expression:"list.signlife.note"}})],1),i("v-divider",{staticClass:"my-3"}),i("h3",[t._v("資料距離今日天數設定")]),i("v-text-field",{attrs:{label:"天數",type:"number"},model:{value:t.list.day,callback:function(e){t.$set(t.list,"day",e)},expression:"list.day"}})],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"primary",on:{click:t.printOK}},[t._v("確認列印")])],1)],1)],1)],1)},ee=[],ie={props:["medicalRecordItems","eatMedicineTimeItems"],data:function(){return{dialog:!1,list:{signlife:{date:"",time:"",result:"",weight:"",bp_h:"",bp_l:"",pulse:"",temperature:"",breath:"",blood_sugar:"",blood_oxygen:"",pain:"",gcs_e:"",gcs_v:"",gcs_m:"",stool:"",note:""},day:10},emptyRules:[function(t){return!!t||"不可空白"}],title:"",titleClass:"",process:"",items:[],signlifeItems:[]}},mounted:function(){this.$on("childFn",(function(t){this.dialog=!0,this.enterProcess(t)})),this.selectAll(),this.getSignlife()},methods:{enterProcess:function(t){this.process="edit",this.title="列印醫院就診紀錄設定",this.titleClass="font-weight-black primary lighten-2",this.items=t},getSignlife:function(){var t=this,e={key:"u_snkey",value:this.$store.state.uData.snkey};this.axios.post("general/getByKey/"+this.$store.state.databaseName+"/signlife",o.a.stringify(e)).then((function(e){t.signlifeItems=e.data}))},printOK:function(){var t=this;this.$confirm("確認顯示列印就診紀錄單畫面?").then((function(e){if(e){var i=t.items,s={key:"user_snkey",value:t.$store.state.uData.snkey};t.axios.post("medicinerecord/getByKey/"+t.$store.state.databaseName,o.a.stringify(s)).then((function(e){var s=e.data.filter((function(t){if(h()(i.date)>=h()(t.start_date)&&h()(t.medicineEndInfo.substring(3,13))>h()(i.date))return t["end_date"]=t.medicineEndInfo.substring(3,13),t}));0==s.length?i["medicineData"]=[]:(s=s.filter((function(e){var i=t.medicalRecordItems.find((function(t){return e.medical_snkey==t.snkey}));if(i)return e["medical"]=i,e})),s=s.filter((function(e){var i=t.eatMedicineTimeItems.find((function(t){return e.eat_medicine_time_snkey==t.snkey}));if(i)return e["eat_medicine_time"]=i,e}))),t.list.startDay=h()(i.date).add(-t.list.day,"day").format("YYYY-MM-DD"),t.list.endDay=h()(i.date).format("YYYY-MM-DD");var a=t.signlifeItems.filter((function(e){return h()(e.date).format("YYYY-MM-DD")>=h()(i.date).add(-t.list.day,"day").format("YYYY-MM-DD")&&h()(e.date).format("YYYY-MM-DD")<=h()(i.date).format("YYYY-MM-DD")})),n={medicalData:i,medicineData:s,signlifeData:a,printSet:t.list};sessionStorage.setItem("printData",JSON.stringify(n));var r=t.$router.resolve({path:"/print/medicalprint"});window.open(r.href,"_blank")}))}}))},selectAll:function(){for(var t in this.list.signlife)this.list.signlife[t]="true"},noAll:function(){for(var t in this.list.signlife)this.list.signlife[t]=""}}},se=ie,ae=Object(g["a"])(se,te,ee,!1,null,null,null),ne=ae.exports;function re(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function oe(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?re(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):re(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}_()(ae,{VAlert:rt["a"],VBtn:b["a"],VCard:k["a"],VCardActions:$["b"],VCardText:$["d"],VCardTitle:$["e"],VCheckbox:lt["a"],VDialog:M["a"],VDivider:w["a"],VRow:P["a"],VSpacer:N["a"],VTextField:R["a"]});var le={components:{popupadd:ht,datepicker:d["a"],MedicineRecordAdd:Xt,medicalPrintOption:ne},data:function(){return{emptyRules:[function(t){return!!t||"不可空白"}],viewData:[],serachKey:"",medicineEdititem:{},itemsPerPageOptions:[10,20,30],itemsPerPage:10,medicalRecordItems:[],medicalRecordList:{},medicineList:{},start_time:[],medicineRecordItems:[],eatMedicineTimeItems:[],printMonth:h()().format("YYYY-MM"),loading:!1,sortItems:[{text:"建檔日",key:"snkey",type:"int"},{text:"就診日",key:"date",type:"date"}],sortKey:"",printPerPage:"10"}},filters:{returnCounts:function(t){return 0==t?"":"("+(parseInt(t)+1)+")"}},computed:{filterItems:function(){var t=this.serachKey.split(" "),e="";return t.reduce((function(t,i){return t.filter((function(t){if(e=JSON.stringify(t).toUpperCase(),e.includes(i.toUpperCase()))return t}))}),this.medicalRecordItems)}},mounted:function(){this.getMedicalData(),this.getEatMedicineTime()},watch:{sortKey:function(){this.medicalRecordItems=this.sort(this.medicalRecordItems,this.sortKey.key,this.sortKey.type)}},methods:{goPrint:function(){this.$router.push("/main/printmanager/medicinerecordprintmanage")},stopMedicine:function(t){var e=this,i={snkey:t.snkey,stop:t.stop,edit_man:""};this.axios.post("general/edit/"+this.$store.state.databaseName+"/medicine_record",o.a.stringify(i)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已修改",type:!0,theme:"success"};e.$store.commit("snackbar",i)}}))},printConfirm:function(){var t=this;this.$confirm("確認顯示列印藥單畫面?").then((function(e){if(e){var i={key:"user_snkey",value:t.$store.state.uData.snkey};t.axios.post("medicinerecord/getByKey/"+t.$store.state.databaseName,o.a.stringify(i)).then((function(e){var i=e.data.filter((function(e){if("true"!=e.stop&&h()(t.printMonth).format("YYYY-MM")>=h()(e.start_date).format("YYYY-MM")&&h()(t.printMonth).format("YYYY-MM")<=h()(e.medicineEndInfo.substring(3,13)).format("YYYY-MM"))return e["end_date"]=e.medicineEndInfo.substring(3,13),e}));if(0==i.length){var s={msg:"暫無符合資料,請重新確認月份",type:!0,theme:"warning"};return t.$store.commit("snackbar",s),!1}i=i.filter((function(e){var i=t.medicalRecordItems.find((function(t){return e.medical_snkey==t.snkey}));if(i)return e["medical"]=i,e})),i=i.filter((function(e){var i=t.eatMedicineTimeItems.find((function(t){return e.eat_medicine_time_snkey==t.snkey}));if(i)return e["eat_medicine_time"]=i,e})),i=i.sort((function(t,e){return parseInt(t.medical_snkey)<parseInt(e.medical_snkey)?1:-1}));var a={printMonth:t.printMonth,medicineData:i,printPerPage:t.printPerPage};sessionStorage.setItem("printData",JSON.stringify(a));var n=t.$router.resolve({path:"/print/medicineprint"});window.open(n.href,"_blank")}))}}))},getEatMedicineTime:function(){var t=this;this.axios.post("general/getAll/"+this.$store.state.databaseName+"/eat_medicine_time").then((function(e){t.eatMedicineTimeItems=e.data}))},getMedicalData:function(){var t=this;this.axios.post("medicinerecord/getByUserSnkey/"+this.$store.state.databaseName+"/"+this.$store.state.uData.snkey).then((function(e){e.data.length>0?(t.medicalRecordItems=e.data.map((function(t,e){return t["pipeline"].length>0?t["pipeline"]=JSON.parse(t.pipeline):t["pipeline"]=[],t})),t.sortKey={text:"就診日",key:"date",type:"date"}):(t.medicalRecordItems=[],t.medicineRecordItems=[])}))},getMedicineRecord:function(){var t=this,e={key:"medical_snkey",value:this.medicalRecordList.snkey};this.axios.post("medicinerecord/getByKey/"+this.$store.state.databaseName,o.a.stringify(e)).then((function(e){t.medicineRecordItems=e.data,t.sortBy("medicineRecordItems")}))},sort:function(t,e,i){return t.sort((function(t,s){return"int"==i?parseInt(t[e])<parseInt(s[e])?1:-1:t[e]<s[e]?1:-1}))},sortBy:function(t){"medicalRecordItems"==t&&(this.medicalRecordItems=this.medicalRecordItems.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1}))),"medicineRecordItems"==t&&(this.medicineRecordItems=this.medicineRecordItems.sort((function(t,e){return parseInt(t.snkey)<parseInt(e.snkey)?1:-1})))},editMedicineRecord:function(t){this.$refs.editMedicineProcess.$emit("fromParent",t)},delMedicineRecord:function(t){var e=this;this.$confirm("確認刪除?").then((function(i){t.delman=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var s={snkey:t.snkey,tablename:"medicine_record",info:JSON.stringify(t)};i&&e.axios.post("general/delv3/"+e.$store.state.databaseName+"/medicine_record",o.a.stringify(s)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getMedicineRecord()}}))}))},edit:function(t){this.$refs.editProcess.$emit("fromParent",t)},del:function(t){var e=this;this.$confirm("確認刪除?將連同相關用藥內容一同刪除!!").then((function(i){if(i){e.axios.post("medicinerecord/getMedicineRecordByMedicalSnkey/"+e.$store.state.databaseName+"/"+t.snkey).then((function(t){t.data.forEach((function(t){e.delMedicineRecordMulti(t)}))})),t.delman=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var s={snkey:t.snkey,tablename:"medical_record",info:JSON.stringify(t)};e.axios.post("general/delv3/"+e.$store.state.databaseName+"/medical_record",o.a.stringify(s)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getMedicalData(),e.medicalRecordList={},e.medicineRecordItems=[]}}))}}))},delMedicineRecordMulti:function(t){var e=this;t.delman=this.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")";var i={snkey:t.snkey,tablename:"medicine_record",info:JSON.stringify(t)};this.axios.post("general/delv3/"+this.$store.state.databaseName+"/medicine_record",o.a.stringify(i)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.medicineRecordItems=[]}}))},medicineEndInfoMath:function(t,e,i){var s=Math.ceil(t.medicine_counts/i.length),a=Math.floor((t.medicine_counts-1)/i.length),n=(t.medicine_counts-1)%i.length,r=i.indexOf(t.start_time),o=0;r+n>=i.length&&(o=1);var l=(r+n)%i.length;return h()().format(),e>1?"日期:"+h()(t.start_date).add(s-1+a*(e-1)+o,"day").format("YYYY-MM-DD")+" 時段:"+i[l]:"日期:"+h()(t.start_date).add(s-1+o,"day").format("YYYY-MM-DD")+" 時段:"+i[l]},medicalCopy:function(t){var e=this;this.$confirm("確認延續用藥?").then((function(i){if(i){var s=oe({},t);"0000-00-00"==s.back_date&&(s.back_date=s.date);var a={date:s.back_date,user_snkey:s.user_snkey,hospital_snkey:s.hospital_snkey,branch_snkey:s.branch_snkey,doctor_snkey:s.doctor_snkey,outpatient:s.outpatient,main_cause_of_treatment_snkey:s.main_cause_of_treatment_snkey,description:s.description,count:parseInt(s.count)+1};e.$store.commit("getTime"),a["create_man"]=e.$store.state.pData.username+"("+e.$store.state.time+")",e.axios.post("general/add/"+e.$store.state.databaseName+"/medical_record",o.a.stringify(a)).then((function(t){if(1==t.data.state){e.createMedicineRecord(s,t.data.snkey);var i={msg:"已新增資料",type:!0,theme:"success"};e.$store.commit("snackbar",i),e.getMedicalData()}}))}}))},createMedicineRecord:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.axios.post("medicinerecord/getMedicineRecordByMedicalSnkey/"+this.$store.state.databaseName+"/"+t.snkey).then((function(t){var s=[];t.data.forEach((function(t,a){var n=t.medicineEndInfo.substr(3,10),r=t.medicineEndInfo.substr(17,2);e.eatMedicineTimeItems.some((function(o){if(o.snkey==t.eat_medicine_time_snkey){var l=o.day,c=o.time.split(",");c.length==c.indexOf(r)+1?(n=h()(n).add(l,"day").format("YYYY-MM-DD"),r=c[0]):r=c[c.indexOf(r)+1],t.medical_snkey=i,t.start_date=n,t.start_time=r,t.medicineEndInfo=e.medicineEndInfoMath(t,l,c),t["create_man"]=e.$store.state.pData.username+"("+h()().format("YYYY-MM-DD HH:mm:ss")+")",t["edit_man"]="",delete t["snkey"],delete t["name"],delete t["method_name"],delete t["unit_name"],delete t["effect"],s[a]=t}}))})),e.axios.post("general/addMulti/"+e.$store.state.databaseName+"/medicine_record",o.a.stringify(s)).then((function(t){t.data.state}))}))},enterNursingRecord:function(t){var e=this,i={date:t.date,u_snkey:t.user_snkey,nursingrecord_content:"[就診紀錄內容]\n就診日期:"+t.date+"; 診別:"+t.outpatient+"; 時段:"+t.time+"; 醫院:"+t.hospital_name+"; 科別:"+t.branch_name+"; 醫生:"+t.doctor_name+"; 就診主因:"+t.main_cause_of_treatment_name+"; 回診日期:"+t.back_date+"; 使用車輛:"+t.car+"; 陪診人員:"+t.accompany+"; 管路:"+t.pipeline+"; 管路到期日:"+t.pipelinedate+"; 攜帶物品:"+t.carryitems+"\n\n原因狀況描述:\n"+t.description+"\n\n就醫情形回覆:\n"+t.response},s={key:"u_snkey",value:this.$store.state.uData.snkey};this.axios.post("general/getByKey/"+this.$store.state.databaseName+"/nursingrecord",o.a.stringify(s)).then((function(s){var a=s.data.filter((function(e){return e.date==t.date}));e.$store.commit("getTime"),0==a.length?(i["create_man"]=e.$store.state.pData.username+"("+e.$store.state.time+")",e.axios.post("general/add/"+e.$store.state.databaseName+"/nursingrecord",o.a.stringify(i)).then((function(t){if(1==t.data.state){var i={msg:"轉入護理紀錄-已新增",type:!0,theme:"success"};e.$store.commit("snackbar",i)}}))):(i["snkey"]=a[0].snkey,i["nursingrecord_content"]=a[0].nursingrecord_content+i.nursingrecord_content,i["edit_man"]=e.$store.state.pData.username+"("+e.$store.state.time+")",e.axios.post("general/edit/"+e.$store.state.databaseName+"/nursingrecord",o.a.stringify(i)).then((function(t){if(console.log(t.data),1==t.data.state){var i={msg:"轉入護理紀錄資料-已追加",type:!0,theme:"success"};e.$store.commit("snackbar",i)}})))}))},print:function(t){this.$refs.enterEdit.$emit("childFn",t)}}},ce=le,de=(i("459e"),i("e449")),me=i("1f4f"),ue=Object(g["a"])(ce,s,a,!1,null,null,null);e["default"]=ue.exports;_()(ue,{VBtn:b["a"],VCard:k["a"],VCardText:$["d"],VCardTitle:$["e"],VCheckbox:lt["a"],VCol:x["a"],VCombobox:dt["a"],VDataIterator:Vt["a"],VForm:D["a"],VIcon:V["a"],VList:I["a"],VListItem:C["a"],VListItemTitle:S["k"],VMenu:de["a"],VRow:P["a"],VSimpleTable:me["a"],VSpacer:N["a"],VTextField:R["a"]})},"8e0a":function(t,e,i){"use strict";i("1184")},bc60:function(t,e,i){},c130:function(t,e,i){},d6e6:function(t,e,i){"use strict";i("48e6")},d9a2:function(t,e,i){"use strict";i("20b5")},e408:function(t,e,i){"use strict";i("236b")},e94a:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-text-field",t._g({attrs:{label:t.label,value:t.date}},s))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-date-picker",{attrs:{locale:"zh-tw"},on:{input:function(e){t.menu=!1},change:t.confirm},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)},a=[],n={props:["label","msg"],data:function(){return{date:"",menu:!1}},model:{prop:"msg",event:"datapicker"},mounted:function(){this.date=this.msg},methods:{confirm:function(){this.menu=!1,this.$emit("datapicker",this.date)}},watch:{msg:function(t,e){"0000-00-00"==this.msg?this.date="":this.date=this.msg}}},r=n,o=i("2877"),l=i("6544"),c=i.n(l),d=i("2e4b"),m=i("e449"),u=i("8654"),f=Object(o["a"])(r,s,a,!1,null,null,null);e["a"]=f.exports;c()(f,{VDatePicker:d["a"],VMenu:m["a"],VTextField:u["a"]})},e9f9:function(t,e,i){},f3fc:function(t,e,i){},fce8:function(t,e,i){"use strict";i("35b9")}}]);
//# sourceMappingURL=chunk-21c5626c.1c49ba66.js.map