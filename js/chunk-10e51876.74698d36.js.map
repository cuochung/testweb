{"version":3,"sources":["webpack:///./src/views/main/UserList.vue?f992","webpack:///./node_modules/vuetify-loader/lib/runtime/installDirectives.js","webpack:///./src/views/main/UserList.vue?df52","webpack:///src/views/main/UserList.vue","webpack:///./src/views/main/UserList.vue?f5ee","webpack:///./src/views/main/UserList.vue"],"names":["module","exports","component","directives","options","extendOptions","i","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","$store","state","pData","pharmacist_key","_e","on","$event","stopPropagation","showUserOutputPage","auth","search","type","indexOf","keyCode","shiftKey","altKey","changeHidden","model","value","callback","$$v","serachKey","expression","ref","getAllData","viewData","itemsPerPage","itemsPerPageOptions","scopedSlots","_u","key","fn","props","_s","items","length","showAll","showLiveIn","showLiveOut","_l","item","index","name","rawName","class","sex","edit","print","publicexpenses","dnr","loading","del","goDocument","man_pic","women_pic","pic_url","staticStyle","base_url","hidden","p_code","bed_name","staticRenderFns","components","data","editMode","userHidden","mounted","cData","sethidden","methods","$api","databaseName","sortBy","sort","a","b","user_edit_key","$refs","editProcess","$emit","pop","commit","$confirm","then","delData","delman","postData","snkey","tablename","info","JSON","stringify","res","searchArr","split","outputitems","str","forEach","filter","toUpperCase","includes","path","query","window","open","routeData","href","console","log","sessionStorage","setItem","$router","push","VAlert","VBtn","VCard","VCardText","VCardTitle","VCol","VDataIterator","VIcon","VImg","VRow","VSpacer","VTextField","VToolbar","Ripple"],"mappings":"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","file":"js/chunk-10e51876.74698d36.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserList.vue?vue&type=style&index=0&lang=scss&\"","// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function installDirectives (component, directives) {\n  var options = typeof component.exports === 'function'\n    ? component.exports.extendOptions\n    : component.options\n\n  if (typeof component.exports === 'function') {\n    options.directives = component.exports.options.directives\n  }\n\n  options.directives = options.directives || {}\n\n  for (var i in directives) {\n    options.directives[i] = options.directives[i] || directives[i]\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"userlist\"},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('h2',{staticClass:\"subheading grey--text d-flex align-center\"},[_c('v-icon',{staticClass:\"mx-1\"},[_vm._v(\"mdi-badge-account-horizontal\")]),_c('span',[_vm._v(\"病歷管理&維護\")])],1)]),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\"}},[(!_vm.$store.state.pData.pharmacist_key)?_c('v-btn',{staticClass:\"success mr-2\",on:{\"click\":function($event){$event.stopPropagation();return _vm.showUserOutputPage()}}},[_vm._v(\"上傳衛福部 / 列印全人評估\")]):_vm._e(),(_vm.auth.user_search_key)?_c('v-text-field',{attrs:{\"hide-details\":\"\",\"prepend-icon\":\"mdi-magnify\",\"single-line\":\"\",\"label\":\"搜尋\"},on:{\"keyup\":[function($event){$event.stopPropagation();return _vm.search()},function($event){if(!$event.type.indexOf('key')&&$event.keyCode!==72){ return null; }if(!$event.shiftKey){ return null; }if(!$event.altKey){ return null; }return _vm.changeHidden($event)}]},model:{value:(_vm.serachKey),callback:function ($$v) {_vm.serachKey=$$v},expression:\"serachKey\"}}):_vm._e(),(_vm.auth.user_add_key)?_c('popupadd',{ref:\"editProcess\",on:{\"getAllData\":_vm.getAllData}}):_vm._e()],1)],1)],1),_c('v-data-iterator',{attrs:{\"items\":_vm.viewData,\"items-per-page\":_vm.itemsPerPage,\"footer-props\":{ itemsPerPageOptions: _vm.itemsPerPageOptions }},on:{\"update:itemsPerPage\":function($event){_vm.itemsPerPage=$event},\"update:items-per-page\":function($event){_vm.itemsPerPage=$event}},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('v-card',[_c('v-card-title',[_vm._v(\" 目前總筆數:\"+_vm._s(_vm.items.length)+\" / 顯示:\"+_vm._s(_vm.viewData.length)+\" \"),_c('v-spacer'),_c('v-btn',{staticClass:\"mx-1 font-weight-bold\",attrs:{\"outlined\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showAll($event)}}},[_vm._v(\"全部顯示\")]),_c('v-btn',{staticClass:\"mx-1 font-weight-bold\",attrs:{\"outlined\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showLiveIn($event)}}},[_vm._v(\"顯示入住中\")]),_c('v-btn',{staticClass:\"mx-1 font-weight-bold\",attrs:{\"outlined\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showLiveOut($event)}}},[_vm._v(\"顯示非入住中\")])],1),_c('v-card-text',[_c('v-row',{staticClass:\"text-center\"},_vm._l((props.items),function(item,index){return _c('v-col',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],key:index,attrs:{\"cols\":\"6\",\"sm\":\"4\",\"md\":\"3\",\"lg\":\"2\"}},[_c('v-card',{class:[\n                  { 'blue lighten-2': item.sex == '男' },\n                  { 'pink lighten-4': item.sex == '女' } ],attrs:{\"outlined\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.edit(item)}}},[_c('div',{staticClass:\"d-flex ma-1\"},[_c('v-btn',{staticClass:\"primary\",attrs:{\"icon\":\"\",\"small\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.print(item)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-printer\")])],1),(item.publicexpenses == 'true')?_c('v-btn',{staticClass:\"yellow\",attrs:{\"icon\":\"\",\"small\":\"\",\"color\":\"blue\"}},[_vm._v(\"公費\")]):_vm._e(),(item.dnr == 'true')?_c('v-btn',{staticClass:\"white\",attrs:{\"icon\":\"\",\"small\":\"\",\"color\":\"red\"}},[_c('v-icon',[_vm._v(\"mdi-heart-circle\")])],1):_vm._e(),(item.takeadayoff)?_c('v-btn',{staticClass:\"success\",attrs:{\"icon\":\"\",\"small\":\"\",\"color\":\"white\"}},[_vm._v(\"請假中\")]):_vm._e(),(item.behospitalized)?_c('v-btn',{staticClass:\"error\",attrs:{\"icon\":\"\",\"small\":\"\",\"color\":\"white\"}},[_vm._v(\"住院中\")]):_vm._e(),_c('v-spacer'),(_vm.auth.user_del_key)?_c('v-btn',{staticClass:\"red\",attrs:{\"icon\":\"\",\"small\":\"\",\"loading\":_vm.loading,\"disabled\":_vm.loading},on:{\"click\":function($event){$event.stopPropagation();return _vm.del(item)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-account-remove-outline\")])],1):_vm._e(),_c('v-btn',{staticClass:\"success\",attrs:{\"icon\":\"\",\"small\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.goDocument(item)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-view-list\")])],1)],1),_c('v-img',{staticClass:\"align-end\",attrs:{\"src\":item.sex == '男' ? _vm.man_pic : _vm.women_pic}},[(item.pic_url != 'lazypic.jpg')?_c('img',{staticClass:\"mb-2\",staticStyle:{\"width\":\"35%\"},attrs:{\"src\":_vm.base_url + 'upload/thumb/' + item.pic_url}}):_vm._e()]),_c('v-alert',{staticClass:\"ma-1\",class:[\n                    { 'blue lighten-2': item.sex == '男' },\n                    { 'pink lighten-4': item.sex == '女' },\n                    { 'ma-0 pa-0': true } ]},[_c('h4',[(item.hidden == 'true')?_c('v-icon',{attrs:{\"color\":\"yellow\"}},[_vm._v(\"mdi-eye-off-outline\")]):_vm._e(),_vm._v(\" \"+_vm._s(item.p_code)+\" / \"+_vm._s(item.name)+\" \")],1),_c('h4',[_vm._v(\"床號:\"+_vm._s(item.bed_name))])])],1)],1)}),1)],1)],1)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"userlist\">\r\n    <v-row>\r\n      <v-col cols=\"12\" md=\"6\">\r\n        <h2 class=\"subheading grey--text d-flex align-center\">\r\n          <v-icon class=\"mx-1\">mdi-badge-account-horizontal</v-icon>\r\n          <span>病歷管理&維護</span>\r\n        </h2>\r\n      </v-col>\r\n      <v-col cols=\"12\" md=\"6\">\r\n        <!-- 功能表 -->\r\n        <v-toolbar dense>\r\n          <v-btn class=\"success mr-2\" \r\n          v-if=\"!$store.state.pData.pharmacist_key\"\r\n          @click.stop=\"showUserOutputPage()\">上傳衛福部 / 列印全人評估</v-btn>\r\n          <v-text-field\r\n            hide-details\r\n            prepend-icon=\"mdi-magnify\"\r\n            single-line\r\n            label=\"搜尋\"\r\n            v-model=\"serachKey\"\r\n            @keyup.stop=\"search()\"\r\n            @keyup.shift.alt.72=\"changeHidden\"\r\n            v-if=\"auth.user_search_key\"\r\n          ></v-text-field>\r\n\r\n          <popupadd\r\n            @getAllData=\"getAllData\"\r\n            ref=\"editProcess\"\r\n            v-if=\"auth.user_add_key\"\r\n          ></popupadd>\r\n        </v-toolbar>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <v-data-iterator\r\n      :items=\"viewData\"\r\n      :items-per-page.sync=\"itemsPerPage\"\r\n      :footer-props=\"{ itemsPerPageOptions }\"\r\n    >\r\n      <template v-slot:default=\"props\">\r\n        <v-card>\r\n          <v-card-title>\r\n            目前總筆數:{{ items.length }} / 顯示:{{ viewData.length }}\r\n            <v-spacer></v-spacer>\r\n            <v-btn outlined color=\"primary\" class=\"mx-1 font-weight-bold\" @click.stop=\"showAll\"\r\n              >全部顯示</v-btn\r\n            >\r\n            \r\n            <v-btn\r\n              outlined\r\n              color=\"primary\"\r\n              class=\"mx-1 font-weight-bold\"\r\n              @click.stop=\"showLiveIn\"\r\n              >顯示入住中</v-btn\r\n            >\r\n            <v-btn\r\n              outlined\r\n              color=\"primary\"\r\n              class=\"mx-1 font-weight-bold\"\r\n              @click.stop=\"showLiveOut\"\r\n              >顯示非入住中</v-btn\r\n            >\r\n\r\n          </v-card-title>\r\n\r\n          <v-card-text>\r\n            <v-row class=\"text-center\">\r\n              <v-col\r\n                v-ripple\r\n                cols=\"6\"\r\n                sm=\"4\"\r\n                md=\"3\"\r\n                lg=\"2\"\r\n                v-for=\"(item, index) in props.items\"\r\n                :key=\"index\"\r\n              >\r\n                <v-card\r\n                  @click.stop=\"edit(item)\"\r\n                  outlined\r\n                  :class=\"[\r\n                    { 'blue lighten-2': item.sex == '男' },\r\n                    { 'pink lighten-4': item.sex == '女' },\r\n                  ]\"\r\n                >\r\n                  <div class=\"d-flex ma-1\">\r\n                    <v-btn icon class=\"primary\" small @click.stop=\"print(item)\">\r\n                      <v-icon color=\"white\">mdi-printer</v-icon>\r\n                    </v-btn>\r\n                    <v-btn\r\n                      icon\r\n                      small\r\n                      class=\"yellow\"\r\n                      color=\"blue\"\r\n                      v-if=\"item.publicexpenses == 'true'\"\r\n                      >公費</v-btn\r\n                    >\r\n                    <v-btn\r\n                      icon\r\n                      small\r\n                      class=\"white\"\r\n                      color=\"red\"\r\n                      v-if=\"item.dnr == 'true'\"\r\n                    >\r\n                      <v-icon>mdi-heart-circle</v-icon>\r\n                    </v-btn>\r\n                    <v-btn\r\n                      icon\r\n                      small\r\n                      class=\"success\"\r\n                      color=\"white\"\r\n                      v-if=\"item.takeadayoff\"\r\n                      >請假中</v-btn\r\n                    >\r\n                    <v-btn\r\n                      icon\r\n                      small\r\n                      class=\"error\"\r\n                      color=\"white\"\r\n                      v-if=\"item.behospitalized\"\r\n                      >住院中</v-btn\r\n                    >\r\n                    <v-spacer></v-spacer>\r\n\r\n                    <v-btn\r\n                      icon\r\n                      class=\"red\"\r\n                      small\r\n                      @click.stop=\"del(item)\"\r\n                      v-if=\"auth.user_del_key\"\r\n                      :loading=\"loading\"\r\n                      :disabled=\"loading\"\r\n                    >\r\n                      <v-icon color=\"white\">mdi-account-remove-outline</v-icon>\r\n                    </v-btn>\r\n                    <v-btn\r\n                      icon\r\n                      class=\"success\"\r\n                      small\r\n                      @click.stop=\"goDocument(item)\"\r\n                    >\r\n                      <v-icon color=\"white\">mdi-view-list</v-icon>\r\n                    </v-btn>\r\n                  </div>\r\n                  <v-img\r\n                    :src=\"item.sex == '男' ? man_pic : women_pic\"\r\n                    class=\"align-end\"\r\n                  >\r\n                    <img\r\n                      class=\"mb-2\"\r\n                      style=\"width: 35%\"\r\n                      :src=\"base_url + 'upload/thumb/' + item.pic_url\"\r\n                      v-if=\"item.pic_url != 'lazypic.jpg'\"\r\n                    />\r\n                  </v-img>\r\n\r\n                  <v-alert\r\n                    :class=\"[\r\n                      { 'blue lighten-2': item.sex == '男' },\r\n                      { 'pink lighten-4': item.sex == '女' },\r\n                      { 'ma-0 pa-0': true },\r\n                    ]\"\r\n                    class=\"ma-1\"\r\n                  >\r\n                    <h4>\r\n                      <v-icon color=\"yellow\" v-if=\"item.hidden == 'true'\"\r\n                        >mdi-eye-off-outline</v-icon\r\n                      >\r\n                      {{ item.p_code }} / {{ item.name }}\r\n                    </h4>\r\n                    <h4>床號:{{ item.bed_name }}</h4>\r\n                  </v-alert>\r\n                </v-card>\r\n              </v-col>\r\n            </v-row>\r\n          </v-card-text>\r\n        </v-card>\r\n      </template>\r\n    </v-data-iterator>\r\n    <!-- <pre>{{viewData}}</pre> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\nimport popupadd from \"@/views/main/UserAdd\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport default {\r\n  components: { popupadd },\r\n  data() {\r\n    return {\r\n      // dialog: false,\r\n      items: [],\r\n      viewData: [],\r\n      serachKey: \"\",\r\n      itemsPerPageOptions: [18, 36],\r\n      itemsPerPage: 18,\r\n      base_url: this.$store.state.base_url,\r\n      man_pic:\r\n        this.$store.state.base_url +\r\n        \"/images/juumin_kihon_daichou_card_man.png\",\r\n      women_pic:\r\n        this.$store.state.base_url +\r\n        \"/images/juumin_kihon_daichou_card_woman.png\",\r\n      editMode: false, //控制顯示修改/刪除按鈕\r\n      // userHidden: true, //控制顯示隱藏床位,true -> 不顯示\r\n      userHidden: \"\", //控制顯示隱藏床位,true -> 不顯示\r\n      auth: this.$store.state.pData, //各畫面授權使用功能限定(載入放在mounted)\r\n      loading: false, //處理新增/修改/刪除按鈕讀取時的動畫設定 , 同時控制disabled\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.auth = this.$store.state.pData;\r\n    this.userHidden = this.$store.state.cData.sethidden;\r\n    this.getAllData();\r\n  },\r\n\r\n  methods: {\r\n    getAllData() {\r\n      //取得所有資料\r\n      this.$api.options(\"user/getAll/\" + this.$store.state.databaseName)\r\n        .then((rs) => {\r\n          var getData = rs.map(function (obj) {\r\n            if (obj.pic_url == \"\") {\r\n              obj.pic_url = \"lazypic.jpg\";\r\n            }\r\n            if (obj.pic_url_familytree == \"\") {\r\n              obj.pic_url_familytree = \"lazypic.jpg\";\r\n            }\r\n            return obj;\r\n          });\r\n\r\n          if (this.userHidden == \"true\") {\r\n            //判斷要不要顯示隱藏的病床\r\n            getData = rs.filter((item) => {\r\n              return item.hidden == \"\";\r\n            });\r\n          }\r\n          this.items = this.sortBy(getData);\r\n          this.viewData = [...this.items];\r\n\r\n        });\r\n    },\r\n    sortBy(data) {\r\n      return data.sort(function (a, b) {\r\n        // return a.bed_name > b.bed_name ? 1 : -1;\r\n        var a = a.bed_name;\r\n        var b = b.bed_name;\r\n\r\n        if (a === b) {\r\n          return 0;\r\n        } else if (a === null) {\r\n          return 1;\r\n        } else if (b === null) {\r\n          return -1;\r\n        } else {\r\n          return a > b ? 1 : -1;\r\n        }\r\n      });\r\n    },\r\n    changeHidden() {\r\n      if (this.userHidden == \"true\") {\r\n        this.userHidden = \"false\";\r\n      } else {\r\n        this.userHidden = \"true\";\r\n      }\r\n      // this.userHidden = !this.userHidden;\r\n      this.getAllData();\r\n    },\r\n    edit(item) {\r\n      if (this.auth.user_edit_key) {\r\n        //這裡特別判斷修改功能的權限\r\n        //修改功能\r\n        this.$refs.editProcess.$emit(\"fromParent\", item);\r\n      } else {\r\n        var pop = { msg: \"修改功能未授權!!\", type: true, theme: \"warning\" };\r\n        this.$store.commit(\"snackbar\", pop);\r\n      }\r\n    },\r\n    del(delData) {\r\n      //刪除功能\r\n      this.$confirm(\"確認刪除?\").then((res) => {\r\n        delData.delman =\r\n          this.$store.state.pData.username +\r\n          \"(\" +\r\n          dayjs().format(\"YYYY-MM-DD HH:mm:ss\") +\r\n          \")\";\r\n        var postData = {\r\n          snkey: delData.snkey,\r\n          tablename: \"user\",\r\n          info: JSON.stringify(delData),\r\n        };\r\n\r\n        if (res) {\r\n          this.loading = true;\r\n            this.$api.delete(\"user\",postData)\r\n            .then((rs) => {\r\n              if (rs.state == 1) {\r\n                var pop = { msg: \"已刪除\", type: true, theme: \"success\" };\r\n                this.$store.commit(\"snackbar\", pop);\r\n                this.getAllData();\r\n                this.loading = false;\r\n              }\r\n            });\r\n        }\r\n      });\r\n    },\r\n    search() {\r\n      var searchArr = this.serachKey.split(\" \");\r\n      var outputitems = [...this.items];\r\n      var str = \"\";\r\n      searchArr.forEach((key) => {\r\n        if (key != \"\") {\r\n          outputitems = outputitems.filter((item) => {\r\n            str = JSON.stringify(item).toUpperCase();\r\n            if (str.includes(key.toUpperCase())) {\r\n              return item;\r\n            }\r\n          });\r\n        }\r\n      });\r\n      this.viewData = outputitems;\r\n    },\r\n    print(item) {\r\n      let routeData = this.$router.resolve({\r\n        path: \"/print/userprint\",\r\n        query: { data: JSON.stringify(item) },\r\n      });\r\n      window.open(routeData.href, \"_blank\");\r\n    },\r\n    showAll() {\r\n      this.viewData = [...this.items];\r\n    },\r\n    showLiveIn() {\r\n      //顯示住院中\r\n      console.log(\"livein\");\r\n      this.viewData = this.items.filter((item) => {\r\n        return item.bed_name != null;\r\n      });\r\n    },\r\n    showLiveOut() {\r\n      //顯示非住院中\r\n      console.log(\"liveout\");\r\n      this.viewData = this.items.filter((item) => {\r\n        return item.bed_name == null;\r\n      });\r\n    },\r\n    goDocument(item) {\r\n      sessionStorage.setItem(\"uData\", JSON.stringify(item));\r\n\r\n      //2021.8.26 新增判斷藥師權限只能直接登入72小時藥師評估表 pharmacistevaluationlist\r\n      if (this.$store.state.pData.pharmacist_key) {\r\n        this.$router.push(\"/main/document/pharmacistevaluationlist\");\r\n      } else {\r\n        this.$router.push(\"/main/document/medicinerecordlist\");\r\n      }\r\n    },\r\n    showUserOutputPage() {\r\n      let routeData = this.$router.resolve({\r\n        path: \"/print/userlistoutput\",\r\n      });\r\n      window.open(routeData.href, \"_blank\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\">\r\n.userlist {\r\n  .v-alert {\r\n    font-size: 1.4rem;\r\n    font-family: \"微軟正黑體\";\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserList.vue?vue&type=template&id=585ead70&\"\nimport script from \"./UserList.vue?vue&type=script&lang=js&\"\nexport * from \"./UserList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserList.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDataIterator } from 'vuetify/lib/components/VDataIterator';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAlert,VBtn,VCard,VCardText,VCardTitle,VCol,VDataIterator,VIcon,VImg,VRow,VSpacer,VTextField,VToolbar})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Ripple from 'vuetify/lib/directives/ripple'\ninstallDirectives(component, {Ripple})\n"],"sourceRoot":""}