(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ce1c8f6"],{"69ee":function(t,e,s){},"6da7":function(t,e,s){"use strict";s("69ee")},"7e17":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"FallRisksList"},[s("v-card",{staticClass:"mt-2"},[s("v-card-title",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"8"}},[s("h2",{staticClass:"subheading grey--text"},[s("v-icon",{staticClass:"mx-1"},[t._v("fas fa-file-alt")]),s("span",[t._v(" "+t._s(this.$store.state.uData.p_code)+" / "+t._s(this.$store.state.uData.name)+" ")]),s("span",[t._v("跌倒危險性評估")])],1)]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-toolbar",{attrs:{dense:"",rounded:""}},[s("v-text-field",{attrs:{"hide-details":"","prepend-icon":"mdi-magnify","single-line":"",label:"搜尋"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),s("popupadd",{ref:"childFn",attrs:{useDataBase:t.useDataBase,items:t.items},on:{getAllData:t.getAllData}})],1)],1)],1)],1),s("v-card-text",[s("v-card",{staticClass:"mt-2"},[s("v-card-text",[s("v-data-iterator",{attrs:{items:t.searchfilter,"items-per-page":t.itemsPerPage,"footer-props":{itemsPerPageOptions:t.itemsPerPageOptions}},on:{"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[s("v-simple-table",{staticClass:"mt-2 text-no-wrap",attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",{staticStyle:{"background-color":"#e3f2fd"}},[s("tr",[s("th"),s("th",[t._v("上傳紀錄")]),s("th",[t._v("評估日期")]),s("th",[t._v("紀錄人")]),s("th",[t._v("修改紀錄")])])]),s("tbody",t._l(e.items,(function(e,i){return s("tr",{key:i},[s("td",[s("v-menu",{attrs:{transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[s("v-btn",t._g({attrs:{color:"primary",dark:""}},i),[t._v("功能")])]}}],null,!0)},[s("v-list",[s("v-list-item",{on:{click:function(s){return t.edit(e)}}},[s("v-list-item-title",[t._v("修改")])],1),s("v-list-item",{on:{click:function(s){return t.del(e)}}},[s("v-list-item-title",[t._v("刪除")])],1),s("v-list-item",{on:{click:function(s){return t.pushToMOHW(e)}}},[s("v-list-item-title",[t._v("上傳衛福部")])],1),e.uploadData?s("v-list-item",{on:{click:function(s){return t.checkMOHWData(e)}}},[s("v-list-item-title",[t._v("確認上傳資料狀況")])],1):t._e()],1)],1)],1),s("td",[e.uploadData?s("div",[s("span",[t._v("已上傳")]),e.uploadState?t._e():s("span",[t._v("(未確認)")]),e.uploadState?s("span",[t._v("(已確認-"+t._s(t.returnState(e))+")")]):t._e()]):s("div",[s("span",[t._v("未上傳")])])]),s("td",[t._v(t._s(e.Date))]),s("td",[t._v(t._s(e.create_man))]),s("td",[t._v(t._s(e.edit_man))])])})),0)]},proxy:!0}],null,!0)})]}}])})],1)],1)],1)],1)],1)},a=[],l=(s("a4d3"),s("4de4"),s("7db0"),s("caad"),s("d81d"),s("4e827"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("2532"),s("1276"),s("159b"),s("96cf"),s("ade3")),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"HealthyHabitsAdd"},[s("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[s("v-icon",t._g({attrs:{color:"red lighten-2",dark:""},on:{click:t.addProcess}},i),[t._v("mdi-plus-circle")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{class:t.titleStyle,attrs:{"primary-title":""}},[t._v(t._s(t.title))]),s("v-card-text",[s("v-form",{ref:"form",staticClass:"mt-3"},[s("v-text-field",{attrs:{type:"date",label:"評估日期",rules:t.emptyRules},model:{value:t.list.Date,callback:function(e){t.$set(t.list,"Date",e)},expression:"list.Date"}}),s("v-autocomplete",{attrs:{items:t.qq1Items,label:"年紀≧65歲以上",rules:t.emptyRules,"return-object":""},model:{value:t.list.qq1,callback:function(e){t.$set(t.list,"qq1",e)},expression:"list.qq1"}}),s("v-autocomplete",{attrs:{items:t.qq2Items,label:"過去一年內曾跌倒",rules:t.emptyRules,"return-object":""},model:{value:t.list.qq2,callback:function(e){t.$set(t.list,"qq2",e)},expression:"list.qq2"}}),s("div",{staticClass:"d-flex"},[s("v-autocomplete",{staticClass:"mr-2",attrs:{items:t.qq3Items,label:"最近意識/認知出現異常",rules:t.emptyRules,"return-object":""},model:{value:t.list.qq3,callback:function(e){t.$set(t.list,"qq3",e)},expression:"list.qq3"}}),t.list.qq3&&"是"==t.list.qq3.text?s("v-autocomplete",{attrs:{items:t.qq3OptionsItems,label:"異常選擇",rules:t.emptyObjRules,multiple:""},model:{value:t.list.qq3.Options,callback:function(e){t.$set(t.list.qq3,"Options",e)},expression:"list.qq3.Options"}}):t._e()],1),s("div",{staticClass:"d-flex"},[s("v-autocomplete",{staticClass:"mr-2",attrs:{items:t.qq4Items,label:"活動功能異常",rules:t.emptyRules,"return-object":""},model:{value:t.list.qq4,callback:function(e){t.$set(t.list,"qq4",e)},expression:"list.qq4"}}),t.list.qq4&&"是"==t.list.qq4.text?s("v-autocomplete",{attrs:{items:t.qq4OptionsItems,label:"異常選擇",rules:t.emptyObjRules,multiple:""},model:{value:t.list.qq4.Options,callback:function(e){t.$set(t.list.qq4,"Options",e)},expression:"list.qq4.Options"}}):t._e()],1),s("div",{staticClass:"d-flex"},[s("v-autocomplete",{staticClass:"mr-2",attrs:{items:t.qq5Items,label:"體能虛弱",rules:t.emptyRules,"return-object":""},model:{value:t.list.qq5,callback:function(e){t.$set(t.list,"qq5",e)},expression:"list.qq5"}}),t.list.qq5&&"是"==t.list.qq5.text?s("v-autocomplete",{attrs:{items:t.qq5OptionsItems,label:"異常選擇",rules:t.emptyObjRules,multiple:""},model:{value:t.list.qq5.Options,callback:function(e){t.$set(t.list.qq5,"Options",e)},expression:"list.qq5.Options"}}):t._e()],1),s("div",{staticClass:"d-flex"},[s("v-autocomplete",{staticClass:"mr-2",attrs:{items:t.qq6Items,label:"知覺障礙",rules:t.emptyRules,"return-object":""},model:{value:t.list.qq6,callback:function(e){t.$set(t.list,"qq6",e)},expression:"list.qq6"}}),t.list.qq6&&"是"==t.list.qq6.text?s("v-autocomplete",{attrs:{items:t.qq6OptionsItems,label:"異常選擇",rules:t.emptyObjRules,multiple:""},model:{value:t.list.qq6.Options,callback:function(e){t.$set(t.list.qq6,"Options",e)},expression:"list.qq6.Options"}}):t._e()],1),s("div",{staticClass:"d-flex"},[s("v-autocomplete",{staticClass:"mr-2",attrs:{items:t.qq7Items,label:"暈眩/低血壓",rules:t.emptyRules,"return-object":""},model:{value:t.list.qq7,callback:function(e){t.$set(t.list,"qq7",e)},expression:"list.qq7"}}),t.list.qq7&&"是"==t.list.qq7.text?s("v-autocomplete",{attrs:{items:t.qq7OptionsItems,label:"異常選擇",rules:t.emptyObjRules,multiple:""},model:{value:t.list.qq7.Options,callback:function(e){t.$set(t.list.qq7,"Options",e)},expression:"list.qq7.Options"}}):t._e()],1),s("div",{staticClass:"d-flex"},[s("v-autocomplete",{staticClass:"mr-2",attrs:{items:t.qq8Items,label:"使用藥物",rules:t.emptyRules,"return-object":""},model:{value:t.list.qq8,callback:function(e){t.$set(t.list,"qq8",e)},expression:"list.qq8"}}),t.list.qq8&&"是"==t.list.qq8.text?s("v-autocomplete",{attrs:{items:t.qq8OptionsItems,label:"異常選擇",rules:t.emptyObjRules,multiple:""},model:{value:t.list.qq8.Options,callback:function(e){t.$set(t.list.qq8,"Options",e)},expression:"list.qq8.Options"}}):t._e(),t.list.qq8&&t.list.qq8.Options&&t.list.qq8.Options.includes("其他")?s("v-text-field",{staticClass:"ml-2",attrs:{label:"其他說明",rules:t.emptyRules},model:{value:t.list.qq8.Other,callback:function(e){t.$set(t.list.qq8,"Other",e)},expression:"list.qq8.Other"}}):t._e()],1)],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer"),"add"==t.processType?s("v-btn",{staticClass:"primary",attrs:{loading:t.loading,disabled:t.loading},on:{click:t.addOK}},[t._v("確認新增")]):t._e(),"edit"==t.processType?s("v-btn",{staticClass:"success",attrs:{loading:t.loading,disabled:t.loading},on:{click:t.editOK}},[t._v("確認修改")]):t._e()],1)],1)],1)],1)},o=[],r=s("5a0c"),c=s.n(r),u={props:["useDataBase","items"],data:function(){return{dialog:!1,list:{},processType:"",title:"",titleStyle:"",emptyRules:[function(t){return!!t||"不可空白"}],emptyObjRules:[function(t){return Boolean(Object.keys(t||{})[0])||"不可空白"}],loading:!1,qq1Items:[{text:"否",Point:0},{text:"是",Point:1}],qq2Items:[{text:"否",Point:0},{text:"是",Point:3}],qq3Items:[{text:"否",Point:0},{text:"是",Point:3}],qq4Items:[{text:"否",Point:0},{text:"是",Point:3}],qq5Items:[{text:"否",Point:0},{text:"是",Point:3}],qq6Items:[{text:"否",Point:0},{text:"是",Point:3}],qq7Items:[{text:"否",Point:0},{text:"是",Point:3}],qq8Items:[{text:"否",Point:0},{text:"是",Point:3}],qq3OptionsItems:["曾突發意識改變","曾突發全身性抽蓄","目前意識狀態變差","目前心智狀態變差","躁動","合作度差","麻醉未醒"],qq4OptionsItems:["活動障礙","一側肢體肌力≦4分","平衡感障礙","行走協調功能差"],qq5OptionsItems:["無力","活動費力","身體耐受力不足","行動遲緩"],qq6OptionsItems:["雙眼視力障礙","位置感缺失","偏盲","半邊忽略","無法判定"],qq7OptionsItems:["頭暈","暈眩","姿位性低血壓","低血壓(註)"],qq8OptionsItems:["麻醉止痛劑","鎮靜安眠劑","散瞳劑","鎮攣劑","肌肉鬆弛劑","降壓利尿劑","瀉劑","抗鬱劑","其他"]}},methods:{addProcess:function(){var t=this;this.processType="add",this.title="新增資料",this.titleStyle="font-weight-black error lighten-2",this.list={},this.items.length&&(this.list=JSON.parse(JSON.stringify(this.items[0])),delete this.list.snkey,delete this.list.user_snkey,delete this.list.create_man,delete this.list.create_man_snkey,delete this.list.edit_man,delete this.list.uploadData,delete this.list.uploadState),this.$nextTick((function(){t.$refs.form.resetValidation()}))},editProcess:function(t){this.dialog=!0,this.processType="edit",this.title="修改資料",this.titleStyle="font-weight-black success lighten-2",this.list=JSON.parse(JSON.stringify(t))},addOK:function(){var t=this;if(this.$refs.form.validate()){this.list.user_snkey=this.$store.state.uData.snkey,this.list.create_man=this.$store.state.pData.username+"("+c()().format("YYYY-MM-DD HH:mm:ss")+")",this.list.create_man_snkey=this.$store.state.pData.snkey;var e={datalist:JSON.stringify(this.list)};this.loading=!0,this.$api.options("general/add/"+this.$store.state.databaseName+"/"+this.useDataBase,e).then((function(e){if(1==e.state){var s={msg:"已新增",type:!0,theme:"success"};t.$store.commit("snackbar",s),t.$emit("getAllData"),t.dialog=!1,t.loading=!1}}))}else{var s={msg:"資料輸入不完全!!請重新確認!!",type:!0,theme:"warning"};this.$store.commit("snackbar",s)}},editOK:function(){var t=this;if(this.$refs.form.validate()){this.list.edit_man||(this.list.edit_man=""),this.list.edit_man=this.$store.state.pData.username+"("+c()().format("YYYY-MM-DD HH:mm:ss")+")"+this.list.edit_man;var e={snkey:this.list.snkey,datalist:JSON.stringify(this.list),edit_man:"pass"};this.loading=!0,this.$api.options("general/edit/"+this.$store.state.databaseName+"/"+this.useDataBase,e).then((function(e){if(1==e.state){var s={msg:"已修改",type:!0,theme:"success"};t.$store.commit("snackbar",s),t.$emit("getAllData"),t.loading=!1,t.dialog=!1}}))}else{var s={msg:"資料輸入不完全!!請重新確認!!",type:!0,theme:"warning"};this.$store.commit("snackbar",s)}}}},m=u,d=s("2877"),p=s("6544"),q=s.n(p),f=s("c6a6"),v=s("8336"),h=s("b0af"),b=s("99d9"),O=s("169a"),y=s("ce7e"),g=s("4bd4"),x=s("132d"),_=s("2fa4"),k=s("8654"),D=Object(d["a"])(m,n,o,!1,null,null,null),$=D.exports;q()(D,{VAutocomplete:f["a"],VBtn:v["a"],VCard:h["a"],VCardActions:b["b"],VCardText:b["d"],VCardTitle:b["e"],VDialog:O["a"],VDivider:y["a"],VForm:g["a"],VIcon:x["a"],VSpacer:_["a"],VTextField:k["a"]});var P=s("f858");function I(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function C(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?I(Object(s),!0).forEach((function(e){Object(l["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):I(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var S={components:{popupadd:$},data:function(){return{useDataBase:"fallrisks",items:[],searchKey:"",itemsPerPageOptions:[10,20,30],itemsPerPage:10}},computed:{searchfilter:function(){var t=this.searchKey.split(" "),e="";return t.reduce((function(t,s){return t.filter((function(t){if(e=JSON.stringify(t).toUpperCase(),e.includes(s.toUpperCase()))return t}))}),this.items)}},mounted:function(){this.getAllData()},methods:{getAllData:function(){var t=this;this.$api.options("general/getAll/"+this.$store.state.databaseName+"/"+this.useDataBase).then((function(e){t.items=e.map((function(t){return C({},JSON.parse(t.datalist),{snkey:t.snkey})})).filter((function(e){return e.user_snkey==t.$store.state.uData.snkey})).sort((function(t,e){return t.Date<e.Date?1:-1}))}))},edit:function(t){this.$refs.childFn.editProcess(t)},del:function(t){var e=this;this.$confirm("確認刪除?").then((function(s){t.delman=e.$store.state.pData.username+"("+c()().format("YYYY-MM-DD HH:mm:ss")+")";var i={snkey:t.snkey,tablename:e.useDataBase,info:JSON.stringify(t)};s&&e.$api.options("general/delv3/"+e.$store.state.databaseName+"/"+i.tablename,i).then((function(t){if(1==t.state){var s={msg:"已刪除",type:!0,theme:"success"};e.$store.commit("snackbar",s),e.getAllData()}}))}))},pushToMOHW:function(t){var e,s=this;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(this.$confirm("確認上傳資料到衛福部?"));case 2:e=i.sent,e&&P["a"].pushToMOHW(t,this.useDataBase,JSON.stringify(this.dataToJson(t))).then((function(t){t&&s.getAllData()}));case 4:case"end":return i.stop()}}),null,this)},checkMOHWData:function(t){var e=this;P["a"].checkMOHWData(t,this.useDataBase).then((function(t){t&&e.getAllData()}))},dataToJson:function(t){console.log(t);var e=this.$store.state.personnelItems.find((function(e){return e.snkey==t.create_man_snkey})),s={};function i(t){console.log("OptionsItems",t);var e="";return t.forEach((function(t,s){s&&(e+=","),e+=t})),e}return s.Date=t.Date,e&&e.idNum?s.NurseID=e.idNum:s.NurseID="N223456789",s.AssessmentNo=this.items.length,s.Questions=[{Question:"年紀65歲以上",Answer:t.qq1.text,Options:""},{Question:"過去一年內曾跌倒",Answer:t.qq2.text,Options:""},{Question:"最近意識/認知出現異常",Answer:t.qq3.text,Options:"是"==t.qq3.text?i(t.qq3.Options):null},{Question:"活動功能異常",Answer:t.qq4.text,Options:"是"==t.qq4.text?i(t.qq4.Options):null},{Question:"體能虛弱",Answer:t.qq5.text,Options:"是"==t.qq5.text?i(t.qq5.Options):null},{Question:"知覺障礙",Answer:t.qq6.text,Options:"是"==t.qq6.text?i(t.qq6.Options):null},{Question:"暈眩/低血壓",Answer:t.qq7.text,Options:"是"==t.qq7.text?i(t.qq7.Options):null},{Question:"使用藥物",Answer:t.qq8.text,Options:"是"==t.qq8.text?i(t.qq8.Options):null,Other:t.qq8&&t.qq8.Options&&t.qq8.Options.includes("其他")?t.qq8.Other:""}],{DataList:[{CaseID:this.$store.state.uData.id_num,EndDate:this.$store.state.uData.in_date,HealthyHabits:[],MedicalHistories:[],DrugSafeties:[],BodyEvaluations:[],PressureInjuries:[],FallRisks:[s],ADLs:[],IADLs:[],Dementias:[],GeriatricDepressionScales:[],MNASFs:[],PainEvaluations:[],SOFs:[]}]}},returnState:function(t){var e=JSON.parse(t.uploadState.data);return c()(e[0].log_date).format("YYYY-MM-DD HH:mm:ss")}}},j=S,w=(s("6da7"),s("62ad")),V=s("c377"),A=s("8860"),R=s("da13"),N=s("5d23"),T=s("e449"),H=s("0fd9"),M=s("1f4f"),Y=s("71d9"),J=Object(d["a"])(j,i,a,!1,null,null,null);e["default"]=J.exports;q()(J,{VBtn:v["a"],VCard:h["a"],VCardText:b["d"],VCardTitle:b["e"],VCol:w["a"],VDataIterator:V["a"],VIcon:x["a"],VList:A["a"],VListItem:R["a"],VListItemTitle:N["k"],VMenu:T["a"],VRow:H["a"],VSimpleTable:M["a"],VTextField:k["a"],VToolbar:Y["a"]})}}]);
//# sourceMappingURL=chunk-2ce1c8f6.0eed661f.js.map